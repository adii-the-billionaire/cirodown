<!doctype html>
<html lang=en>
<head>
<meta charset=utf-8>
<title>Cirodown</title>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.10.1/css/all.css">
<style>
@import "cirodown.min.css";
</style>
<link rel="stylesheet" type="text/css" href="main.css">
<body>
<header>
<a href="/">Ciro Santilli???</a>
<a href="/cirodown">Cirodown!!!</a>
<a class="font-awesome-container" href="https://stackoverflow.com/users/895245"><i class="fab fa-stack-overflow fa-fw"></i></a>
<a class="font-awesome-container" href="https://github.com/cirosantilli"><i class="fab fa-github fa-fw"></i></a>
</header>
<main class="cirodown">
<div><span class="hide-hover"><a href="#cirodown">ğŸ”—</a></span><h1 id="cirodown"><a href="#cirodown" title="link to this element">Cirodown</a><span> </span></h1>
</div><div><span class="hide-hover"><a href="#p-1">ğŸ”—</a></span><div class="p" id="p-1">A Markup language to write multipage or single page HTML / PDF books, blogs, etc. that is <a href="#saner">saner</a> and more powerful than Markdown and Asciidoctor, but still nicer to write than XML and JSON, with reference implementation in JavaScript.</div></div><div><span class="hide-hover"><a href="#p-2">ğŸ”—</a></span><div class="p" id="p-2">The source for this document is at: <a href="https://github.com/cirosantilli/cirodown/blob/master/README.ciro">https://github.com/cirosantilli/cirodown/blob/master/README.ciro</a> and a rendered version can be seen at: <a href="https://cirosantilli.com/cirodown">https://cirosantilli.com/cirodown</a> and a live in-browser demo at: <a href="https://cirosantilli.com/cirodown/editor">https://cirosantilli.com/cirodown/editor</a>.</div></div><div class="toc-container" id="toc-1">
<ul>
<li><div id="toc-quick-start"><a href="#quick-start">1. Quick start</a><span> | <a href="#toc-quick-start">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div></li>
<li><div id="toc-design-goals"><a href="#design-goals">2. Design goals</a><span> | <a href="#toc-design-goals">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div>
<ul>
<li><div id="toc-saner"><a href="#saner">2.1. Saner</a><span> | <a href="#toc-saner">ğŸ”— link</a> | <a href="#toc-design-goals">â†‘ parent "Design goals"</a></span></div></li>
<li><div id="toc-more-powerful"><a href="#more-powerful">2.2. More powerful</a><span> | <a href="#toc-more-powerful">ğŸ”— link</a> | <a href="#toc-design-goals">â†‘ parent "Design goals"</a></span></div></li>
</ul>
<li><div id="toc-paragraphs"><a href="#paragraphs">3. Paragraphs <code>\p</code></a><span> | <a href="#toc-paragraphs">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div></li>
<li><div id="toc-links"><a href="#links">4. Links <code>\a</code></a><span> | <a href="#toc-links">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div>
<ul>
<li><div id="toc-insane-link-parsing-rules"><a href="#insane-link-parsing-rules">4.1. Insane link parsing rules</a><span> | <a href="#toc-insane-link-parsing-rules">ğŸ”— link</a> | <a href="#toc-links">â†‘ parent "Links <code>\a</code>"</a></span></div></li>
</ul>
<li><div id="toc-internal-cross-references"><a href="#internal-cross-references">5. Internal cross references <code>\x</code></a><span> | <a href="#toc-internal-cross-references">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div>
<ul>
<li><div id="toc-x-code-child-code-argument"><a href="#x-code-child-code-argument">5.1. x <code>child</code> argument</a><span> | <a href="#toc-x-code-child-code-argument">ğŸ”— link</a> | <a href="#toc-internal-cross-references">â†‘ parent "Internal cross references <code>\x</code>"</a></span></div></li>
<li><div id="toc-cross-reference-full-argument"><a href="#cross-reference-full-argument">5.2. Cross reference <code>full</code> argument</a><span> | <a href="#toc-cross-reference-full-argument">ğŸ”— link</a> | <a href="#toc-internal-cross-references">â†‘ parent "Internal cross references <code>\x</code>"</a></span></div></li>
<li><div id="toc-internal-cross-file-references"><a href="#internal-cross-file-references">5.3. Internal cross file references</a><span> | <a href="#toc-internal-cross-file-references">ğŸ”— link</a> | <a href="#toc-internal-cross-references">â†‘ parent "Internal cross references <code>\x</code>"</a></span></div>
<ul>
<li><div id="toc-internal-cross-file-references-internals"><a href="#internal-cross-file-references-internals">5.3.1. Internal cross file references internals</a><span> | <a href="#toc-internal-cross-file-references-internals">ğŸ”— link</a> | <a href="#toc-internal-cross-file-references">â†‘ parent "Internal cross file references"</a></span></div></li>
</ul>
<li><div id="toc-automatic-id-from-title"><a href="#automatic-id-from-title">5.4. Automatic ID from title</a><span> | <a href="#toc-automatic-id-from-title">ğŸ”— link</a> | <a href="#toc-internal-cross-references">â†‘ parent "Internal cross references <code>\x</code>"</a></span></div></li>
</ul>
<li><div id="toc-headers"><a href="#headers">6. Headers <code>\h</code></a><span> | <a href="#toc-headers">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div>
<ul>
<li><div id="toc-unlimited-header-levels"><a href="#unlimited-header-levels">6.1. Unlimited header levels</a><span> | <a href="#toc-unlimited-header-levels">ğŸ”— link</a> | <a href="#toc-headers">â†‘ parent "Headers <code>\h</code>"</a></span></div>
<ul>
<li><div id="toc-my-h4"><a href="#my-h4">6.1.1. My h4</a><span> | <a href="#toc-my-h4">ğŸ”— link</a> | <a href="#toc-unlimited-header-levels">â†‘ parent "Unlimited header levels"</a></span></div>
<ul>
<li><div id="toc-my-h5"><a href="#my-h5">6.1.1.1. My h5</a><span> | <a href="#toc-my-h5">ğŸ”— link</a> | <a href="#toc-my-h4">â†‘ parent "My h4"</a></span></div>
<ul>
<li><div id="toc-my-h6"><a href="#my-h6">6.1.1.1.1. My h6</a><span> | <a href="#toc-my-h6">ğŸ”— link</a> | <a href="#toc-my-h5">â†‘ parent "My h5"</a></span></div>
<ul>
<li><div id="toc-my-h7"><a href="#my-h7">6.1.1.1.1.1. My h7</a><span> | <a href="#toc-my-h7">ğŸ”— link</a> | <a href="#toc-my-h6">â†‘ parent "My h6"</a></span></div>
<ul>
<li><div id="toc-my-h8"><a href="#my-h8">6.1.1.1.1.1.1. My h8</a><span> | <a href="#toc-my-h8">ğŸ”— link</a> | <a href="#toc-my-h7">â†‘ parent "My h7"</a></span></div>
<ul>
<li><div id="toc-my-h9"><a href="#my-h9">6.1.1.1.1.1.1.1. My h9</a><span> | <a href="#toc-my-h9">ğŸ”— link</a> | <a href="#toc-my-h8">â†‘ parent "My h8"</a></span></div>
<ul>
<li><div id="toc-my-h10"><a href="#my-h10">6.1.1.1.1.1.1.1.1. My h10</a><span> | <a href="#toc-my-h10">ğŸ”— link</a> | <a href="#toc-my-h9">â†‘ parent "My h9"</a></span></div>
<ul>
<li><div id="toc-my-h11"><a href="#my-h11">6.1.1.1.1.1.1.1.1.1. My h11</a><span> | <a href="#toc-my-h11">ğŸ”— link</a> | <a href="#toc-my-h10">â†‘ parent "My h10"</a></span></div>
<ul>
<li><div id="toc-my-h12"><a href="#my-h12">6.1.1.1.1.1.1.1.1.1.1. My h12</a><span> | <a href="#toc-my-h12">ğŸ”— link</a> | <a href="#toc-my-h11">â†‘ parent "My h11"</a></span></div>
<ul>
<li><div id="toc-my-h13"><a href="#my-h13">6.1.1.1.1.1.1.1.1.1.1.1. My h13</a><span> | <a href="#toc-my-h13">ğŸ”— link</a> | <a href="#toc-my-h12">â†‘ parent "My h12"</a></span></div></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<li><div id="toc-table-of-contents"><a href="#table-of-contents">6.2. Table of contents <code>\toc</code></a><span> | <a href="#toc-table-of-contents">ğŸ”— link</a> | <a href="#toc-headers">â†‘ parent "Headers <code>\h</code>"</a></span></div>
<ul>
<li><div id="toc-id-scope"><a href="#id-scope">6.2.1. id_scope</a><span> | <a href="#toc-id-scope">ğŸ”— link</a> | <a href="#toc-table-of-contents">â†‘ parent "Table of contents <code>\toc</code>"</a></span></div></li>
</ul>
<li><div id="toc-header-explicit-levels-vs-nesting-design-choice"><a href="#header-explicit-levels-vs-nesting-design-choice">6.3. Header explicit levels vs nesting design choice</a><span> | <a href="#toc-header-explicit-levels-vs-nesting-design-choice">ğŸ”— link</a> | <a href="#toc-headers">â†‘ parent "Headers <code>\h</code>"</a></span></div></li>
<li><div id="toc-includes"><a href="#includes">6.4. Includes <code>\include</code></a><span> | <a href="#toc-includes">ğŸ”— link</a> | <a href="#toc-headers">â†‘ parent "Headers <code>\h</code>"</a></span></div>
<ul>
<li><div id="toc-not-readme"><a href="#not-readme">6.4.1. Not the README</a><span> | <a href="#toc-not-readme">ğŸ”— link</a> | <a href="#toc-includes">â†‘ parent "Includes <code>\include</code>"</a></span></div></li>
<li><div id="toc-not-readme-2"><a href="#not-readme-2">6.4.2. Not the README 2</a><span> | <a href="#toc-not-readme-2">ğŸ”— link</a> | <a href="#toc-includes">â†‘ parent "Includes <code>\include</code>"</a></span></div></li>
</ul>
<li><div id="toc-skipping-header-levels"><a href="#skipping-header-levels">6.5. Skipping header levels</a><span> | <a href="#toc-skipping-header-levels">ğŸ”— link</a> | <a href="#toc-headers">â†‘ parent "Headers <code>\h</code>"</a></span></div></li>
<li><div id="toc-the-toplevel-header"><a href="#the-toplevel-header">6.6. The toplevel header</a><span> | <a href="#toc-the-toplevel-header">ğŸ”— link</a> | <a href="#toc-headers">â†‘ parent "Headers <code>\h</code>"</a></span></div>
<ul>
<li><div id="toc-the-toplevel-header-ids-don-t-show"><a href="#the-toplevel-header-ids-don-t-show">6.6.1. The toplevel header IDs don't show</a><span> | <a href="#toc-the-toplevel-header-ids-don-t-show">ğŸ”— link</a> | <a href="#toc-the-toplevel-header">â†‘ parent "The toplevel header"</a></span></div></li>
<li><div id="toc-the-id-of-the-first-header-is-derived-from-the-filename"><a href="#the-id-of-the-first-header-is-derived-from-the-filename">6.6.2. The ID of the first header is derived from the filename</a><span> | <a href="#toc-the-id-of-the-first-header-is-derived-from-the-filename">ğŸ”— link</a> | <a href="#toc-the-toplevel-header">â†‘ parent "The toplevel header"</a></span></div></li>
</ul>
</li>
</ul>
<li><div id="toc-lists"><a href="#lists">7. Lists <code>\l</code></a><span> | <a href="#toc-lists">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div></li>
<li><div id="toc-images"><a href="#images">8. Images (<code>\Image</code> and <code>\image</code>)</a><span> | <a href="#toc-images">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div>
<ul>
<li><div id="toc-image-height"><a href="#image-height">8.1. Image height</a><span> | <a href="#toc-image-height">ğŸ”— link</a> | <a href="#toc-images">â†‘ parent "Images (<code>\Image</code> and <code>\image</code>)"</a></span></div></li>
<li><div id="toc-image-id"><a href="#image-id">8.2. Image IDs and captions</a><span> | <a href="#toc-image-id">ğŸ”— link</a> | <a href="#toc-images">â†‘ parent "Images (<code>\Image</code> and <code>\image</code>)"</a></span></div></li>
<li><div id="toc-where-to-store-images"><a href="#where-to-store-images">8.3. Where to store images</a><span> | <a href="#toc-where-to-store-images">ğŸ”— link</a> | <a href="#toc-images">â†‘ parent "Images (<code>\Image</code> and <code>\image</code>)"</a></span></div>
<ul>
<li><div id="toc-store-images-inside-the-repository-itself"><a href="#store-images-inside-the-repository-itself">8.3.1. Store images inside the repository itself</a><span> | <a href="#toc-store-images-inside-the-repository-itself">ğŸ”— link</a> | <a href="#toc-where-to-store-images">â†‘ parent "Where to store images"</a></span></div></li>
<li><div id="toc-store-images-in-a-separate-media-repository"><a href="#store-images-in-a-separate-media-repository">8.3.2. Store images in a separate media repository</a><span> | <a href="#toc-store-images-in-a-separate-media-repository">ğŸ”— link</a> | <a href="#toc-where-to-store-images">â†‘ parent "Where to store images"</a></span></div></li>
<li><div id="toc-store-images-in-wikimedia-commons"><a href="#store-images-in-wikimedia-commons">8.3.3. Store images in Wikimedia Commons</a><span> | <a href="#toc-store-images-in-wikimedia-commons">ğŸ”— link</a> | <a href="#toc-where-to-store-images">â†‘ parent "Where to store images"</a></span></div></li>
</ul>
<li><div id="toc-image-lazy-loading"><a href="#image-lazy-loading">8.4. Image lazy loading</a><span> | <a href="#toc-image-lazy-loading">ğŸ”— link</a> | <a href="#toc-images">â†‘ parent "Images (<code>\Image</code> and <code>\image</code>)"</a></span></div></li>
<li><div id="toc-image-generators"><a href="#image-generators">8.5. Image generators</a><span> | <a href="#toc-image-generators">ğŸ”— link</a> | <a href="#toc-images">â†‘ parent "Images (<code>\Image</code> and <code>\image</code>)"</a></span></div></li>
</ul>
<li><div id="toc-videos"><a href="#videos">9. Videos (<code>\Video</code> and <code>\video</code>)</a><span> | <a href="#toc-videos">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div>
<ul>
<li><div id="toc-video-code-start-code-argument"><a href="#video-code-start-code-argument">9.1. Video <code>start</code> argument</a><span> | <a href="#toc-video-code-start-code-argument">ğŸ”— link</a> | <a href="#toc-videos">â†‘ parent "Videos (<code>\Video</code> and <code>\video</code>)"</a></span></div></li>
<li><div id="toc-video-lazy-loading"><a href="#video-lazy-loading">9.2. Video lazy loading</a><span> | <a href="#toc-video-lazy-loading">ğŸ”— link</a> | <a href="#toc-videos">â†‘ parent "Videos (<code>\Video</code> and <code>\video</code>)"</a></span></div></li>
</ul>
<li><div id="toc-code"><a href="#code">10. Code (<code>`</code>, <code>``</code>, <code>\c</code> and <code>\C</code>)</a><span> | <a href="#toc-code">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div></li>
<li><div id="toc-math"><a href="#math">11. Mathematics <code>$</code>, <code>$$</code>, <code>\m</code> and <code>\M</code></a><span> | <a href="#toc-math">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div>
<ul>
<li><div id="toc-math-defines-across-blocks"><a href="#math-defines-across-blocks">11.1. Math defines across blocks</a><span> | <a href="#toc-math-defines-across-blocks">ğŸ”— link</a> | <a href="#toc-math">â†‘ parent "Mathematics <code>$</code>, <code>$$</code>, <code>\m</code> and <code>\M</code>"</a></span></div></li>
</ul>
<li><div id="toc-tables"><a href="#tables">12. Tables <code>\table</code>, <code>\tr</code>, <code>\th</code> and <code>\td</code></a><span> | <a href="#toc-tables">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div></li>
<li><div id="toc-quotations"><a href="#quotations">13. Quotations <code>\q</code></a><span> | <a href="#toc-quotations">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div></li>
<li><div id="toc-comments"><a href="#comments">14. Comments</a><span> | <a href="#toc-comments">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div></li>
<li><div id="toc-cirodown-example"><a href="#cirodown-example">15. <code>cirodown_example</code></a><span> | <a href="#toc-cirodown-example">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div></li>
<li><div id="toc-cirodown-syntax"><a href="#cirodown-syntax">16. Cirodown syntax</a><span> | <a href="#toc-cirodown-syntax">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div>
<ul>
<li><div id="toc-insane-macro-shortcuts"><a href="#insane-macro-shortcuts">16.1. Insane macro shortcuts</a><span> | <a href="#toc-insane-macro-shortcuts">ğŸ”— link</a> | <a href="#toc-cirodown-syntax">â†‘ parent "Cirodown syntax"</a></span></div>
<ul>
<li><div id="toc-insane-code-and-math-shortcuts"><a href="#insane-code-and-math-shortcuts">16.1.1. Insane code and math shortcuts</a><span> | <a href="#toc-insane-code-and-math-shortcuts">ğŸ”— link</a> | <a href="#toc-insane-macro-shortcuts">â†‘ parent "Insane macro shortcuts"</a></span></div></li>
<li><div id="toc-insane-macro-shortcut-extra-arguments"><a href="#insane-macro-shortcut-extra-arguments">16.1.2. Insane macro shortcut extra arguments</a><span> | <a href="#toc-insane-macro-shortcut-extra-arguments">ğŸ”— link</a> | <a href="#toc-insane-macro-shortcuts">â†‘ parent "Insane macro shortcuts"</a></span></div></li>
<li><div id="toc-escapes-in-insane-macro-shortcuts"><a href="#escapes-in-insane-macro-shortcuts">16.1.3. Escapes in insane macro shortcuts</a><span> | <a href="#toc-escapes-in-insane-macro-shortcuts">ğŸ”— link</a> | <a href="#toc-insane-macro-shortcuts">â†‘ parent "Insane macro shortcuts"</a></span></div></li>
</ul>
<li><div id="toc-macro-argument-syntax"><a href="#macro-argument-syntax">16.2. Macro argument syntax</a><span> | <a href="#toc-macro-argument-syntax">ğŸ”— link</a> | <a href="#toc-cirodown-syntax">â†‘ parent "Cirodown syntax"</a></span></div>
<ul>
<li><div id="toc-positional-vs-named-arguments"><a href="#positional-vs-named-arguments">16.2.1. Positional vs named arguments (<code>[...]</code> vs <code>{key=...}</code>)</a><span> | <a href="#toc-positional-vs-named-arguments">ğŸ”— link</a> | <a href="#toc-macro-argument-syntax">â†‘ parent "Macro argument syntax"</a></span></div>
<ul>
<li><div id="toc-positional-argument-default-values"><a href="#positional-argument-default-values">16.2.1.1. Positional argument default values</a><span> | <a href="#toc-positional-argument-default-values">ğŸ”— link</a> | <a href="#toc-positional-vs-named-arguments">â†‘ parent "Positional vs named arguments (<code>[...]</code> vs <code>{key=...}</code>)"</a></span></div>
<ul>
<li><div id="toc-mandatory-positional-arguments"><a href="#mandatory-positional-arguments">16.2.1.1.1. mandatory positional arguments</a><span> | <a href="#toc-mandatory-positional-arguments">ğŸ”— link</a> | <a href="#toc-positional-argument-default-values">â†‘ parent "Positional argument default values"</a></span></div></li>
</ul>
<li><div id="toc-boolean-named-arguments"><a href="#boolean-named-arguments">16.2.1.2. Boolean named arguments</a><span> | <a href="#toc-boolean-named-arguments">ğŸ”— link</a> | <a href="#toc-positional-vs-named-arguments">â†‘ parent "Positional vs named arguments (<code>[...]</code> vs <code>{key=...}</code>)"</a></span></div></li>
</ul>
<li><div id="toc-javascript-interface-for-arguments"><a href="#javascript-interface-for-arguments">16.2.2. JavaScript interface for arguments</a><span> | <a href="#toc-javascript-interface-for-arguments">ğŸ”— link</a> | <a href="#toc-macro-argument-syntax">â†‘ parent "Macro argument syntax"</a></span></div></li>
<li><div id="toc-literal-arguments"><a href="#literal-arguments">16.2.3. Literal arguments (<code>[[...]]</code> and <code>{{key=...}}</code>)</a><span> | <a href="#toc-literal-arguments">ğŸ”— link</a> | <a href="#toc-macro-argument-syntax">â†‘ parent "Macro argument syntax"</a></span></div></li>
<li><div id="toc-argument-leading-newline-removal"><a href="#argument-leading-newline-removal">16.2.4. Argument leading newline removal</a><span> | <a href="#toc-argument-leading-newline-removal">ğŸ”— link</a> | <a href="#toc-macro-argument-syntax">â†‘ parent "Macro argument syntax"</a></span></div></li>
<li><div id="toc-argument-newlines-between-arguments-removal"><a href="#argument-newlines-between-arguments-removal">16.2.5. Argument newlines between arguments removal</a><span> | <a href="#toc-argument-newlines-between-arguments-removal">ğŸ”— link</a> | <a href="#toc-macro-argument-syntax">â†‘ parent "Macro argument syntax"</a></span></div></li>
<li><div id="toc-escape-characters"><a href="#escape-characters">16.2.6. Escape characters</a><span> | <a href="#toc-escape-characters">ğŸ”— link</a> | <a href="#toc-macro-argument-syntax">â†‘ parent "Macro argument syntax"</a></span></div></li>
<li><div id="toc-auto-parent"><a href="#auto-parent">16.2.7. <code>auto_parent</code> macro property</a><span> | <a href="#toc-auto-parent">ğŸ”— link</a> | <a href="#toc-macro-argument-syntax">â†‘ parent "Macro argument syntax"</a></span></div></li>
<li><div id="toc-remove-whitespace-children"><a href="#remove-whitespace-children">16.2.8. <code>remove_whitespace_children</code> macro argument property</a><span> | <a href="#toc-remove-whitespace-children">ğŸ”— link</a> | <a href="#toc-macro-argument-syntax">â†‘ parent "Macro argument syntax"</a></span></div></li>
</ul>
<li><div id="toc-macro-capitalization-for-block-vs-inline"><a href="#macro-capitalization-for-block-vs-inline">16.3. Macro capitalization for block vs inline</a><span> | <a href="#toc-macro-capitalization-for-block-vs-inline">ğŸ”— link</a> | <a href="#toc-cirodown-syntax">â†‘ parent "Cirodown syntax"</a></span></div></li>
<li><div id="toc-plaintext-conversion"><a href="#plaintext-conversion">16.4. Plaintext conversion</a><span> | <a href="#toc-plaintext-conversion">ğŸ”— link</a> | <a href="#toc-cirodown-syntax">â†‘ parent "Cirodown syntax"</a></span></div></li>
<li><div id="toc-security"><a href="#security">16.5. Security</a><span> | <a href="#toc-security">ğŸ”— link</a> | <a href="#toc-cirodown-syntax">â†‘ parent "Cirodown syntax"</a></span></div></li>
</ul>
<li><div id="toc-tooling"><a href="#tooling">17. Tooling</a><span> | <a href="#toc-tooling">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div>
<ul>
<li><div id="toc-cirodown-executable"><a href="#cirodown-executable">17.1. <code>cirodown</code> executable</a><span> | <a href="#toc-cirodown-executable">ğŸ”— link</a> | <a href="#toc-tooling">â†‘ parent "Tooling"</a></span></div>
<ul>
<li><div id="toc-index-files"><a href="#index-files">17.1.1. Index files</a><span> | <a href="#toc-index-files">ğŸ”— link</a> | <a href="#toc-cirodown-executable">â†‘ parent "<code>cirodown</code> executable"</a></span></div></li>
<li><div id="toc-cirodown-executable-options"><a href="#cirodown-executable-options">17.1.2. <code>cirodown</code> executable options</a><span> | <a href="#toc-cirodown-executable-options">ğŸ”— link</a> | <a href="#toc-cirodown-executable">â†‘ parent "<code>cirodown</code> executable"</a></span></div>
<ul>
<li><div id="toc-dry-run"><a href="#dry-run">17.1.2.1. <code>--dry-run</code></a><span> | <a href="#toc-dry-run">ğŸ”— link</a> | <a href="#toc-cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></div></li>
<li><div id="toc-generate"><a href="#generate">17.1.2.2. <code>--generate</code></a><span> | <a href="#toc-generate">ğŸ”— link</a> | <a href="#toc-cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></div></li>
<li><div id="toc-generate-multifile"><a href="#generate-multifile">17.1.2.3. <code>--generate-multifile</code></a><span> | <a href="#toc-generate-multifile">ğŸ”— link</a> | <a href="#toc-cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></div></li>
<li><div id="toc-help-macros"><a href="#help-macros">17.1.2.4. <code>--help-macros</code></a><span> | <a href="#toc-help-macros">ğŸ”— link</a> | <a href="#toc-cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></div></li>
<li><div id="toc-html-embed"><a href="#html-embed">17.1.2.5. <code>--html-embed</code></a><span> | <a href="#toc-html-embed">ğŸ”— link</a> | <a href="#toc-cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></div></li>
<li><div id="toc-html-single-page"><a href="#html-single-page">17.1.2.6. <code>--html-single-page</code></a><span> | <a href="#toc-html-single-page">ğŸ”— link</a> | <a href="#toc-cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></div></li>
<li><div id="toc-html-x-no-extension"><a href="#html-x-no-extension">17.1.2.7. <code>--no-html-x-extension</code></a><span> | <a href="#toc-html-x-no-extension">ğŸ”— link</a> | <a href="#toc-cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></div></li>
<li><div id="toc-outfile"><a href="#outfile">17.1.2.8. <code>--outfile &lt;outfie&gt;</code></a><span> | <a href="#toc-outfile">ğŸ”— link</a> | <a href="#toc-cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></div></li>
<li><div id="toc-publish"><a href="#publish">17.1.2.9. <code>--publish</code></a><span> | <a href="#toc-publish">ğŸ”— link</a> | <a href="#toc-cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></div>
<ul>
<li><div id="toc-publish-to-github-pages"><a href="#publish-to-github-pages">17.1.2.9.1. Publish to GitHub Pages</a><span> | <a href="#toc-publish-to-github-pages">ğŸ”— link</a> | <a href="#toc-publish">â†‘ parent "<code>--publish</code>"</a></span></div></li>
</ul>
<li><div id="toc-publish-commit"><a href="#publish-commit">17.1.2.10. <code>--publish-commit &lt;commit-message&gt;</code></a><span> | <a href="#toc-publish-commit">ğŸ”— link</a> | <a href="#toc-cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></div></li>
<li><div id="toc-watch"><a href="#watch">17.1.2.11. <code>--watch</code></a><span> | <a href="#toc-watch">ğŸ”— link</a> | <a href="#toc-cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></div></li>
<li><div id="toc-template"><a href="#template">17.1.2.12. <code>--template</code></a><span> | <a href="#toc-template">ğŸ”— link</a> | <a href="#toc-cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></div></li>
</ul>
<li><div id="toc-cirodown-json"><a href="#cirodown-json">17.1.3. <code>cirodown.json</code></a><span> | <a href="#toc-cirodown-json">ğŸ”— link</a> | <a href="#toc-cirodown-executable">â†‘ parent "<code>cirodown</code> executable"</a></span></div>
<ul>
<li><div id="toc-media-base-url"><a href="#media-base-url">17.1.3.1. <code>media_base_url</code></a><span> | <a href="#toc-media-base-url">ğŸ”— link</a> | <a href="#toc-cirodown-json">â†‘ parent "<code>cirodown.json</code>"</a></span></div></li>
<li><div id="toc-media-source-type"><a href="#media-source-type">17.1.3.2. <code>media_source_type</code></a><span> | <a href="#toc-media-source-type">ğŸ”— link</a> | <a href="#toc-cirodown-json">â†‘ parent "<code>cirodown.json</code>"</a></span></div></li>
<li><div id="toc-prepublish"><a href="#prepublish">17.1.3.3. <code>prepublish</code></a><span> | <a href="#toc-prepublish">ğŸ”— link</a> | <a href="#toc-cirodown-json">â†‘ parent "<code>cirodown.json</code>"</a></span></div></li>
<li><div id="toc-redirects"><a href="#redirects">17.1.3.4. <code>redirects</code></a><span> | <a href="#toc-redirects">ğŸ”— link</a> | <a href="#toc-cirodown-json">â†‘ parent "<code>cirodown.json</code>"</a></span></div></li>
</ul>
</li>
</ul>
<li><div id="toc-editor-with-preview"><a href="#editor-with-preview">17.2. Editor with preview</a><span> | <a href="#toc-editor-with-preview">ğŸ”— link</a> | <a href="#toc-tooling">â†‘ parent "Tooling"</a></span></div></li>
</ul>
<li><div id="toc-developing-cirodown"><a href="#developing-cirodown">18. Developing Cirodown</a><span> | <a href="#toc-developing-cirodown">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div>
<ul>
<li><div id="toc-test-system"><a href="#test-system">18.1. Test system</a><span> | <a href="#toc-test-system">ğŸ”— link</a> | <a href="#toc-developing-cirodown">â†‘ parent "Developing Cirodown"</a></span></div></li>
<li><div id="toc-overview-of-files-in-this-repository"><a href="#overview-of-files-in-this-repository">18.2. Overview of files in this repository</a><span> | <a href="#toc-overview-of-files-in-this-repository">ğŸ”— link</a> | <a href="#toc-developing-cirodown">â†‘ parent "Developing Cirodown"</a></span></div>
<ul>
<li><div id="toc-build-sass"><a href="#build-sass">18.2.1. <code>build-sass</code></a><span> | <a href="#toc-build-sass">ğŸ”— link</a> | <a href="#toc-overview-of-files-in-this-repository">â†‘ parent "Overview of files in this repository"</a></span></div></li>
</ul>
<li><div id="toc-internals-api"><a href="#internals-api">18.3. Internals API</a><span> | <a href="#toc-internals-api">ğŸ”— link</a> | <a href="#toc-developing-cirodown">â†‘ parent "Developing Cirodown"</a></span></div></li>
<li><div id="toc-toplevel"><a href="#toplevel">18.4. The <code>\toplevel</code> implicit macro</a><span> | <a href="#toc-toplevel">ğŸ”— link</a> | <a href="#toc-developing-cirodown">â†‘ parent "Developing Cirodown"</a></span></div>
<ul>
<li><div id="toc-html-document-title"><a href="#html-document-title">18.4.1. HTML document title</a><span> | <a href="#toc-html-document-title">ğŸ”— link</a> | <a href="#toc-toplevel">â†‘ parent "The <code>\toplevel</code> implicit macro"</a></span></div></li>
</ul>
<li><div id="toc-css"><a href="#css">18.5. CSS</a><span> | <a href="#toc-css">ğŸ”— link</a> | <a href="#toc-developing-cirodown">â†‘ parent "Developing Cirodown"</a></span></div></li>
<li><div id="toc-formal-grammar"><a href="#formal-grammar">18.6. Formal grammar</a><span> | <a href="#toc-formal-grammar">ğŸ”— link</a> | <a href="#toc-developing-cirodown">â†‘ parent "Developing Cirodown"</a></span></div></li>
<li><div id="toc-todo"><a href="#todo">18.7. TODO</a><span> | <a href="#toc-todo">ğŸ”— link</a> | <a href="#toc-developing-cirodown">â†‘ parent "Developing Cirodown"</a></span></div></li>
</ul>
<li><div id="toc-related-projects"><a href="#related-projects">19. Related projects</a><span> | <a href="#toc-related-projects">ğŸ”— link</a> | <a href="#toc-cirodown">â†‘ parent "Cirodown"</a></span></div></li>
</ul>
</div>
<div><span class="hide-hover"><a href="#quick-start">ğŸ”—</a></span><h2 id="quick-start"><a href="#quick-start" title="link to this element">1. Quick start</a><span>  | <a href="#toc-quick-start">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#p-3">ğŸ”—</a></span><div class="p" id="p-3">Live in-browser demo: <a href="https://cirosantilli.com/cirodown/editor">https://cirosantilli.com/cirodown/editor</a></div></div><div><span class="hide-hover"><a href="#p-4">ğŸ”—</a></span><div class="p" id="p-4">Alternatively, you can clone and run it locally with:
<pre id="c-1"><code>git clone https://github.com/cirosantilli/cirodown-template
cd cirodown-template
npm install
./build
xdg-open editor.html
</code></pre>
We want to make that editor amazing later on: <a href="#editor-with-preview">live browser editor</a>.</div></div><div><span class="hide-hover"><a href="#p-5">ğŸ”—</a></span><div class="p" id="p-5">Install the NPM package globally and use it from the command line for a quick conversion:
<pre id="c-2"><code>npm install -g cirodown
printf 'ab\ncd\n' | cirodown --body-only
</code></pre>
or <a href="https://stackoverflow.com/questions/9679932/how-to-use-package-installed-locally-in-node-modules">install in a single directory and run locally from it</a>:
<pre id="c-3"><code>printf '{}\n' &gt; package.json
npm install --save cirodown
printf 'ab\ncd\n' | npx cirodown --body-only
</code></pre></div></div><div><span class="hide-hover"><a href="#p-6">ğŸ”—</a></span><div class="p" id="p-6">To start a new project with a minimal sane template <a href="#generate">use <code>--generate</code></a> and then <a href="#publish-to-github-pages">publish it to GitHub with <code>--publish</code></a>:
<pre id="c-4"><code>mkdir -p cirodown-test
cd cirodown-test
git init
git remote add origin git@github.com:USERNAME/cirodown-test.git
cirodown --generate
git add .
git commit -m 'First commit'
cirodown --publish
</code></pre>
Or to start with a more complex template suitable for multifile projects use <a href="#generate-multifile">use <code>--generate-multifile</code></a> instead:
<pre id="c-5"><code>cirodown --generate-multifile
</code></pre></div></div><div><span class="hide-hover"><a href="#p-7">ğŸ”—</a></span><div class="p" id="p-7">Render all <code>.ciro</code> files form the master of this project to separate files:
<pre id="c-6"><code>git clone https://github.com/cirosantilli/cirodown
cd cirodown
npm link
npm link cirodown
./cirodown --html-single-page -o index.html README.ciro
xdg-open index.html
</code></pre>
or render README.ciro and all includes <a href="#includes">includes</a> into a single HTML page and view it:
<pre id="c-7"><code>./cirodown .
xdg-open index.html
</code></pre>
or render instead as one fully offline standalone HTML file that can be given directly to readers with <a href="#html-embed"><code>--html-embed</code></a>:
<pre id="c-8"><code>./cirodown --html-single-page -o index.html README.ciro
</code></pre></div></div><div><span class="hide-hover"><a href="#p-8">ğŸ”—</a></span><div class="p" id="p-8">Try out the JavaScript API with <a href="api_hello.js">api_hello.js</a>:
<pre id="c-9"><code>npm install cirodown
./api_hello.js
</code></pre></div></div><div><span class="hide-hover"><a href="#p-9">ğŸ”—</a></span><div class="p" id="p-9">The <code>npm link</code> commands allow you to make changes to the code without re-installing the package all the time for development! Try hacking <a href="cirodown">cirodown</a> to see it. Just remember that if you add a new dependency, you must redo the symlinking business:
<pre id="c-10"><code>npm install &lt;dependency&gt;
npm link
npm link cirodown
</code></pre>
Asked if there is a better way at: <a href="https://stackoverflow.com/questions/59389027/how-to-interactively-test-the-executable-of-an-npm-node-js-package-during-develo">https://stackoverflow.com/questions/59389027/how-to-interactively-test-the-executable-of-an-npm-node-js-package-during-develo</a>. The symlink business can be undone with:
<pre id="c-11"><code>npm unlink
rm node_modules/cirodown
</code></pre></div></div><div><span class="hide-hover"><a href="#p-10">ğŸ”—</a></span><div class="p" id="p-10">TODO: create a multifile blog example folder and link from here.</div></div><div><span class="hide-hover"><a href="#design-goals">ğŸ”—</a></span><h2 id="design-goals"><a href="#design-goals" title="link to this element">2. Design goals</a><span>  | <a href="#toc-design-goals">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#p-11">ğŸ”—</a></span><div class="p" id="p-11">Cirodown is designed entirely to allow writing complex professional HTML and PDF scientific books, blogs, articles and encyclopedias.</div></div><div><span class="hide-hover"><a href="#p-12">ğŸ”—</a></span><div class="p" id="p-12">Cirodown aims to be the ultimate LaTeX "killer", allowing books to be finally published as either HTML or PDF painlessly (LaTeX being only a backend to PDF generation), supporting out of the box feature such as:<div><ul id="ul-1">
<li id="l-1"><a href="#internal-cross-references">references</a> to <a href="#headers">headers</a>, <a href="#images">images</a>, etc. with amazing error checking and reporting: never break internal links gain</li><li id="l-2">KaTeX server side <a href="#math">Mathematics</a></li><li id="l-3">multi file features out of the box so you don't need a separate wrapper like Jekyll to make a multi-page website:<div><ul id="ul-2">
<li id="l-4"><a href="#internal-cross-file-references">Internal cross file references</a></li><li id="l-5"><a href="#table-of-contents">table of contents</a> that crosses input files</li><li id="l-6"><code>inotifywait</code> watch rebuild server</li><li id="l-7">cross file includes that work as links on multi output file mode, and true includes in single output file mode</li><li id="l-8">cross file configuration files to factor out common page parts like headers and footers</li></ul></div></li><li id="l-9">runs on the browser to allow live previews, and therefore is written in JavaScript</li></ul></div></div></div><div><span class="hide-hover"><a href="#saner">ğŸ”—</a></span><h3 id="saner"><a href="#saner" title="link to this element">2.1. Saner</a><span>  | <a href="#toc-saner">â‡‘ toc</a> | <a href="#design-goals">â†‘ parent "Design goals"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-13">ğŸ”—</a></span><div class="p" id="p-13">Originally, Cirodown was is meant to be both saner and more powerful than Markdown and Asciidoctor.</div></div><div><span class="hide-hover"><a href="#p-14">ğŸ”—</a></span><div class="p" id="p-14">But alas, as Ciro started implementing and using it, he started to bring some Markdown <a href="#insane-macro-shortcuts">insanity he missed back in</a>.</div></div><div><span class="hide-hover"><a href="#p-15">ğŸ”—</a></span><div class="p" id="p-15">And so this "degraded" slightly into a language slightly saner than Asciidoctor but with an amazing Node.js implementation that makes it better for book writing and website publishing.</div></div><div><span class="hide-hover"><a href="#p-16">ğŸ”—</a></span><div class="p" id="p-16">But hopefully, having starting from a saner point will still produce a saner end result, e.g. there are sane constructs for every insane one.</div></div><div><span class="hide-hover"><a href="#p-17">ğŸ”—</a></span><div class="p" id="p-17">It is intended that this will be an acceptable downside as Cirodown will be used primarily large complex content such as books rather than forum posts, and will therefore primarily written either:<div><ul id="ul-3">
<li id="l-10">in text editors locally, where users have more features than in random browser textareas</li><li id="l-11">in a dedicated website that will revolutionize education, and therefore have a good JavaScript editing interface: <a href="https://github.com/cirosantilli/write-free-science-books-to-get-famous-website">https://github.com/cirosantilli/write-free-science-books-to-get-famous-website</a></li></ul></div></div></div><div><span class="hide-hover"><a href="#p-18">ğŸ”—</a></span><div class="p" id="p-18">For example, originally Cirodown had exactly five magic characters, with similar functions as in LaTeX:<div><ul id="ul-4">
<li id="l-12"><code></code> backslash to start a macro, like LaTeX</li><li id="l-13"><code>{</code> and <code>}</code>: left and right square brackets to delimit <a href="#positional-vs-named-arguments">optional macro arguments</a></li><li id="l-14"><code>[</code> and <code>]</code>: left and right curly braces bracket to start an optional arguments
</li></ul></div>and double blank newlines for <a href="#paragraphs">paragraphs</a> if you are pedantic, but this later degrated into many more with <a href="#insane-macro-shortcuts">Insane macro shortcuts</a>.</div></div><div><span class="hide-hover"><a href="#p-19">ğŸ”—</a></span><div class="p" id="p-19">We would like to have only square brackets for both optional and mandatory to have even less magic characters, but that would make the language difficult to parse for computer and humans. LaTeX was right for once!</div></div><div><span class="hide-hover"><a href="#p-20">ğŸ”—</a></span><div class="p" id="p-20">This produces a very regular syntax that is easy to learn, including doing:<div><ul id="ul-5">
<li id="l-15">arbitrary nesting of elements</li><li id="l-16">adding arbitrary properties to elements</li></ul></div></div></div><div><span class="hide-hover"><a href="#p-21">ğŸ”—</a></span><div class="p" id="p-21">This sanity also makes the end tail learning curve of the endless edge cases found in Markdown and Asciidoctor disappear.</div></div><div><span class="hide-hover"><a href="#p-22">ğŸ”—</a></span><div class="p" id="p-22">The language is designed to be philosophically isomorphic to HTML to:<div><ul id="ul-6">
<li id="l-17">further reduce the learning curve</li><li id="l-18">ensure that most of HTML constructs can be reached, including arbitrary nesting</li></ul></div></div></div><div><span class="hide-hover"><a href="#p-23">ğŸ”—</a></span><div class="p" id="p-23">More precisely:<div><ul id="ul-7">
<li id="l-19">macro names map to tag names, e.g.: <code>\\a</code> to <code>&lt;a</code></li><li id="l-20"><div class="p" id="p-24">one of the arguments of macros, maps to the content of the HTML element, and the others map to attributes.</div><div class="p" id="p-25">E.g., in a link:
<pre id="c-12"><code>\a[http://example.com][Link text\]</code></pre>
the first macro argument:
<pre id="c-13"><code>http://example.com</code></pre>
maps to the <code>href</code> of <code>&lt;a</code>, and the second macro argument:
<pre id="c-14"><code>Link text</code></pre>
maps to the internal content of <code>&lt;a&gt;Link text&lt;&gt;</code>.</div></li></ul></div></div></div><div><span class="hide-hover"><a href="#more-powerful">ğŸ”—</a></span><h3 id="more-powerful"><a href="#more-powerful" title="link to this element">2.2. More powerful</a><span>  | <a href="#toc-more-powerful">â‡‘ toc</a> | <a href="#design-goals">â†‘ parent "Design goals"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-26">ğŸ”—</a></span><div class="p" id="p-26">The <a href="#saner">high sanity of Cirodown</a>, also makes creating new macro extensions extremely easy and intuitive.</div></div><div><span class="hide-hover"><a href="#p-27">ğŸ”—</a></span><div class="p" id="p-27">All built-in language features use the exact same API as new extensions, which ensures that the extension API is sane forever.</div></div><div><span class="hide-hover"><a href="#p-28">ğŸ”—</a></span><div class="p" id="p-28">Markdown is clearly missing many key features such as block attributes and <a href="#internal-cross-references">Internal cross references <code>\x</code></a>, and has no standardized extension mechanism.</div></div><div><span class="hide-hover"><a href="#p-29">ğŸ”—</a></span><div class="p" id="p-29">The "more powerful than Asciidoctor" part is only partially true, since Asciidoctor is very featureful can do basically anything through extensions.</div></div><div><span class="hide-hover"><a href="#p-30">ğŸ”—</a></span><div class="p" id="p-30">The difference is mostly that Cirodown is completely and entirely focused on making amazing scientific books, and so will have key features for that application out-of-the box, notably:<div><ul id="ul-8">
<li id="l-21">amazing header/ToC/ID features including proper error reports: never have a internal broken link or duplicate ID again</li><li id="l-22"><a href="#math">server side pre-rendered maths with KaTeX</a>: all divs and spans are ready, browser only applies CSS, no JavaScript gets executed</li><li id="l-23"><a href="#publish"><code>--publish</code></a>: we take care of website publishing for you out-of-the-box, no need to integrate into an external project like Jekyll</li></ul></div></div></div><div><span class="hide-hover"><a href="#p-31">ğŸ”—</a></span><div class="p" id="p-31">Another advantage over Asciidoctor is that the reference implementation of Cirodown is in JavaScript, and can therefore be used on browser live preview out of the box. Asciidoctor does Transpile to JS with <a href="https://github.com/opal/opal">Opal</a>, but who wants to deal with that layer of complexity?</div></div><div><span class="hide-hover"><a href="#paragraphs">ğŸ”—</a></span><h2 id="paragraphs"><a href="#paragraphs" title="link to this element">3. Paragraphs <code>\p</code></a><span>  | <a href="#toc-paragraphs">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#p-32">ğŸ”—</a></span><div class="p" id="p-32">OK, this is too common, so we opted for some <a href="#insane-macro-shortcuts">insanity</a> here: double newline is a paragraph!
<pre id="c-15"><code>Paragraph 1.

Paragraph 2.
</code></pre><div class="p" id="p-33">which renders as:</div><blockquote id="q-1"><div class="p" id="p-34">Paragraph 1.</div><div class="p" id="p-35">Paragraph 2.</div></blockquote></div></div><div><span class="hide-hover"><a href="#p-36">ğŸ”—</a></span><div class="p" id="p-36">Equivalently however, you can use an explicit <code>\p</code> macros as well, which is required for example to add properties to a paragraph, e.g.:
<pre id="c-16"><code>\p{id=paragraph-1}[Paragraph 1]
\p{id=paragraph-2}[Paragraph 2]
</code></pre><div class="p" id="p-37">which renders as:</div><blockquote id="q-2"><div class="p" id="p-38"><div class="p" id="paragraph-1">Paragraph 1</div>
<div class="p" id="paragraph-2">Paragraph 2</div></div></blockquote></div></div><div><span class="hide-hover"><a href="#p-41">ğŸ”—</a></span><div class="p" id="p-41">Paragraphs are created automatically inside <a href="#macro-argument-syntax">macro argument</a> whenever a double newline appears.</div></div><div><span class="hide-hover"><a href="#p-42">ğŸ”—</a></span><div class="p" id="p-42">Note that Cirodown paragraphs render in HTML as <code>div</code> with <code>class="p"</code> and not as <code>p</code>. This means that you can add basically anything inside them, e.g. a list:
<pre id="c-17"><code>My favorite list is:
\ul[
\li[aa]
\li[bb]
]
because it is simple.
</code></pre>
which renders as a single paragraph.</div></div><div><span class="hide-hover"><a href="#p-43">ğŸ”—</a></span><div class="p" id="p-43">One major advantage of this, is that when writing documentation, you often want to keep lists or code blocks inside a given paragraph, so that it is easy to reference the entire paragraph with an ID. Think for example of paragraphs in the C++ standard.</div></div><div><span class="hide-hover"><a href="#links">ğŸ”—</a></span><h2 id="links"><a href="#links" title="link to this element">4. Links <code>\a</code></a><span>  | <a href="#toc-links">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#p-44">ğŸ”—</a></span><div class="p" id="p-44"><a href="#insane-macro-shortcuts">Insane</a> autolink (link text is the same as the link):
<pre id="c-18"><code>The website http://example.com is cool. See also:

\q[http://example.com/2]
</code></pre><div class="p" id="p-45">which renders as:</div><blockquote id="q-3"><div class="p" id="p-46">The website <a href="http://example.com">http://example.com</a> is cool. See also:</div><blockquote id="q-4"><a href="http://example.com/2">http://example.com/2</a></blockquote></blockquote>
Exact parsing rules described at: <a href="#insane-link-parsing-rules">Section 4.1. "Insane link parsing rules"</a>.</div></div><div><span class="hide-hover"><a href="#p-47">ğŸ”—</a></span><div class="p" id="p-47">Equivalent sane version:
<pre id="c-19"><code>The website \a[http://example.com] is cool.

\q[\a[http://example.com/2]]
</code></pre><div class="p" id="p-48">which renders as:</div><blockquote id="q-5"><div class="p" id="p-49">The website <a href="http://example.com">http://example.com</a> is cool.</div><blockquote id="q-6"><a href="http://example.com/2">http://example.com/2</a></blockquote></blockquote></div></div><div><span class="hide-hover"><a href="#p-50">ğŸ”—</a></span><div class="p" id="p-50">Insane link with custom text:
<pre id="c-20"><code>The website http://example.com[example.com] is cool.
</code></pre><div class="p" id="p-51">which renders as:</div><blockquote id="q-7"><div class="p" id="p-52">The website <a href="http://example.com">example.com</a> is cool.</div></blockquote>
Equivalent sane version:
<pre id="c-21"><code>The website \a[http://example.com][example.com] is cool.
</code></pre><div class="p" id="p-53">which renders as:</div><blockquote id="q-8"><div class="p" id="p-54">The website <a href="http://example.com">example.com</a> is cool.</div></blockquote>
If the custom text is empty, an autolink is generated. This is often useful if you want your link to be followed by punctuation:
<pre id="c-22"><code>The website is really cool: http://example.com[].
</code></pre><div class="p" id="p-55">which renders as:</div><blockquote id="q-9"><div class="p" id="p-56">The website is really cool: <a href="http://example.com">http://example.com</a>.</div></blockquote>
This could also be achieved with the sane syntax of course, but this pattern saves a tiny bit of typing.</div></div><div><span class="hide-hover"><a href="#p-57">ğŸ”—</a></span><div class="p" id="p-57">Link with multiple paragraphs inside it:
<pre id="c-23"><code>\a[http://example.com][Multiple

paragraphs]
</code></pre><div class="p" id="p-58">which renders as:</div><blockquote id="q-10"><div class="p" id="p-59"><a href="http://example.com"><div class="p" id="p-60">Multiple</div><div class="p" id="p-61">paragraphs</div></a></div></blockquote></div></div><div><span class="hide-hover"><a href="#insane-link-parsing-rules">ğŸ”—</a></span><h3 id="insane-link-parsing-rules"><a href="#insane-link-parsing-rules" title="link to this element">4.1. Insane link parsing rules</a><span>  | <a href="#toc-insane-link-parsing-rules">â‡‘ toc</a> | <a href="#links">â†‘ parent "Links <code>\a</code>"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-62">ğŸ”—</a></span><div class="p" id="p-62">Insane links must be preceded by either:<div><ul id="ul-9">
<li id="l-24">the start of the document</li><li id="l-25">the start of a <a href="#positional-vs-named-arguments">positional or named argument</a> (e.g. <code>\p[http://example.com]</code> or <code>Image[xi.png]{description=http://example.com}</code>) that not marked with <code>elide_link_only</code> (which is the case for example for <code>href</code> of <code>a</code>)</li><li id="l-26">space <code> </code> char</li><li id="l-27">newline <code>\n</code> char</li></ul></div></div></div><div><span class="hide-hover"><a href="#p-63">ğŸ”—</a></span><div class="p" id="p-63">The recognized protocols are:<div><ul id="ul-10">
<li id="l-28"><code>http://</code></li><li id="l-29"><code>https://</code></li></ul></div></div></div><div><span class="hide-hover"><a href="#p-64">ğŸ”—</a></span><div class="p" id="p-64">Insane links end when either the end of the document or one of the following characters is found:<div><ul id="ul-11">
<li id="l-30">space <code> </code></li><li id="l-31">newline <code>\n</code></li><li id="l-32">open or close square bracket <code>[</code> or <code>]</code></li><li id="l-33">open or close curly braces <code>{</code> or <code>}</code></li></ul></div></div></div><div><span class="hide-hover"><a href="#p-65">ğŸ”—</a></span><div class="p" id="p-65">As a consequence, of those rules, it is impossible to have an insane link followed immediately by a period, e.g.:
<pre id="c-24"><code>Check out this website: http://example.com.
</code></pre><div class="p" id="p-66">which renders as:</div><blockquote id="q-11"><div class="p" id="p-67">Check out this website: <a href="http://example.com.">http://example.com.</a></div></blockquote>
You must instead use the sane syntax for that:
<pre id="c-25"><code>Check out this website: \a[http://example.com].
</code></pre><div class="p" id="p-68">which renders as:</div><blockquote id="q-12"><div class="p" id="p-69">Check out this website: <a href="http://example.com">http://example.com</a>.</div></blockquote></div></div><div><span class="hide-hover"><a href="#p-70">ğŸ”—</a></span><div class="p" id="p-70">If you want your link to include one of the terminating characters, e.g. <code>]</code>, all characters can be escaped with a backslash, e.g.:
<pre id="c-26"><code>Hello http://example.com/\]a\}b\\c\ d world.
</code></pre><div class="p" id="p-71">which renders as:</div><blockquote id="q-13"><div class="p" id="p-72">Hello <a href="http://example.com/]a}b\c d">http://example.com/]a}b\c d</a> world.</div></blockquote></div></div><div><span class="hide-hover"><a href="#p-73">ğŸ”—</a></span><div class="p" id="p-73">Note that the <code>http://example.com</code> inside <code>\a[http://example.com]</code> only works because we do some post-processing magic that prevents its expansion, otherwise the link would expand twice:
<pre id="c-27"><code>\p[http://example.com]

\a[http://example.com]
</code></pre><div class="p" id="p-74">which renders as:</div><blockquote id="q-14"><div class="p" id="p-75"><a href="http://example.com">http://example.com</a></div><div class="p" id="p-76"><a href="http://example.com">http://example.com</a></div></blockquote>
This magic can be observed with <a href="#help-macros"><code>--help-macros</code></a> by seeing that the <code>href</code> argument of the <code>a</code> macro has the property: 
<pre id="c-28"><code>"elide_link_only": true,
</code></pre></div></div><div><span class="hide-hover"><a href="#p-77">ğŸ”—</a></span><div class="p" id="p-77">TODO it is currently impossible to prevent autolinks from expanding, we can either go with an empty macro solution, or with a literal text solution:
<pre id="c-29"><code>\cirodown_example[[
Literal URL \empty[]http://example.com but why?
Literal URL \text[[http://example.com]] but why?
]]
</code></pre></div></div><div><span class="hide-hover"><a href="#internal-cross-references">ğŸ”—</a></span><h2 id="internal-cross-references"><a href="#internal-cross-references" title="link to this element">5. Internal cross references <code>\x</code></a><span>  | <a href="#toc-internal-cross-references">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#p-78">ğŸ”—</a></span><div class="p" id="p-78">Every macro in Cirodown can have an optional <code>id</code> and many also have a reserved <code>title</code> property.</div></div><div><span class="hide-hover"><a href="#p-79">ğŸ”—</a></span><div class="p" id="p-79">When a macro in the document has a <code>title</code> argument but no <code>id</code> argument given, get an auto-generated ID from the title: <a href="#automatic-id-from-title">Automatic ID from title</a>.</div></div><div><span class="hide-hover"><a href="#p-80">ğŸ”—</a></span><div class="p" id="p-80">For macros that do have an ID, derived from <code>title</code> or not, you can write a cross reference to it, e.g.:
<pre id="c-30"><code>See this \x[internal-cross-references] awesome section.
</code></pre><div class="p" id="p-81">which renders as:</div><blockquote id="q-15"><div class="p" id="p-82">See this <a href="#internal-cross-references">Internal cross references <code>\x</code></a> awesome section.</div></blockquote></div></div><div><span class="hide-hover"><a href="#p-83">ğŸ”—</a></span><div class="p" id="p-83">An explicit link body can be given just as for regular HTTP <a href="#links">Links <code>\a</code></a> as:
<pre id="c-31"><code>See this \x[internal-cross-references][ awesome section].
</code></pre><div class="p" id="p-84">which renders as:</div><blockquote id="q-16"><div class="p" id="p-85">See this <a href="#internal-cross-references"> awesome section</a>.</div></blockquote></div></div><div><span class="hide-hover"><a href="#x-code-child-code-argument">ğŸ”—</a></span><h3 id="x-code-child-code-argument"><a href="#x-code-child-code-argument" title="link to this element">5.1. x <code>child</code> argument</a><span>  | <a href="#toc-x-code-child-code-argument">â‡‘ toc</a> | <a href="#internal-cross-references">â†‘ parent "Internal cross references <code>\x</code>"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-86">ğŸ”—</a></span><div class="p" id="p-86">TODO implement.</div></div><div><span class="hide-hover"><a href="#p-87">ğŸ”—</a></span><div class="p" id="p-87">Setting <code>child=1</code> on a cross reference to a header as in:
<pre id="c-32"><code>\xref[my-header]{child=1}
</code></pre>
has the following effects:<div><ul id="ul-12">
<li id="l-34">add the current header to the list of extra parents of the child</li></ul></div></div></div><div><span class="hide-hover"><a href="#p-88">ğŸ”—</a></span><div class="p" id="p-88">This allows a section to have multiple parents, e.g. to include it into multiple categories. For example:
<pre id="c-33"><code>= Animals

== Mammals

=== Dog

=== Cat

== Cute animals

Cute animals:
* \xref[dog]{child=1}
* \xref[cat]
</code></pre>
would render something like:
<pre id="c-34"><code>h1 Animals

h2 Mammals

h3 Dog (parent section: Mammals)
(other parent sections: Cute animals)

h3 Cat (parent section: Mammals)

== Cute animals

* \xref[dog]
* \xref[cat]
</code></pre>
so note how "Dog" has a list of extra parents including "Cute animals", but Cat does not, due to the <code>child=1</code>.</div></div><div><span class="hide-hover"><a href="#p-89">ğŸ”—</a></span><div class="p" id="p-89">This property does not affect how the <a href="#table-of-contents"><code>\toc</code></a> is rendered. We could insert elements sections there multiple times, but it has the downside that browser Ctrl + F searches would hit the same thing multiple times on the table of contents, which might make finding things harder.
<pre id="c-35"><code>== My title{id=my-id}

Read this \x[my-id][amazing section].
</code></pre></div></div><div><span class="hide-hover"><a href="#p-90">ğŸ”—</a></span><div class="p" id="p-90">If the second argument, the <code>content</code>, is not present, it expand to the header title, e.g.:
<pre id="c-36"><code>== My title{id=my-id}

Read this \x[my-id].
</code></pre>
is the same as:
<pre id="c-37"><code>== My title{id=my-id}

Read this \x[my-id][My title].
</code></pre></div></div><div><span class="hide-hover"><a href="#cross-reference-full-argument">ğŸ”—</a></span><h3 id="cross-reference-full-argument"><a href="#cross-reference-full-argument" title="link to this element">5.2. Cross reference <code>full</code> argument</a><span>  | <a href="#toc-cross-reference-full-argument">â‡‘ toc</a> | <a href="#internal-cross-references">â†‘ parent "Internal cross references <code>\x</code>"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-91">ğŸ”—</a></span><div class="p" id="p-91">To also show the section auto-generated number as in "Section X.Y My title" we add the optional <code>{full}</code> <a href="#boolean-named-arguments">boolean named argument</a> to the cross reference, for example:
<pre id="c-38"><code>\x[cross-reference-full-argument]{full}.
</code></pre><div class="p" id="p-92">which renders as:</div><blockquote id="q-17"><div class="p" id="p-93"><a href="#cross-reference-full-argument">Section 5.2. "Cross reference <code>full</code> argument"</a>.</div></blockquote></div></div><div><span class="hide-hover"><a href="#p-94">ğŸ”—</a></span><div class="p" id="p-94"><code>{full}</code> is not needed for cross references to most macros besides <a href="#headers">headers</a>, which use <code>full</code> by default as seen by the <code>default_x_style_full</code> macro property in <a href="#help-macros"><code>--help-macros</code></a>. This is for example the case for <a href="#images">Images (<code>\Image</code> and <code>\image</code>)</a>. You can force this to be disabled with <code>{full=0}</code>:
<pre id="c-39"><code>Compare \x[fig-my-test-image]{full=0} vs \x[fig-my-test-image]{full=1}.
</code></pre><div class="p" id="p-95">which renders as:</div><blockquote id="q-18"><div class="p" id="p-96">Compare <a href="#fig-my-test-image">The title of my image</a> vs <a href="#fig-my-test-image">Figure 1. "The title of my image"</a>.</div></blockquote></div></div><div><span class="hide-hover"><a href="#internal-cross-file-references">ğŸ”—</a></span><h3 id="internal-cross-file-references"><a href="#internal-cross-file-references" title="link to this element">5.3. Internal cross file references</a><span>  | <a href="#toc-internal-cross-file-references">â‡‘ toc</a> | <a href="#internal-cross-references">â†‘ parent "Internal cross references <code>\x</code>"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-97">ğŸ”—</a></span><div class="p" id="p-97">Reference to the first header of another file:
<pre id="c-40"><code>\x[not-readme]
</code></pre><div class="p" id="p-98">which renders as:</div><blockquote id="q-19"><div class="p" id="p-99"><a href="not-readme#not-readme">Not the README</a></div></blockquote></div></div><div><span class="hide-hover"><a href="#p-100">ğŸ”—</a></span><div class="p" id="p-100">Reference to the first header of another file that is a second inclusion:
<pre id="c-41"><code>\x[included-by-not-readme]
</code></pre><div class="p" id="p-101">which renders as:</div><blockquote id="q-20"><div class="p" id="p-102"><a href="included-by-not-readme#included-by-not-readme">Included by not the README</a></div></blockquote></div></div><div><span class="hide-hover"><a href="#p-103">ğŸ”—</a></span><div class="p" id="p-103">Reference to another header of another file, with <a href="#cross-reference-full-argument">Cross reference <code>full</code> argument</a> equals <code>full</code>:
<pre id="c-42"><code>\x[h2-in-not-the-readme]{full}.
</code></pre><div class="p" id="p-104">which renders as:</div><blockquote id="q-21"><div class="p" id="p-105"><a href="not-readme#h2-in-not-the-readme">Section "h2 in not the README"</a>.</div></blockquote></div></div><div><span class="hide-hover"><a href="#p-106">ğŸ”—</a></span><div class="p" id="p-106">Reference to an image in another file:
<pre id="c-43"><code>\x[fig-not-readme-xi]{full}.
</code></pre><div class="p" id="p-107">which renders as:</div><blockquote id="q-22"><div class="p" id="p-108"><a href="not-readme#fig-not-readme-xi">Figure "Figure in not the README"</a>.</div></blockquote></div></div><div><span class="hide-hover"><a href="#p-109">ğŸ”—</a></span><div class="p" id="p-109">Reference to an image in another file:
<pre id="c-44"><code>\x[fig-figure-in-not-the-readme-without-explicit-id]{full}.
</code></pre><div class="p" id="p-110">which renders as:</div><blockquote id="q-23"><div class="p" id="p-111"><a href="not-readme#fig-figure-in-not-the-readme-without-explicit-id">Figure "Figure in not the README without explicit id"</a>.</div></blockquote></div></div><div><span class="hide-hover"><a href="#p-112">ğŸ”—</a></span><div class="p" id="p-112">Remember that the <a href="#the-toplevel-header">ID of the toplevel header</a> is automatically derived from its file name, that's why we have to use:
<pre id="c-45"><code>\x[not-readme]
</code></pre><div class="p" id="p-113">which renders as:</div><blockquote id="q-24"><div class="p" id="p-114"><a href="not-readme#not-readme">Not the README</a></div></blockquote>
instead of:
<pre id="c-46"><code>\x[not-the-readme]
</code></pre></div></div><div><span class="hide-hover"><a href="#p-115">ğŸ”—</a></span><div class="p" id="p-115">Reference to an internal header of another file: <a href="not-readme#h2-in-not-the-readme">h2 in not the README</a>. By default, That header ID gets prefixed by the ID of the top header.</div></div><div><span class="hide-hover"><a href="#p-116">ğŸ”—</a></span><div class="p" id="p-116">When using <a href="#html-single-page"><code>--html-single-page</code></a> mode, the cross file references end up pointing to an ID inside the current HTML element, e.g.:
<pre id="c-47"><code>&lt;a href="#not-readme"&gt;
</code></pre>
rather than:
<pre id="c-48"><code>&lt;a href="not-readme.html/#not-readme"&gt;
</code></pre>
This is why IDs must be unique for elements across all pages.</div></div><div><span class="hide-hover"><a href="#internal-cross-file-references-internals">ğŸ”—</a></span><h4 id="internal-cross-file-references-internals"><a href="#internal-cross-file-references-internals" title="link to this element">5.3.1. Internal cross file references internals</a><span>  | <a href="#toc-internal-cross-file-references-internals">â‡‘ toc</a> | <a href="#internal-cross-file-references">â†‘ parent "Internal cross file references"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-117">ğŸ”—</a></span><div class="p" id="p-117">When running in Node.js, Cirodown dumps the IDs of all processed files to a <code>out/ids.sqlite3</code> file, and then reads from that file when IDs are needed.</div></div><div><span class="hide-hover"><a href="#p-118">ğŸ”—</a></span><div class="p" id="p-118">When converting a directory, <code>out/ids.sqlite3</code> is placed inside the input directory. When converting individual files, <code>out/ids.sqlite3</code> is placed in the current working directory. The file is not created or used when handling input from stdin.</div></div><div><span class="hide-hover"><a href="#p-119">ğŸ”—</a></span><div class="p" id="p-119">When running in the browser, the same JavaScript API will send queries to the server instead of a local SQLite database.</div></div><div><span class="hide-hover"><a href="#p-120">ğŸ”—</a></span><div class="p" id="p-120">To inspect the the ID database to debug it, you can use:
<pre id="c-49"><code>sqlite3 out/db.sqlite3 .dump
</code></pre></div></div><div><span class="hide-hover"><a href="#automatic-id-from-title">ğŸ”—</a></span><h3 id="automatic-id-from-title"><a href="#automatic-id-from-title" title="link to this element">5.4. Automatic ID from title</a><span>  | <a href="#toc-automatic-id-from-title">â‡‘ toc</a> | <a href="#internal-cross-references">â†‘ parent "Internal cross references <code>\x</code>"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-121">ğŸ”—</a></span><div class="p" id="p-121">If a <a href="#the-toplevel-header">non-toplevel</a> macro has the <code>title</code> property is present but no explicit <code>id</code>, an ID is created automatically from the <code>title</code>, by applying the following transformations:<div><ul id="ul-13">
<li id="l-35">convert all of <code>A-Z</code> characters to lowercase</li><li id="l-36">convert consecutive sequences of all non <code>a-z0-9</code> ASCII characters to a single hyphen <code>-</code>. Note that this leaves non-ASCII character untouched.</li><li id="l-37">strip leading or trailing hyphens
</li></ul></div>Note how those rules leave non ASCII Unicode characters untouched, as capitalization and determining if something "is a letter or not" in those cases can be tricky.</div></div><div><span class="hide-hover"><a href="#p-122">ğŸ”—</a></span><div class="p" id="p-122">So for example, the following automatic IDs would be generated: <a href="#table-examples-of-automatically-generated-ids">Table 1. "Examples of automatically generated IDs"</a>.</div></div><div><span class="hide-hover"><a href="#table-examples-of-automatically-generated-ids">ğŸ”—</a></span><div class="table-container" id="table-examples-of-automatically-generated-ids">
<div class="table-caption-container">
<span class="table-caption"><a href="#table-examples-of-automatically-generated-ids"><span class="caption-prefix">Table 1</span></a>. Examples of automatically generated IDs</span></div>
<table>
<tr id="tr-1">
<th id="th-1">title</th><th id="th-2">id</th><th id="th-3">comments</th></tr><tr id="tr-2">
<td id="td-1">My favorite title</td><td id="td-2">my-favorite-title</td><td id="td-3"></td></tr><tr id="tr-3">
<td id="td-4">Ciro's markdown is awesome</td><td id="td-5">ciro-s-markdown-is-awesome</td><td id="td-6"></td></tr><tr id="tr-4">
<td id="td-7">The Ã‰cole Polytechnique</td><td id="td-8">the-Ã‰cole-polytechnique</td><td id="td-9">We leave the non ASCII uppercase <a href="https://en.wikipedia.org/wiki/Acute_accent">acute accented</a> <code>e</code>, <code>Ã‰</code>, untouched by default</td></tr></table>
</div>
</div><div><span class="hide-hover"><a href="#p-123">ğŸ”—</a></span><div class="p" id="p-123">For <a href="#the-toplevel-header">the toplevel header</a>, its ID is derived from the basename of the Cirodown file without extension instead of from the <code>title</code> argument.</div></div><div><span class="hide-hover"><a href="#headers">ğŸ”—</a></span><h2 id="headers"><a href="#headers" title="link to this element">6. Headers <code>\h</code></a><span>  | <a href="#toc-headers">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#p-124">ğŸ”—</a></span><div class="p" id="p-124"><a href="#insane-macro-shortcuts">Insane</a> with <code>= </code> (equal sign space):
<pre id="c-50"><code>= My h1

== My h2

=== My h3
</code></pre>
Insane headers end at the first newline found. They cannot therefore contain raw newline tokens.</div></div><div><span class="hide-hover"><a href="#p-125">ğŸ”—</a></span><div class="p" id="p-125">Equivalent sane:
<pre id="c-51"><code>\h[1][My h1]

\h[2][My h2]

\h[3][My h3]
</code></pre></div></div><div><span class="hide-hover"><a href="#p-126">ğŸ”—</a></span><div class="p" id="p-126">Custom ID for <a href="#internal-cross-references">Internal cross references <code>\x</code></a> on insane headers:
<pre id="c-52"><code>= My h1
{id=h1}

== My h2
{id=h2}

=== My h3
{id=h3}
</code></pre></div></div><div><span class="hide-hover"><a href="#p-127">ğŸ”—</a></span><div class="p" id="p-127">Sane equivalent:
<pre id="c-53"><code>\h[1][My h1]{id=h1}

\h[2][My h2]{id=h2}

\h[3][My h3]{id=h3}
</code></pre></div></div><div><span class="hide-hover"><a href="#unlimited-header-levels">ğŸ”—</a></span><h3 id="unlimited-header-levels"><a href="#unlimited-header-levels" title="link to this element">6.1. Unlimited header levels</a><span>  | <a href="#toc-unlimited-header-levels">â‡‘ toc</a> | <a href="#headers">â†‘ parent "Headers <code>\h</code>"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-128">ğŸ”—</a></span><div class="p" id="p-128">There is no limit to how many levels we can have, for either sane or insane headers!</div></div><div><span class="hide-hover"><a href="#p-129">ğŸ”—</a></span><div class="p" id="p-129">HTML is randomly limited to <code>h6</code>, so Cirodown just renders higher levels as an <code>h6</code> with a <code>data-level</code> attribute to indicate the actual level for possible CSS styling:
<pre id="c-54"><code>&lt;h6 data-level="7"&gt;My title&lt;/h6&gt;
</code></pre></div></div><div><span class="hide-hover"><a href="#p-130">ğŸ”—</a></span><div class="p" id="p-130">The recommended style is to use insane headers up to <code>h6</code>, and then move to sane one for higher levels though, otherwise it becomes very hard to count the <code>=</code> signs.</div></div><div><span class="hide-hover"><a href="#p-131">ğŸ”—</a></span><div class="p" id="p-131">To avoid this, we sondiered making the insane syntax be instead:
<pre id="c-55"><code>= 1 My h1
= 2 My h2
= 3 My h3
</code></pre>
but it just didn't feel as good, and is a bit harder to type than just smashing <code>=</code> n times for lower levels, which is the most common use case. So we just copied markdown.</div></div><div><span class="hide-hover"><a href="#my-h4">ğŸ”—</a></span><h4 id="my-h4"><a href="#my-h4" title="link to this element">6.1.1. My h4</a><span>  | <a href="#toc-my-h4">â‡‘ toc</a> | <a href="#unlimited-header-levels">â†‘ parent "Unlimited header levels"</a></span></h4>
</div><div><span class="hide-hover"><a href="#my-h5">ğŸ”—</a></span><h5 id="my-h5"><a href="#my-h5" title="link to this element">6.1.1.1. My h5</a><span>  | <a href="#toc-my-h5">â‡‘ toc</a> | <a href="#my-h4">â†‘ parent "My h4"</a></span></h5>
</div><div><span class="hide-hover"><a href="#my-h6">ğŸ”—</a></span><h6 id="my-h6"><a href="#my-h6" title="link to this element">6.1.1.1.1. My h6</a><span>  | <a href="#toc-my-h6">â‡‘ toc</a> | <a href="#my-h5">â†‘ parent "My h5"</a></span></h6>
</div><div><span class="hide-hover"><a href="#my-h7">ğŸ”—</a></span><h6 data-level="7" id="my-h7"><a href="#my-h7" title="link to this element">6.1.1.1.1.1. My h7</a><span>  | <a href="#toc-my-h7">â‡‘ toc</a> | <a href="#my-h6">â†‘ parent "My h6"</a></span></h6>
</div><div><span class="hide-hover"><a href="#my-h8">ğŸ”—</a></span><h6 data-level="8" id="my-h8"><a href="#my-h8" title="link to this element">6.1.1.1.1.1.1. My h8</a><span>  | <a href="#toc-my-h8">â‡‘ toc</a> | <a href="#my-h7">â†‘ parent "My h7"</a></span></h6>
</div><div><span class="hide-hover"><a href="#my-h9">ğŸ”—</a></span><h6 data-level="9" id="my-h9"><a href="#my-h9" title="link to this element">6.1.1.1.1.1.1.1. My h9</a><span>  | <a href="#toc-my-h9">â‡‘ toc</a> | <a href="#my-h8">â†‘ parent "My h8"</a></span></h6>
</div><div><span class="hide-hover"><a href="#my-h10">ğŸ”—</a></span><h6 data-level="10" id="my-h10"><a href="#my-h10" title="link to this element">6.1.1.1.1.1.1.1.1. My h10</a><span>  | <a href="#toc-my-h10">â‡‘ toc</a> | <a href="#my-h9">â†‘ parent "My h9"</a></span></h6>
</div><div><span class="hide-hover"><a href="#my-h11">ğŸ”—</a></span><h6 data-level="11" id="my-h11"><a href="#my-h11" title="link to this element">6.1.1.1.1.1.1.1.1.1. My h11</a><span>  | <a href="#toc-my-h11">â‡‘ toc</a> | <a href="#my-h10">â†‘ parent "My h10"</a></span></h6>
</div><div><span class="hide-hover"><a href="#my-h12">ğŸ”—</a></span><h6 data-level="12" id="my-h12"><a href="#my-h12" title="link to this element">6.1.1.1.1.1.1.1.1.1.1. My h12</a><span>  | <a href="#toc-my-h12">â‡‘ toc</a> | <a href="#my-h11">â†‘ parent "My h11"</a></span></h6>
</div><div><span class="hide-hover"><a href="#my-h13">ğŸ”—</a></span><h6 data-level="13" id="my-h13"><a href="#my-h13" title="link to this element">6.1.1.1.1.1.1.1.1.1.1.1. My h13</a><span>  | <a href="#toc-my-h13">â‡‘ toc</a> | <a href="#my-h12">â†‘ parent "My h12"</a></span></h6>
</div><div><span class="hide-hover"><a href="#table-of-contents">ğŸ”—</a></span><h3 id="table-of-contents"><a href="#table-of-contents" title="link to this element">6.2. Table of contents <code>\toc</code></a><span>  | <a href="#toc-table-of-contents">â‡‘ toc</a> | <a href="#headers">â†‘ parent "Headers <code>\h</code>"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-132">ğŸ”—</a></span><div class="p" id="p-132">Only one ToC shows per document.</div></div><div><span class="hide-hover"><a href="#p-133">ğŸ”—</a></span><div class="p" id="p-133">Any ToC besides the first one is ignored. TODO make it into an error instead?</div></div><div><span class="hide-hover"><a href="#p-134">ğŸ”—</a></span><div class="p" id="p-134">The ToC ignores <code>\h[1]</code> by default, as we encourage that header level to appear only once and represent the main title under which the entire document goes.</div></div><div><span class="hide-hover"><a href="#p-135">ğŸ”—</a></span><div class="p" id="p-135"><code>\toc</code> from <a href="#includes">includes</a> are ignored.</div></div><div><span class="hide-hover"><a href="#id-scope">ğŸ”—</a></span><h4 id="id-scope"><a href="#id-scope" title="link to this element">6.2.1. id_scope</a><span>  | <a href="#toc-id-scope">â‡‘ toc</a> | <a href="#table-of-contents">â†‘ parent "Table of contents <code>\toc</code>"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-136">ğŸ”—</a></span><div class="p" id="p-136">TODO implement.</div></div><div><span class="hide-hover"><a href="#p-137">ğŸ”—</a></span><div class="p" id="p-137">If this header attribute is <code>true</code>, then the ID of all children are prefixed with the ID of this header + a slash <code>/</code>.</div></div><div><span class="hide-hover"><a href="#p-138">ğŸ”—</a></span><div class="p" id="p-138">This property is true by default for cross file references, although it can be turned off explicitly with <code>id-scope=false</code>.</div></div><div><span class="hide-hover"><a href="#p-139">ğŸ”—</a></span><div class="p" id="p-139">References withing a single scope do not need the parent scope prefix.</div></div><div><span class="hide-hover"><a href="#header-explicit-levels-vs-nesting-design-choice">ğŸ”—</a></span><h3 id="header-explicit-levels-vs-nesting-design-choice"><a href="#header-explicit-levels-vs-nesting-design-choice" title="link to this element">6.3. Header explicit levels vs nesting design choice</a><span>  | <a href="#toc-header-explicit-levels-vs-nesting-design-choice">â‡‘ toc</a> | <a href="#headers">â†‘ parent "Headers <code>\h</code>"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-140">ğŸ”—</a></span><div class="p" id="p-140">Arguably, the language would be even saner if we did:
<pre id="c-56"><code>\h[My h1][

Paragraph.

\h[My h2][]
]
</code></pre>
rather than having explicit levels.</div></div><div><span class="hide-hover"><a href="#p-141">ğŸ”—</a></span><div class="p" id="p-141">But we chose not to do it like most markups available because it leads to too many nesting levels, and hard to determine where you are without tooling.</div></div><div><span class="hide-hover"><a href="#includes">ğŸ”—</a></span><h3 id="includes"><a href="#includes" title="link to this element">6.4. Includes <code>\include</code></a><span>  | <a href="#toc-includes">â‡‘ toc</a> | <a href="#headers">â†‘ parent "Headers <code>\h</code>"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-142">ğŸ”—</a></span><div class="p" id="p-142">The <code>\include</code> macro allows including an external Cirodown headers under the current header.</div></div><div><span class="hide-hover"><a href="#p-143">ğŸ”—</a></span><div class="p" id="p-143">It exists to allow optional single page HTML output while still retaining the ability to:<div><ul id="ul-14">
<li id="l-38">split up large input files into multiple files to make renders faster during document development</li><li id="l-39">suggest an optional custom output split with one HTML output per Cirodown input, in order to avoid extremely large HTML pages which could be slow to load</li></ul></div></div></div><div><span class="hide-hover"><a href="#p-144">ğŸ”—</a></span><div class="p" id="p-144"><code>\include</code> takes one mandatory argument, which is the relative path without extension to the <code>.ciro</code> file that you want to include.</div></div><div><span class="hide-hover"><a href="#p-145">ğŸ”—</a></span><div class="p" id="p-145">Things would have been a bit more clean if the argument would take the ID of the header you want to include rather than the filename, which is analogous to how <a href="#internal-cross-references"><code>\x</code></a> works, but that would mean that a single page build would require an initial parse to determine IDs, so we are just going with the easier option of pointing out the file name directly.</div></div><div><span class="hide-hover"><a href="#p-146">ğŸ”—</a></span><div class="p" id="p-146">Headers of the included document are automatically shifted to match the level of the child of the level where they are being included.</div></div><div><span class="hide-hover"><a href="#p-147">ğŸ”—</a></span><div class="p" id="p-147">If <a href="#html-single-page"><code>--html-single-page</code></a> is given, the external document is rendered embedded into the current document directly, essentially as if the source had been copy pasted (except for small corrections such as the header offsets).</div></div><div><span class="hide-hover"><a href="#p-148">ğŸ”—</a></span><div class="p" id="p-148">Otherwise, the following effects happen:<div><ul id="ul-15">
<li id="l-40"><div class="p" id="p-149">The headers of the included tree appear in the <a href="#table-of-contents">table of contents</a> of the document as links to the corresponding external files.</div><div class="p" id="p-150">This is implemented simply by reading a previously generated database file much like <a href="#internal-cross-file-references-internals">Internal cross file references internals</a>, which avoids the slowdown of parsing all included files every time.</div><div class="p" id="p-151">As a result, you have to do an initial parse of all files in the project to extract their headers however, just as you would need to do when linking to those headers.</div></li><li id="l-41">the include itself renders as a link to the included document</li><li id="l-42"><a href="#html-single-page"><code>--html-single-page</code></a></li></ul></div></div></div><div><span class="hide-hover"><a href="#p-152">ğŸ”—</a></span><div class="p" id="p-152">Here is an example of inclusion of the files <code>not-readme.ciro</code> and <code>not-readme-2.ciro</code>.</div></div><div><span class="hide-hover"><a href="#not-readme">ğŸ”—</a></span><h4 id="not-readme"><a href="#not-readme" title="link to this element">6.4.1. Not the README</a><span>  | <a href="#toc-not-readme">â‡‘ toc</a> | <a href="#includes">â†‘ parent "Includes <code>\include</code>"</a> | <a href="includes-not-readme#includes-not-readme-h2">â†‘ parent "Includes not README h2"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-153">ğŸ”—</a></span><div class="p" id="p-153"><a href="not-readme#not-readme">This section is present in another page, follow this link to view it.</a></div></div><div><span class="hide-hover"><a href="#not-readme-2">ğŸ”—</a></span><h4 id="not-readme-2"><a href="#not-readme-2" title="link to this element">6.4.2. Not the README 2</a><span>  | <a href="#toc-not-readme-2">â‡‘ toc</a> | <a href="#includes">â†‘ parent "Includes <code>\include</code>"</a> | <a href="includes-not-readme#includes-not-readme-h2">â†‘ parent "Includes not README h2"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-154">ğŸ”—</a></span><div class="p" id="p-154"><a href="not-readme-2#not-readme-2">This section is present in another page, follow this link to view it.</a></div></div><div><span class="hide-hover"><a href="#skipping-header-levels">ğŸ”—</a></span><h3 id="skipping-header-levels"><a href="#skipping-header-levels" title="link to this element">6.5. Skipping header levels</a><span>  | <a href="#toc-skipping-header-levels">â‡‘ toc</a> | <a href="#headers">â†‘ parent "Headers <code>\h</code>"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-155">ğŸ”—</a></span><div class="p" id="p-155">The very first header of a document can be of any level, although we highly recommend your document to start with a <code>\h[1]</code>, and to contain exactly just one <code>\h[1]</code>, as this has implications such as:<div><ul id="ul-16">
<li id="l-43"><code>\h[1]</code> is used for the document title: <a href="#html-document-title">HTML document title</a></li><li id="l-44"><code>\h[1]</code> does not show on the <a href="#table-of-contents">Table of contents <code>\toc</code></a></li></ul></div></div></div><div><span class="hide-hover"><a href="#p-156">ğŸ”—</a></span><div class="p" id="p-156">After the initial header however, you must not skip a header level, e.g. the following would give an error because it skips level 3:
<pre id="c-57"><code>= my 1

== my 1

==== my 4
</code></pre></div></div><div><span class="hide-hover"><a href="#the-toplevel-header">ğŸ”—</a></span><h3 id="the-toplevel-header"><a href="#the-toplevel-header" title="link to this element">6.6. The toplevel header</a><span>  | <a href="#toc-the-toplevel-header">â‡‘ toc</a> | <a href="#headers">â†‘ parent "Headers <code>\h</code>"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-157">ğŸ”—</a></span><div class="p" id="p-157">If the document has only a single header of the highest level, e.g. like the following has only a single <code>h2</code>:
<pre id="c-58"><code>== My 2

=== My 3 1

=== My 3 2
</code></pre>
then this has some magical effects.</div></div><div><span class="hide-hover"><a href="#the-toplevel-header-ids-don-t-show">ğŸ”—</a></span><h4 id="the-toplevel-header-ids-don-t-show"><a href="#the-toplevel-header-ids-don-t-show" title="link to this element">6.6.1. The toplevel header IDs don't show</a><span>  | <a href="#toc-the-toplevel-header-ids-don-t-show">â‡‘ toc</a> | <a href="#the-toplevel-header">â†‘ parent "The toplevel header"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-158">ğŸ”—</a></span><div class="p" id="p-158">Header IDs won't show for the toplevel level. For example, the headers would render like:
<pre id="c-59"><code>My 2

1. My 3 1

2. My 3 2
</code></pre>
rather than:
<pre id="c-60"><code>1. My 2

1.2. My 3 1

1.2. My 3 2
</code></pre>
This is because in this case, we guess that the <code>h2</code> is the toplevel.</div></div><div><span class="hide-hover"><a href="#the-id-of-the-first-header-is-derived-from-the-filename">ğŸ”—</a></span><h4 id="the-id-of-the-first-header-is-derived-from-the-filename"><a href="#the-id-of-the-first-header-is-derived-from-the-filename" title="link to this element">6.6.2. The ID of the first header is derived from the filename</a><span>  | <a href="#toc-the-id-of-the-first-header-is-derived-from-the-filename">â‡‘ toc</a> | <a href="#the-toplevel-header">â†‘ parent "The toplevel header"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-159">ğŸ”—</a></span><div class="p" id="p-159">TODO: we kind of wanted this to be the ID of the toplevel header instead of the first header, but this would require an extra postprocessing pass (to determine if the first header is toplevel or not), which might affect performance, so we are not doing it right now.</div></div><div><span class="hide-hover"><a href="#p-160">ğŸ”—</a></span><div class="p" id="p-160">When the Cirodown input comes from a file (and not e.g. stdin), the default ID of the first header in the document is derived from the basename of the Cirodown input source file rather than from its title.</div></div><div><span class="hide-hover"><a href="#p-161">ğŸ”—</a></span><div class="p" id="p-161">This is specially relevant when <a href="#includes">including</a> other files.</div></div><div><span class="hide-hover"><a href="#p-162">ğŸ”—</a></span><div class="p" id="p-162">For example, in file named <code>my-file.ciro</code> which contains:
<pre id="c-61"><code>= Awesome cirodown file
]]
</code></pre>
the ID of the header is <code>my-file</code> rather than <code>awesome-cirodown-file</code>. See also: <a href="#automatic-id-from-title">Automatic ID from title</a>.</div></div><div><span class="hide-hover"><a href="#p-163">ğŸ”—</a></span><div class="p" id="p-163">If the file is an <a href="#index-files">index file</a>, then the basename of the parent directory is used instead, e.g. the toplevel ID of a file:
<pre id="c-62"><code>my-subdir/README.ciro</code></pre>
would be:
<pre id="c-63"><code>#my-subdir</code></pre>
rather than:
<pre id="c-64"><code>#README.ciro</code></pre></div></div><div><span class="hide-hover"><a href="#lists">ğŸ”—</a></span><h2 id="lists"><a href="#lists" title="link to this element">7. Lists <code>\l</code></a><span>  | <a href="#toc-lists">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#p-164">ğŸ”—</a></span><div class="p" id="p-164"><a href="#insane-macro-shortcuts">Insane</a> with <code>* </code> (asterisk space):
<pre id="c-65"><code>* a
* b
* c
</code></pre><div class="p" id="p-165">which renders as:</div><blockquote id="q-25"><div><ul id="ul-17">
<li id="l-45">a</li><li id="l-46">b</li><li id="l-47">c</li></ul></div></blockquote></div></div><div><span class="hide-hover"><a href="#p-166">ğŸ”—</a></span><div class="p" id="p-166">Equivalent saner with <a href="#auto-parent">implicit <code>ul</code> container</a>:
<pre id="c-66"><code>\l[a]
\l[b]
\l[c]
</code></pre><div class="p" id="p-167">which renders as:</div><blockquote id="q-26"><div><ul id="ul-18">
<li id="l-48">a</li><li id="l-49">b</li><li id="l-50">c</li></ul></div></blockquote></div></div><div><span class="hide-hover"><a href="#p-168">ğŸ”—</a></span><div class="p" id="p-168">Equivalent fully sane with explicit container:
<pre id="c-67"><code>\ul[
\l[a]
\l[b]
\l[c]
]
</code></pre><div class="p" id="p-169">which renders as:</div><blockquote id="q-27"><div><ul id="ul-19">
<li id="l-51">a</li><li id="l-52">b</li><li id="l-53">c</li></ul></div></blockquote></div></div><div><span class="hide-hover"><a href="#p-170">ğŸ”—</a></span><div class="p" id="p-170">The explicit container is required if you want to pass extra arguments properties to the <code>ul</code> list macro, e.g. a title and an ID: <a href="#list-my-id">Ul 1</a>:
<pre id="c-68"><code>\ul
{id=list-my-id}
[
\l[a]
\l[b]
\l[c]
]
</code></pre><div class="p" id="p-171">which renders as:</div><blockquote id="q-28"><div><ul id="list-my-id">
<li id="l-54">a</li><li id="l-55">b</li><li id="l-56">c</li></ul></div></blockquote>
This is the case because without the explicit container in an implicit <code>ul</code> list, the arguments would stick to the last list item instead of the list itself.</div></div><div><span class="hide-hover"><a href="#p-172">ğŸ”—</a></span><div class="p" id="p-172">It is also required if you want ordered lists:
<pre id="c-69"><code>\ol[
\l[first]
\l[second]
\l[third]
]
</code></pre><div class="p" id="p-173">which renders as:</div><blockquote id="q-29"><ol id="ol-1">
<li id="l-57">first</li><li id="l-58">second</li><li id="l-59">third</li></ol></blockquote></div></div><div><span class="hide-hover"><a href="#p-174">ğŸ”—</a></span><div class="p" id="p-174">Insane nested list with two space indentation:
<pre id="c-70"><code>* a
  * a1
  * a2
  * a2
* b
* c
</code></pre><div class="p" id="p-175">which renders as:</div><blockquote id="q-30"><div><ul id="ul-21">
<li id="l-60">a<div><ul id="ul-22">
<li id="l-61">a1</li><li id="l-62">a2</li><li id="l-63">a2</li></ul></div></li><li id="l-64">b</li><li id="l-65">c</li></ul></div></blockquote>
The indentation must always be exactly equal to two spaces.</div></div><div><span class="hide-hover"><a href="#p-176">ğŸ”—</a></span><div class="p" id="p-176">Equivalent saner nested lists with implicit containers:
<pre id="c-71"><code>\l[
a
\l[a1]
\l[a2]
\l[a2]
]
\l[b]
\l[c]
</code></pre><div class="p" id="p-177">which renders as:</div><blockquote id="q-31"><div><ul id="ul-23">
<li id="l-66">a
<div><ul id="ul-24">
<li id="l-67">a1</li><li id="l-68">a2</li><li id="l-69">a2</li></ul></div></li><li id="l-70">b</li><li id="l-71">c</li></ul></div></blockquote></div></div><div><span class="hide-hover"><a href="#p-178">ğŸ”—</a></span><div class="p" id="p-178">Insane list item with a paragraph inside of it:
<pre id="c-72"><code>* a
* I have

  Multiple paragraphs.

  * And
  * also
  * a
  * list
* c
</code></pre><div class="p" id="p-179">which renders as:</div><blockquote id="q-32"><div><ul id="ul-25">
<li id="l-72">a</li><li id="l-73"><div class="p" id="p-180">I have</div><div class="p" id="p-181">Multiple paragraphs.</div><div><ul id="ul-26">
<li id="l-74">And</li><li id="l-75">also</li><li id="l-76">a</li><li id="l-77">list</li></ul></div></li><li id="l-78">c</li></ul></div></blockquote></div></div><div><span class="hide-hover"><a href="#p-182">ğŸ”—</a></span><div class="p" id="p-182">Equivalent sane version:
<pre id="c-73"><code>\l[a]
\l[
I have

Multiple paragraphs.

\l[And]
\l[also]
\l[a]
\l[list]
]
\l[c]
</code></pre><div class="p" id="p-183">which renders as:</div><blockquote id="q-33"><div><ul id="ul-27">
<li id="l-79">a</li><li id="l-80"><div class="p" id="p-184">I have</div><div class="p" id="p-185">Multiple paragraphs.</div><div><ul id="ul-28">
<li id="l-81">And</li><li id="l-82">also</li><li id="l-83">a</li><li id="l-84">list</li></ul></div></li><li id="l-85">c</li></ul></div></blockquote></div></div><div><span class="hide-hover"><a href="#p-186">ğŸ”—</a></span><div class="p" id="p-186">Insane lists may be escaped with a backslash as usual:
<pre id="c-74"><code>\* paragraph starting with an asterisk.
</code></pre><div class="p" id="p-187">which renders as:</div><blockquote id="q-34"><div class="p" id="p-188">* paragraph starting with an asterisk.</div></blockquote></div></div><div><span class="hide-hover"><a href="#p-189">ğŸ”—</a></span><div class="p" id="p-189">And now a list outside of <a href="#cirodown-example"><code>cirodown_example</code></a> to test how it looks directly under <a href="#toplevel">The <code>\toplevel</code> implicit macro</a>:</div></div><div><span class="hide-hover"><a href="#ul-29">ğŸ”—</a></span><div><ul id="ul-29">
<li id="l-86">a</li><li id="l-87">b</li><li id="l-88">c</li></ul></div></div><div><span class="hide-hover"><a href="#images">ğŸ”—</a></span><h2 id="images"><a href="#images" title="link to this element">8. Images (<code>\Image</code> and <code>\image</code>)</a><span>  | <a href="#toc-images">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#p-190">ğŸ”—</a></span><div class="p" id="p-190">A block image with <a href="#macro-capitalization-for-block-vs-inline">capital</a> 'i' <code>Image</code> showcasing most of the image properties <a href="#fig-my-test-image">Figure 1. "The title of my image"</a>.
<pre id="c-75"><code>Have a look at this amazing image: \x[fig-my-test-image].

\Image[image.jpg]
{title=The title of my image}
{id=fig-my-test-image}
{width=600}
{height=200}
{source=https://en.wikipedia.org/wiki/File:Tianasquare.jpg}
{description=The description of my image.}
</code></pre><div class="p" id="p-191">which renders as:</div><blockquote id="q-35"><div class="p" id="p-192">Have a look at this amazing image: <a href="#fig-my-test-image">Figure 1. "The title of my image"</a>.</div><figure id="fig-my-test-image">
<a href="image.jpg"><img src="image.jpg" loading="lazy" height="200" width="600"></a>
<figcaption><a href="#fig-my-test-image"><span class="caption-prefix">Figure 1</span></a>. The title of my image. The description of my image. <a  href="https://en.wikipedia.org/wiki/File:Tianasquare.jpg">Source</a>.</figcaption>
</figure>
</blockquote>
This exemplifies the following parameters:<div><ul id="ul-30">
<li id="l-89"><code>description</code>: similar to <code>title</code>, but allow for further explanations without them appearing in <a href="#internal-cross-references">cross references</a> to the image</li><li id="l-90"><code>source</code>: a standardized way to credit an image by linking to a URL that contains further image metadata
</li></ul></div>For further discussion on the effects of ID see: <a href="#image-id">full</a>.</div></div><div><span class="hide-hover"><a href="#p-193">ğŸ”—</a></span><div class="p" id="p-193">And this is how you make an inline image inline one with lower case <code>i</code>:
<pre id="c-76"><code>My inline \image[image.jpg][test image] is awesome.
</code></pre><div class="p" id="p-194">which renders as:</div><blockquote id="q-36"><div class="p" id="p-195">My inline <img src="image.jpg" height="315" alt="test image"> is awesome.</div></blockquote>
Inline images can't have captions.</div></div><div><span class="hide-hover"><a href="#p-196">ğŸ”—</a></span><div class="p" id="p-196">The <code>description</code> can have multiple paragraphs just like any other element, but we don't recommend this style because it makes it hard for readers to see what is part of the image caption and what is part of the next paragraph.
<pre id="c-77"><code>\Image[image.jpg]
{id=fig-my-test-image-description-paragraphs}
{title=The title of my image}
{source=https://en.wikipedia.org/wiki/File:Tianasquare.jpg}
{description=Description paragraph 1.

Description paragraph 2.
}

Paragraph after.
</code></pre><div class="p" id="p-197">which renders as:</div><blockquote id="q-37"><figure id="fig-my-test-image-description-paragraphs">
<a href="image.jpg"><img src="image.jpg" loading="lazy" height="315"></a>
<figcaption><a href="#fig-my-test-image-description-paragraphs"><span class="caption-prefix">Figure 2</span></a>. The title of my image. <div class="p" id="p-198">Description paragraph 1.</div><div class="p" id="p-199">Description paragraph 2.
</div> <a  href="https://en.wikipedia.org/wiki/File:Tianasquare.jpg">Source</a>.</figcaption>
</figure>
<div class="p" id="p-200">Paragraph after.</div></blockquote>
Maybe we could improve this with some CSS styling, but generally when you want multiple paragraphs inside the image, you might instead be better off making an <a href="#internal-cross-file-references">internal cross reference</a> to the the image and adding your extended explanation outside.</div></div><div><span class="hide-hover"><a href="#p-201">ğŸ”—</a></span><div class="p" id="p-201">And now an image outside of <a href="#cirodown-example"><code>cirodown_example</code></a> to test how it looks directly under <a href="#toplevel">The <code>\toplevel</code> implicit macro</a>:</div></div><div><span class="hide-hover"><a href="#fig-my-test-image-toplevel">ğŸ”—</a></span><figure id="fig-my-test-image-toplevel">
<a href="image.jpg"><img src="image.jpg" loading="lazy" height="315"></a>
<figcaption><a href="#fig-my-test-image-toplevel"><span class="caption-prefix">Figure 3</span></a></figcaption>
</figure>
</div><div><span class="hide-hover"><a href="#image-height">ğŸ”—</a></span><h3 id="image-height"><a href="#image-height" title="link to this element">8.1. Image height</a><span>  | <a href="#toc-image-height">â‡‘ toc</a> | <a href="#images">â†‘ parent "Images (<code>\Image</code> and <code>\image</code>)"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-202">ğŸ”—</a></span><div class="p" id="p-202">By default, we fix image heights to <code>height=315</code>, and let the <code>width</code> be calculated proportionally once the image loads. We therefore ignore the actual image size. This is done to:<div><ul id="ul-31">
<li id="l-91">prevent reflows as the page loads images and can determine their actual sizes, especially is the user opens the page at a given ID in the middle of the page</li><li id="l-92">create a more uniform media experience by default, unless a custom image size is actually needed e.g. if the image needs to be larger</li></ul></div></div></div><div><span class="hide-hover"><a href="#image-id">ğŸ”—</a></span><h3 id="image-id"><a href="#image-id" title="link to this element">8.2. Image IDs and captions</a><span>  | <a href="#toc-image-id">â‡‘ toc</a> | <a href="#images">â†‘ parent "Images (<code>\Image</code> and <code>\image</code>)"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-203">ğŸ”—</a></span><div class="p" id="p-203">Here is an image without a description but with an ID so we can link to it: <a href="#fig-my-test-image-2">Figure 4</a>.
<pre id="c-78"><code>Have a look at this amazing image: \x[fig-my-test-image-2].

\Image[image.jpg]
{id=fig-my-test-image-2}
</code></pre><div class="p" id="p-204">which renders as:</div><blockquote id="q-38"><div class="p" id="p-205">Have a look at this amazing image: <a href="#fig-my-test-image-2">Figure 4</a>.</div><figure id="fig-my-test-image-2">
<a href="image.jpg"><img src="image.jpg" loading="lazy" height="315"></a>
<figcaption><a href="#fig-my-test-image-2"><span class="caption-prefix">Figure 4</span></a></figcaption>
</figure>
</blockquote>
This works because <a href="#cross-reference-full-argument"><code>full</code> is the default cross referene style for <code>Image</code></a>, otherwise the link text would be empty since there is no <code>title</code>, and cirodown would raise an error.</div></div><div><span class="hide-hover"><a href="#p-206">ğŸ”—</a></span><div class="p" id="p-206">If the image has neither ID nor title, then it does not get a caption at all, and it is not possible to link to it with an <a href="#internal-cross-references">internal cross reference</a>, e.g.:
<pre id="c-79"><code>\Image[image.jpg]
</code></pre><div class="p" id="p-207">which renders as:</div><blockquote id="q-39"><figure id="fig-5">
<a href="image.jpg"><img src="image.jpg" loading="lazy" height="315" alt="image.jpg"></a>
</figure>
</blockquote>
The image does however get an automatically generated ID based on its image number, and it is possible for readers to link to that ID on the rendered version, e.g. as:
<pre id="c-80"><code>#fig-123
</code></pre>
This link is of course not stable across document revisions however, since if an image is added before that one, the link will break. This kind of image is discouraged, because in paged output formats like PDF, it could float away from the text that refers to the image.</div></div><div><span class="hide-hover"><a href="#p-208">ğŸ”—</a></span><div class="p" id="p-208">We can also see that such an image does not increment the Figure count:
<pre id="c-81"><code>\Image[image.jpg]{id=fig-my-test-image-count-before}
\Image[image.jpg]
\Image[image.jpg]{id=fig-my-test-image-count-after}
</code></pre><div class="p" id="p-209">which renders as:</div><blockquote id="q-40"><div class="p" id="p-210"><figure id="fig-my-test-image-count-before">
<a href="image.jpg"><img src="image.jpg" loading="lazy" height="315"></a>
<figcaption><a href="#fig-my-test-image-count-before"><span class="caption-prefix">Figure 5</span></a></figcaption>
</figure>

<figure id="fig-7">
<a href="image.jpg"><img src="image.jpg" loading="lazy" height="315" alt="image.jpg"></a>
</figure>

<figure id="fig-my-test-image-count-after">
<a href="image.jpg"><img src="image.jpg" loading="lazy" height="315"></a>
<figcaption><a href="#fig-my-test-image-count-after"><span class="caption-prefix">Figure 6</span></a></figcaption>
</figure>
</div></blockquote></div></div><div><span class="hide-hover"><a href="#p-211">ğŸ”—</a></span><div class="p" id="p-211">If the image has any visible metadata such as <code>source</code> or <code>description</code> however, then the caption does show and the Figure count gets incremented:
<pre id="c-82"><code>\Image[image.jpg]{source=https://en.wikipedia.org/wiki/File:Tianasquare.jpg}
\Image[image.jpg]{description=This is the description of my image.}
</code></pre><div class="p" id="p-212">which renders as:</div><blockquote id="q-41"><div class="p" id="p-213"><figure id="fig-9">
<a href="image.jpg"><img src="image.jpg" loading="lazy" height="315"></a>
<figcaption><a href="#fig-9"><span class="caption-prefix">Figure 7</span></a>. <a  href="https://en.wikipedia.org/wiki/File:Tianasquare.jpg">Source</a>.</figcaption>
</figure>

<figure id="fig-10">
<a href="image.jpg"><img src="image.jpg" loading="lazy" height="315"></a>
<figcaption><a href="#fig-10"><span class="caption-prefix">Figure 8</span></a>. This is the description of my image.</figcaption>
</figure>
</div></blockquote></div></div><div><span class="hide-hover"><a href="#where-to-store-images">ğŸ”—</a></span><h3 id="where-to-store-images"><a href="#where-to-store-images" title="link to this element">8.3. Where to store images</a><span>  | <a href="#toc-where-to-store-images">â‡‘ toc</a> | <a href="#images">â†‘ parent "Images (<code>\Image</code> and <code>\image</code>)"</a></span></h3>
</div><div><span class="hide-hover"><a href="#store-images-inside-the-repository-itself">ğŸ”—</a></span><h4 id="store-images-inside-the-repository-itself"><a href="#store-images-inside-the-repository-itself" title="link to this element">8.3.1. Store images inside the repository itself</a><span>  | <a href="#toc-store-images-inside-the-repository-itself">â‡‘ toc</a> | <a href="#where-to-store-images">â†‘ parent "Where to store images"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-214">ğŸ”—</a></span><div class="p" id="p-214">If you are making a limited repository that will not have a ton of images, then you can get away with simply git tracking your images in the main repository.</div></div><div><span class="hide-hover"><a href="#p-215">ğŸ”—</a></span><div class="p" id="p-215">With this setup, no further action is needed. For example, with a file structure of:
<pre id="c-83"><code>./README.ciro
./image.jpg
</code></pre>
just use the image from <pre id="c-84"><code>README.ciro</code></pre> as:
<pre id="c-85"><code>\Image[image.jpg]
</code></pre><div class="p" id="p-216">which renders as:</div><blockquote id="q-42"><figure id="fig-11">
<a href="image.jpg"><img src="image.jpg" loading="lazy" height="315" alt="image.jpg"></a>
</figure>
</blockquote></div></div><div><span class="hide-hover"><a href="#p-217">ğŸ”—</a></span><div class="p" id="p-217">However, if you are making a huge tutorial, which can have a huge undefined number of images (i.e. any scientific book), then you likely don't want to git track your images in the git repository.</div></div><div><span class="hide-hover"><a href="#store-images-in-a-separate-media-repository">ğŸ”—</a></span><h4 id="store-images-in-a-separate-media-repository"><a href="#store-images-in-a-separate-media-repository" title="link to this element">8.3.2. Store images in a separate media repository</a><span>  | <a href="#toc-store-images-in-a-separate-media-repository">â‡‘ toc</a> | <a href="#where-to-store-images">â†‘ parent "Where to store images"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-218">ğŸ”—</a></span><div class="p" id="p-218">This approach is more suitable than <a href="#store-images-inside-the-repository-itself">Store images inside the repository itself</a> if you are going to have a lot of images.</div></div><div><span class="hide-hover"><a href="#p-219">ğŸ”—</a></span><div class="p" id="p-219">Create a separate GitHub repository in addition to the main one containing the text, for example:<div><ul id="ul-32">
<li id="l-93"><code>./my-tutorial/</code></li><li id="l-94"><code>./my-tutorial-media/</code>
</li></ul></div>The name <code>*-media</code> suffix is not mandatory, but if you use this default, <code>cirodown</code> will handle it for you without any further configuration.</div></div><div><span class="hide-hover"><a href="#p-220">ğŸ”—</a></span><div class="p" id="p-220">TODO <a href="https://github.com/cirosantilli/cirodown/issues/40">https://github.com/cirosantilli/cirodown/issues/40</a> and then set the <a href="#media-source-type"><code>media_source_type</code></a> option in your <a href="#cirodown-json"><code>cirodown.json</code></a>:
<pre id="c-86"><code>{
  media_source_type = "media_repo"
}
</code></pre></div></div><div><span class="hide-hover"><a href="#p-221">ğŸ”—</a></span><div class="p" id="p-221">Now, simply drop your images into the <code>my-tutorial-media</code> repository and use them just as before, and everything will just work!
<pre id="c-87"><code>\Image[Image_with_a_descriptive_title.jpeg]
</code></pre>
<code>cirodown</code> will even automatically add and push used images in the <code>my-tutorial-media</code> repository for you <a href="#publish">during publishing</a>!</div></div><div><span class="hide-hover"><a href="#p-222">ğŸ”—</a></span><div class="p" id="p-222">You should then use the following rules inside <code>my-tutorial-media</code>:<div><ul id="ul-33">
<li id="l-95">give every file a very descriptive and unique name as a full English sentence</li><li id="l-96">never ever delete any files, nor change their content, unless it is an improvement in format that does change the information contained of the image TODO link to nice Wikimedia Commons guideline page</li></ul></div></div></div><div><span class="hide-hover"><a href="#p-223">ğŸ”—</a></span><div class="p" id="p-223">This way, even though the repositories are not fully in sync, anyone who clones the latest version of the <code>*-media</code> directory will be able to view any version of the main repository.</div></div><div><span class="hide-hover"><a href="#p-224">ğŸ”—</a></span><div class="p" id="p-224">Then, if one day the media repository ever blows up GitHub's limit, you can just migrate the images to another image server that allows arbitrary basenames, e.g. AWS, and just configure your project to use that new media base URL with the <a href="#media-base-url"><code>media_base_url</code></a> option.</div></div><div><span class="hide-hover"><a href="#p-225">ğŸ”—</a></span><div class="p" id="p-225">The reason why images should be kept in a separate repository is that images are hundreds or thousands of times larger than hand written text.</div></div><div><span class="hide-hover"><a href="#p-226">ğŸ”—</a></span><div class="p" id="p-226">Therefore, images could easily fill up the maximum repository size you are allowed: <a href="https://webapps.stackexchange.com/questions/45254/file-size-and-storage-limits-on-github#84746">https://webapps.stackexchange.com/questions/45254/file-size-and-storage-limits-on-github#84746</a> and then what will you do when GitHub comes asking you to reduce the repository size?</div></div><div><span class="hide-hover"><a href="#p-227">ğŸ”—</a></span><div class="p" id="p-227"><a href="https://git-lfs.github.com/">Git LFS</a> is one approach to deal with this, but we feel that it adds too much development overhead.</div></div><div><span class="hide-hover"><a href="#store-images-in-wikimedia-commons">ğŸ”—</a></span><h4 id="store-images-in-wikimedia-commons"><a href="#store-images-in-wikimedia-commons" title="link to this element">8.3.3. Store images in Wikimedia Commons</a><span>  | <a href="#toc-store-images-in-wikimedia-commons">â‡‘ toc</a> | <a href="#where-to-store-images">â†‘ parent "Where to store images"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-228">ğŸ”—</a></span><div class="p" id="p-228">Wikimedia Commons is another great possibility to upload your images to:
<pre id="c-88"><code>\Image[https://upload.wikimedia.org/wikipedia/commons/thumb/5/5b/Gel_electrophoresis_insert_comb.jpg/450px-Gel_electrophoresis_insert_comb.jpg]
{source=https://commons.wikimedia.org/wiki/File:Gel_electrophoresis_insert_comb.jpg}
</code></pre><div class="p" id="p-229">which renders as:</div><blockquote id="q-43"><figure id="fig-12">
<a href="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5b/Gel_electrophoresis_insert_comb.jpg/450px-Gel_electrophoresis_insert_comb.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5b/Gel_electrophoresis_insert_comb.jpg/450px-Gel_electrophoresis_insert_comb.jpg" loading="lazy" height="315"></a>
<figcaption><a href="#fig-12"><span class="caption-prefix">Figure 9</span></a>. <a  href="https://commons.wikimedia.org/wiki/File:Gel_electrophoresis_insert_comb.jpg">Source</a>.</figcaption>
</figure>
</blockquote></div></div><div><span class="hide-hover"><a href="#p-230">ğŸ”—</a></span><div class="p" id="p-230">Cirodown likes Wikimedia Commons so much that we automatically parse the image URL and if it is from Wikimedia Commons, automatically deduce the <code>source</code> for you. So the above image renders the same without the <code>source</code> argument:
<pre id="c-89"><code>\Image[https://upload.wikimedia.org/wikipedia/commons/5/5b/Gel_electrophoresis_insert_comb.jpg]
</code></pre><div class="p" id="p-231">which renders as:</div><blockquote id="q-44"><figure id="fig-13">
<a href="https://upload.wikimedia.org/wikipedia/commons/5/5b/Gel_electrophoresis_insert_comb.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/5/5b/Gel_electrophoresis_insert_comb.jpg" loading="lazy" height="315"></a>
<figcaption><a href="#fig-13"><span class="caption-prefix">Figure 10</span></a>. <a  href="https://commons.wikimedia.org/wiki/File:Gel_electrophoresis_insert_comb.jpg">Source</a>.</figcaption>
</figure>
</blockquote></div></div><div><span class="hide-hover"><a href="#p-232">ğŸ”—</a></span><div class="p" id="p-232">And a quick test for a more complex thumb resized URL:
<pre id="c-90"><code>\Image[https://upload.wikimedia.org/wikipedia/commons/thumb/5/5b/Gel_electrophoresis_insert_comb.jpg/450px-Gel_electrophoresis_insert_comb.jpg]
</code></pre><div class="p" id="p-233">which renders as:</div><blockquote id="q-45"><figure id="fig-14">
<a href="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5b/Gel_electrophoresis_insert_comb.jpg/450px-Gel_electrophoresis_insert_comb.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5b/Gel_electrophoresis_insert_comb.jpg/450px-Gel_electrophoresis_insert_comb.jpg" loading="lazy" height="315"></a>
<figcaption><a href="#fig-14"><span class="caption-prefix">Figure 11</span></a>. <a  href="https://commons.wikimedia.org/wiki/File:Gel_electrophoresis_insert_comb.jpg">Source</a>.</figcaption>
</figure>
</blockquote></div></div><div><span class="hide-hover"><a href="#p-234">ğŸ”—</a></span><div class="p" id="p-234">If you really absolutely want to turn off the <code>source</code>, you can explicitly set:
<pre id="c-91"><code>\Image[https://upload.wikimedia.org/wikipedia/commons/5/5b/Gel_electrophoresis_insert_comb.jpg]
{source=}
</code></pre><div class="p" id="p-235">which renders as:</div><blockquote id="q-46"><figure id="fig-15">
<a href="https://upload.wikimedia.org/wikipedia/commons/5/5b/Gel_electrophoresis_insert_comb.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/5/5b/Gel_electrophoresis_insert_comb.jpg" loading="lazy" height="315" alt="https://upload.wikimedia.org/wikipedia/commons/5/5b/Gel_electrophoresis_insert_comb.jpg"></a>
</figure>
</blockquote>
but you don't want to do that for the most commonly Wikimedia Commons used license of CC-BY+ , do you? :-)</div></div><div><span class="hide-hover"><a href="#p-236">ğŸ”—</a></span><div class="p" id="p-236">Upsides:<div><ul id="ul-34">
<li id="l-97">makes it easier for other writers to find and reuse your images</li><li id="l-98">automatically generates resized versions of the uploaded images into several common dimensions so you can pick the smallest one that fits your desired <a href="#image-height">Image height</a> to reduce bandwidth usage</li><li id="l-99">if you have so many images that they would blow even the size of a <a href="#store-images-in-a-separate-media-repository">separate media repository</a>, this will still work
</li></ul></div>Downsides:<div><ul id="ul-35">
<li id="l-100">forces you to use the Creative Commons license</li><li id="l-101">requires the content to be educational in nature</li><li id="l-102">uploading a bunch of images to Wikimedia Commons does feel a bit more laborious than it should because you have to write down so much repeated metadata for them</li></ul></div></div></div><div><span class="hide-hover"><a href="#image-lazy-loading">ğŸ”—</a></span><h3 id="image-lazy-loading"><a href="#image-lazy-loading" title="link to this element">8.4. Image lazy loading</a><span>  | <a href="#toc-image-lazy-loading">â‡‘ toc</a> | <a href="#images">â†‘ parent "Images (<code>\Image</code> and <code>\image</code>)"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-237">ğŸ”—</a></span><div class="p" id="p-237">We do this by default because Cirodown is meant to allow producing huge single page documents like Ciro likes it, and in this way:<div><ul id="ul-36">
<li id="l-103">images that the user is looking at will load first</li><li id="l-104">we save a lot of bandwidth for the user who only wants to browse one section</li></ul></div></div></div><div><span class="hide-hover"><a href="#p-238">ğŸ”—</a></span><div class="p" id="p-238">TODO: maybe create a mechanism to disable this for the entire build with <a href="#cirodown-json"><code>cirodown.json</code></a>.</div></div><div><span class="hide-hover"><a href="#image-generators">ğŸ”—</a></span><h3 id="image-generators"><a href="#image-generators" title="link to this element">8.5. Image generators</a><span>  | <a href="#toc-image-generators">â‡‘ toc</a> | <a href="#images">â†‘ parent "Images (<code>\Image</code> and <code>\image</code>)"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-239">ğŸ”—</a></span><div class="p" id="p-239">TODO implement: mechanism where you enter a textual description of the image inside the code body, and it then converts to an image, adds to the <code>-media</code> repo and pushes all automatically. Start with dot.</div></div><div><span class="hide-hover"><a href="#p-240">ğŸ”—</a></span><div class="p" id="p-240"><a href="https://github.com/cirosantilli/cirodown/issues/40">https://github.com/cirosantilli/cirodown/issues/40</a></div></div><div><span class="hide-hover"><a href="#videos">ğŸ”—</a></span><h2 id="videos"><a href="#videos" title="link to this element">9. Videos (<code>\Video</code> and <code>\video</code>)</a><span>  | <a href="#toc-videos">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#p-241">ğŸ”—</a></span><div class="p" id="p-241">Very analogous to <a href="#images">Images (<code>\Image</code> and <code>\image</code>)</a>, only differences will be documented here.</div></div><div><span class="hide-hover"><a href="#p-242">ğŸ”—</a></span><div class="p" id="p-242">In the case of videos, <a href="#where-to-store-images">Where to store images</a> becomes even more critical since videos are even larger than images, such that the following storage approaches are impractical off the bat:<div><ul id="ul-37">
<li id="l-105"><a href="#store-images-inside-the-repository-itself">Store images inside the repository itself</a></li><li id="l-106"><a href="#store-images-in-a-separate-media-repository">Store images in a separate media repository</a>
</li></ul></div>As a result, then <a href="https://commons.wikimedia.org">Wikimedia Commons</a> is one of the best options <a href="#store-images-in-wikimedia-commons">much like for images</a>:
<pre id="c-92"><code>\Video[https://upload.wikimedia.org/wikipedia/commons/8/85/Vacuum_pump_filter_cut_and_place_in_eppendorf.webm]
{id=sample-video-in-wikimedia-commons}
{title=Nice sample video stored in Wikimedia Commons}
{start=5}
</code></pre><div class="p" id="p-243">which renders as:</div><blockquote id="q-47"><figure id="sample-video-in-wikimedia-commons">
<video src="https://upload.wikimedia.org/wikipedia/commons/8/85/Vacuum_pump_filter_cut_and_place_in_eppendorf.webm#t=5" height="315" controls></video>
<figcaption><a href="#sample-video-in-wikimedia-commons"><span class="caption-prefix">Video 1</span></a>. Nice sample video stored in Wikimedia Commons. <a  href="https://commons.wikimedia.org/wiki/File:Vacuum_pump_filter_cut_and_place_in_eppendorf.webm">Source</a>.</figcaption>
</figure>
</blockquote>
We also handle more complex transcoded video URLs just fine:
<pre id="c-93"><code>\Video[https://upload.wikimedia.org/wikipedia/commons/transcoded/1/19/Scientific_Industries_Inc_Vortex-Genie_2_running.ogv/Scientific_Industries_Inc_Vortex-Genie_2_running.ogv.480p.vp9.webm]
{id=sample-video-in-wikimedia-commons-transcoded}
{title=Nice sample video stored in Wikimedia Commons transcoded}
</code></pre><div class="p" id="p-244">which renders as:</div><blockquote id="q-48"><figure id="sample-video-in-wikimedia-commons-transcoded">
<video src="https://upload.wikimedia.org/wikipedia/commons/transcoded/1/19/Scientific_Industries_Inc_Vortex-Genie_2_running.ogv/Scientific_Industries_Inc_Vortex-Genie_2_running.ogv.480p.vp9.webm" height="315" controls></video>
<figcaption><a href="#sample-video-in-wikimedia-commons-transcoded"><span class="caption-prefix">Video 2</span></a>. Nice sample video stored in Wikimedia Commons transcoded. <a  href="https://commons.wikimedia.org/wiki/File:Scientific_Industries_Inc_Vortex-Genie_2_running.ogv">Source</a>.</figcaption>
</figure>
</blockquote>
Commons is better than YouTube if your content is on-topic there because:<div><ul id="ul-38">
<li id="l-107">they have no ads</li><li id="l-108">it allows download of the videos: <a href="https://www.quora.com/Can-I-download-Creative-Commons-licensed-YouTube-videos-to-edit-them-and-use-them">https://www.quora.com/Can-I-download-Creative-Commons-licensed-YouTube-videos-to-edit-them-and-use-them</a>.</li><li id="l-109">it makes it easier for other users to find and re-use your videos</li></ul></div></div></div><div><span class="hide-hover"><a href="#p-245">ğŸ”—</a></span><div class="p" id="p-245">If your video does not fit the above Wikimedia Commons requirements, YouTube could be a good bet. Cirodown <a href="https://github.com/cirosantilli/cirodown/issues/50">automatically detects YouTube URLs</a> for you, so the following should just work:
<pre id="c-94"><code>\Video[https://youtube.com/watch?v=YeFzeNAHEhU&amp;t=38]
{id=sample-video-from-youtube-implicit-youtube}
{title=Nice sample video embedded from YouTube implicit from `youtube.com` URL}
</code></pre><div class="p" id="p-246">which renders as:</div><blockquote id="q-49"><figure id="sample-video-from-youtube-implicit-youtube">
<video src="https://youtube.com/watch?v=YeFzeNAHEhU&t=38" height="315" controls></video>
<figcaption><a href="#sample-video-from-youtube-implicit-youtube"><span class="caption-prefix">Video 3</span></a>. Nice sample video embedded from YouTube implicit from <code>youtube.com</code> URL. <a  href="https://youtube.com/watch?v=YeFzeNAHEhU&amp;t=38">Source</a>.</figcaption>
</figure>
</blockquote>
The <code>youtu.be</code> domain hack URLs also work;
<pre id="c-95"><code>\Video[https://youtu.be/YeFzeNAHEhU?t=38]
{id=sample-video-from-youtube-implicit-youtu-be}
{title=Nice sample video embedded from YouTube implicit from `youtu.be` URL}
</code></pre><div class="p" id="p-247">which renders as:</div><blockquote id="q-50"><figure id="sample-video-from-youtube-implicit-youtu-be">
<video src="https://youtu.be/YeFzeNAHEhU?t=38" height="315" controls></video>
<figcaption><a href="#sample-video-from-youtube-implicit-youtu-be"><span class="caption-prefix">Video 4</span></a>. Nice sample video embedded from YouTube implicit from <code>youtu.be</code> URL. <a  href="https://youtu.be/YeFzeNAHEhU?t=38">Source</a>.</figcaption>
</figure>
</blockquote>
Alternatively, you can reach the same result in a more explicit and minimal way with the <code>youtube</code> and <code>start</code> <a href="#boolean-named-arguments">boolean named argument</a>:
<pre id="c-96"><code>\Video[YeFzeNAHEhU]{youtube}
{id=sample-video-from-youtube-explicit}
{title=Nice sample video embedded from YouTube with explicit `youtube` argument}
{start=38}
</code></pre><div class="p" id="p-248">which renders as:</div><blockquote id="q-51"><figure id="sample-video-from-youtube-explicit">
<iframe width="560" height="315" src="https://www.youtube.com/embed/YeFzeNAHEhU?start=38" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><figcaption><a href="#sample-video-from-youtube-explicit"><span class="caption-prefix">Video 5</span></a>. Nice sample video embedded from YouTube with explicit <code>youtube</code> argument. <a  href="https://youtube.com/watch?v=YeFzeNAHEhU">Source</a>.</figcaption>
</figure>
</blockquote>
When this argument is given, the Video address should only to contain the YouTube video ID, which shows in the YouTube URL for the video as:
<pre id="c-97"><code>https://www.youtube.com/watch?v=&lt;video-id&gt;
</code></pre></div></div><div><span class="hide-hover"><a href="#p-249">ğŸ”—</a></span><div class="p" id="p-249">But you can also use raw video files from any location that can serve them of course, e.g. here is one stored in this repository: <a href="#sample-video-in-repository">Video 6. "Nice sample video stored in this repository"</a>.
<pre id="c-98"><code>\Video[video.mp4]
{id=sample-video-in-repository}
{title=Nice sample video stored in this repository}
{source=https://www.youtube.com/watch?v=YeFzeNAHEhU}
</code></pre><div class="p" id="p-250">which renders as:</div><blockquote id="q-52"><figure id="sample-video-in-repository">
<video src="video.mp4" height="315" controls></video>
<figcaption><a href="#sample-video-in-repository"><span class="caption-prefix">Video 6</span></a>. Nice sample video stored in this repository. <a  href="https://www.youtube.com/watch?v=YeFzeNAHEhU">Source</a>.</figcaption>
</figure>
</blockquote></div></div><div><span class="hide-hover"><a href="#video-code-start-code-argument">ğŸ”—</a></span><h3 id="video-code-start-code-argument"><a href="#video-code-start-code-argument" title="link to this element">9.1. Video <code>start</code> argument</a><span>  | <a href="#toc-video-code-start-code-argument">â‡‘ toc</a> | <a href="#videos">â†‘ parent "Videos (<code>\Video</code> and <code>\video</code>)"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-251">ğŸ”—</a></span><div class="p" id="p-251">The time to start playing the video at in seconds. Works for both <code>youtube</code> and non-Youtube videos.</div></div><div><span class="hide-hover"><a href="#video-lazy-loading">ğŸ”—</a></span><h3 id="video-lazy-loading"><a href="#video-lazy-loading" title="link to this element">9.2. Video lazy loading</a><span>  | <a href="#toc-video-lazy-loading">â‡‘ toc</a> | <a href="#videos">â†‘ parent "Videos (<code>\Video</code> and <code>\video</code>)"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-252">ğŸ”—</a></span><div class="p" id="p-252">Unlike <a href="#image-lazy-loading">Image lazy loading</a>, we don't support video lazy loading yet because:<div><ul id="ul-39">
<li id="l-110">non-<code>youtube</code> videos use the <code>video</code> tag which has no <code>loading</code> property yet</li><li id="l-111"><code>youtube</code> videos are embedded with <code>iframe</code> and <code>iframe</code> has no <code>loading</code> property yet</li></ul></div></div></div><div><span class="hide-hover"><a href="#p-253">ğŸ”—</a></span><div class="p" id="p-253">Both of this cases could be worked around with JavaScript:<div><ul id="ul-40">
<li id="l-112"><div class="p" id="p-254">non-<code>youtube</code>: set <code>src</code> from JavaScript as shown for images: <a href="https://stackoverflow.com/questions/2321907/how-do-you-make-images-load-lazily-only-when-they-are-in-the-viewport/57389607#57389607">https://stackoverflow.com/questions/2321907/how-do-you-make-images-load-lazily-only-when-they-are-in-the-viewport/57389607#57389607</a>.</div><div class="p" id="p-255">But this breaks page semantics however, we don't know how to work around that</div></li><li id="l-113"><code>youtube</code> videos: same as above for the <code>iframe</code>, but this should be less problematic since YouTube videos are not viewable without JavaScript anyways, and who cares about <code>iframe</code> semantics?</li></ul></div></div></div><div><span class="hide-hover"><a href="#code">ğŸ”—</a></span><h2 id="code"><a href="#code" title="link to this element">10. Code (<code>`</code>, <code>``</code>, <code>\c</code> and <code>\C</code>)</a><span>  | <a href="#toc-code">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#p-256">ğŸ”—</a></span><div class="p" id="p-256">Inline code (code that should appear in the middle of a paragraph rather than on its own line) is done with a single backtick (<code>`</code>) <a href="#insane-macro-shortcuts">insane macro shortcut</a>:
<pre id="c-99"><code>My inline `x = 'hello\n'` is awesome.
</code></pre><div class="p" id="p-257">which renders as:</div><blockquote id="q-53"><div class="p" id="p-258">My inline <code>x = 'hello\n'</code> is awesome.</div></blockquote>
and block code (code that should appear on their own line) is done with two or more backticks (<code>``</code>):
<pre id="c-100"><code>``
f() {
  return 'hello\n';
}
``
</code></pre><div class="p" id="p-259">which renders as:</div><blockquote id="q-54"><pre id="c-101"><code>f() {
  return 'hello\n';
}
</code></pre></blockquote></div></div><div><span class="hide-hover"><a href="#p-260">ğŸ”—</a></span><div class="p" id="p-260">The sane version of inline code is a lower case <code>c</code>:
<pre id="c-102"><code>My inline \c[[x = 'hello\n']] is awesome.
</code></pre><div class="p" id="p-261">which renders as:</div><blockquote id="q-55"><div class="p" id="p-262">My inline <code>x = 'hello\n'</code> is awesome.</div></blockquote>
and the sane version of block math is with an upper case <code>C</code>:
<pre id="c-103"><code>\C[[
f() {
  return 'hello\n';
}
]]
</code></pre><div class="p" id="p-263">which renders as:</div><blockquote id="q-56"><pre id="c-104"><code>f() {
  return 'hello\n';
}
</code></pre></blockquote></div></div><div><span class="hide-hover"><a href="#p-264">ğŸ”—</a></span><div class="p" id="p-264">The capital vs lower case theme is also used in other elements, see: <a href="#macro-capitalization-for-block-vs-inline">Macro capitalization for block vs inline</a>.</div></div><div><span class="hide-hover"><a href="#p-265">ğŸ”—</a></span><div class="p" id="p-265">If the content of the sane code block has many characters that you would need to <a href="#escape-characters">escape</a>, you will often want to use <a href="#literal-arguments">Literal arguments (<code>[[...]]</code> and <code>{{key=...}}</code>)</a>, which work just like the do for any other argument. For example:
<pre id="c-105"><code>\C[[[
A paragraph.

\C[[
And now, some long, long code, with lots
of chars that you would need to escape:
\ [  ] {  }
]]

A paragraph.
]]]
</code></pre><div class="p" id="p-266">which renders as:</div><blockquote id="q-57"><pre id="c-106"><code>A paragraph.

\C[[
And now, some long, long code, with lots
of chars that you would need to escape:
\ [  ] {  }
]]

A paragraph.
</code></pre></blockquote>
Note that the initial newline is skipped automatically in code blocks, just as for any other element, due to: <a href="#argument-leading-newline-removal">Argument leading newline removal</a>, so you don't have to worry about it.</div></div><div><span class="hide-hover"><a href="#p-267">ğŸ”—</a></span><div class="p" id="p-267">The distinction between inline <code>c</code> and block <code>C</code> code blocks is needed because in HTML, <a href="https://stackoverflow.com/questions/5371787/can-i-have-a-pre-tag-inside-a-p-tag-in-tumblr/58603596#58603596"><code>pre</code> cannot go inside <code>p</code></a>.</div></div><div><span class="hide-hover"><a href="#p-268">ğŸ”—</a></span><div class="p" id="p-268">We could have chosen to do some magic to differentiate between them, e.g. checking if the block is the only element in a paragraph, but we decided not to do that to keep the language saner.</div></div><div><span class="hide-hover"><a href="#p-269">ğŸ”—</a></span><div class="p" id="p-269">And now a code block outside of <a href="#cirodown-example"><code>cirodown_example</code></a> to test how it looks directly under <a href="#toplevel">The <code>\toplevel</code> implicit macro</a>:</div></div><div><span class="hide-hover"><a href="#c-107">ğŸ”—</a></span><pre id="c-107"><code>Hello
Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello
Hello
</code></pre></div><div><span class="hide-hover"><a href="#math">ğŸ”—</a></span><h2 id="math"><a href="#math" title="link to this element">11. Mathematics <code>$</code>, <code>$$</code>, <code>\m</code> and <code>\M</code></a><span>  | <a href="#toc-math">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#p-270">ğŸ”—</a></span><div class="p" id="p-270">Via <a href="https://katex.org/">KaTeX</a> server side, oh yes!</div></div><div><span class="hide-hover"><a href="#p-271">ğŸ”—</a></span><div class="p" id="p-271">Inline math is done with the dollar sign (<code>$</code>) <a href="#insane-macro-shortcuts">insane macro shortcut</a>:
<pre id="c-108"><code>My inline $\sqrt{1 + 1}$ is awesome.
</code></pre><div class="p" id="p-272">which renders as:</div><blockquote id="q-58"><div class="p" id="p-273">My inline <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mrow><mn>1</mn><mo>+</mo><mn>1</mn></mrow></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{1 + 1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.17444499999999996em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8655550000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span><span style="top:-2.825555em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.17444499999999996em;"><span></span></span></span></span></span></span></span></span> is awesome.</div></blockquote>
and block math is done with two or more dollar signs (<code>$$</code>):
<pre id="c-109"><code>$$
\sqrt{1 + 1} \\
\sqrt{1 + 1}
$$
</code></pre><div class="p" id="p-274">which renders as:</div><blockquote id="q-59"><div class="math-container" id="eq-1"><div class="math-equation">
<div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mrow><mn>1</mn><mo>+</mo><mn>1</mn></mrow></msqrt><mspace linebreak="newline"></mspace><msqrt><mrow><mn>1</mn><mo>+</mo><mn>1</mn></mrow></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{1 + 1} \\
\sqrt{1 + 1}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.17444499999999996em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8655550000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span><span style="top:-2.825555em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.17444499999999996em;"><span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.17444499999999996em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8655550000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span><span style="top:-2.825555em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.17444499999999996em;"><span></span></span></span></span></span></span></span></span></div>
<div><a href="#eq-1">(1)</a></div></div>
</div>
</blockquote></div></div><div><span class="hide-hover"><a href="#p-275">ğŸ”—</a></span><div class="p" id="p-275">The sane version of inline math is a lower case <code>m</code>:
<pre id="c-110"><code>My inline \m[[\sqrt{1 + 1}]] is awesome.
</code></pre><div class="p" id="p-276">which renders as:</div><blockquote id="q-60"><div class="p" id="p-277">My inline <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mrow><mn>1</mn><mo>+</mo><mn>1</mn></mrow></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{1 + 1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.17444499999999996em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8655550000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span><span style="top:-2.825555em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.17444499999999996em;"><span></span></span></span></span></span></span></span></span> is awesome.</div></blockquote>
and the sane version of block math is with an upper case <code>M</code>:
<pre id="c-111"><code>\M[[
\sqrt{1 + 1} \\
\sqrt{1 + 1}
]]
</code></pre><div class="p" id="p-278">which renders as:</div><blockquote id="q-61"><div class="math-container" id="eq-2"><div class="math-equation">
<div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mrow><mn>1</mn><mo>+</mo><mn>1</mn></mrow></msqrt><mspace linebreak="newline"></mspace><msqrt><mrow><mn>1</mn><mo>+</mo><mn>1</mn></mrow></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{1 + 1} \\
\sqrt{1 + 1}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.17444499999999996em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8655550000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span><span style="top:-2.825555em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.17444499999999996em;"><span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.17444499999999996em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8655550000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span><span style="top:-2.825555em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.17444499999999996em;"><span></span></span></span></span></span></span></span></span></div>
<div><a href="#eq-2">(2)</a></div></div>
</div>
</blockquote></div></div><div><span class="hide-hover"><a href="#p-279">ğŸ”—</a></span><div class="p" id="p-279">The capital vs lower case theme is also used in other elements, see: <a href="#macro-capitalization-for-block-vs-inline">Macro capitalization for block vs inline</a>.</div></div><div><span class="hide-hover"><a href="#p-280">ğŸ”—</a></span><div class="p" id="p-280">In the sane syntax, <a href="#escape-characters">as with any other argument</a>, you have to either escape any closing square brackets <code>]</code> with a backslash <code></code>:
<pre id="c-112"><code>My inline \m[1 - \[1 + 1\] = -1] is awesome.
</code></pre><div class="p" id="p-281">which renders as:</div><blockquote id="q-62"><div class="p" id="p-282">My inline <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>âˆ’</mo><mo stretchy="false">[</mo><mn>1</mn><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>=</mo><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">1 - [1 + 1] = -1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">âˆ’</span><span class="mord">1</span></span></span></span> is awesome.</div></blockquote>
or with the equivalent double open and close:
<pre id="c-113"><code>My inline \m[[1 - [1 + 1] = -1]] is awesome.
</code></pre></div></div><div><span class="hide-hover"><a href="#p-283">ğŸ”—</a></span><div class="p" id="p-283">HTML escaping happens as you would expect, e.g. &lt; shows fine in:
<pre id="c-114"><code>$$
1 &lt; 2
$$
</code></pre><div class="p" id="p-284">which renders as:</div><blockquote id="q-63"><div class="math-container" id="eq-3"><div class="math-equation">
<div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>&lt;</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">1 &lt; 2
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span></div>
<div><a href="#eq-3">(3)</a></div></div>
</div>
</blockquote></div></div><div><span class="hide-hover"><a href="#p-285">ğŸ”—</a></span><div class="p" id="p-285">Equation IDs and titles and linking to equations works identically to <a href="#images">images</a>, see that section for full details. Here is one equation reference example that links to the following insane syntax equation: <a href="#eq-my-first-insane-equation">Equation 4. "My first insane equation"</a>:
<pre id="c-115"><code>$$
\sqrt{1 + 1}
$$
{title=My first insane equation}
</code></pre><div class="p" id="p-286">which renders as:</div><blockquote id="q-64"><div class="math-container" id="eq-my-first-insane-equation"><div class="math-caption-container">
<span class="math-caption"><a href="#eq-my-first-insane-equation"><span class="caption-prefix">Equation 4</span></a>. My first insane equation</span></div>
<div class="math-equation">
<div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mrow><mn>1</mn><mo>+</mo><mn>1</mn></mrow></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{1 + 1}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.17444499999999996em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8655550000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span><span style="top:-2.825555em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.17444499999999996em;"><span></span></span></span></span></span></span></span></span></div>
<div><a href="#eq-my-first-insane-equation">(4)</a></div></div>
</div>
</blockquote>
and the sane equivalent <a href="#eq-my-first-sane-equation">Equation 5. "My first sane equation"</a>:
<pre id="c-116"><code>\M{title=My first sane equation}[[
\sqrt{1 + 1}
]]
</code></pre><div class="p" id="p-287">which renders as:</div><blockquote id="q-65"><div class="math-container" id="eq-my-first-sane-equation"><div class="math-caption-container">
<span class="math-caption"><a href="#eq-my-first-sane-equation"><span class="caption-prefix">Equation 5</span></a>. My first sane equation</span></div>
<div class="math-equation">
<div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mrow><mn>1</mn><mo>+</mo><mn>1</mn></mrow></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{1 + 1}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.17444499999999996em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8655550000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span><span style="top:-2.825555em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.17444499999999996em;"><span></span></span></span></span></span></span></span></span></div>
<div><a href="#eq-my-first-sane-equation">(5)</a></div></div>
</div>
</blockquote></div></div><div><span class="hide-hover"><a href="#p-288">ğŸ”—</a></span><div class="p" id="p-288">Here is a raw one just to test the formatting outside of a <code>cirodown_comment</code>:
<div class="math-container" id="eq-6"><div class="math-equation">
<div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mrow><mn>1</mn><mo>+</mo><mn>1</mn></mrow></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{1 + 1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.17444499999999996em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8655550000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span><span style="top:-2.825555em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.17444499999999996em;"><span></span></span></span></span></span></span></span></span></div>
<div><a href="#eq-6">(6)</a></div></div>
</div>
</div></div><div><span class="hide-hover"><a href="#math-defines-across-blocks">ğŸ”—</a></span><h3 id="math-defines-across-blocks"><a href="#math-defines-across-blocks" title="link to this element">11.1. Math defines across blocks</a><span>  | <a href="#toc-math-defines-across-blocks">â‡‘ toc</a> | <a href="#math">â†‘ parent "Mathematics <code>$</code>, <code>$$</code>, <code>\m</code> and <code>\M</code>"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-289">ğŸ”—</a></span><div class="p" id="p-289">First here is an invisible block (with <code>{show=0}</code>) defining with a <code>\newcommand</code> definition after this paragraph:
<pre id="c-117"><code>$$
\newcommand{\foo}[0]{bar}
$${show=0}
</code></pre><div class="p" id="p-290">which renders as:</div><blockquote id="q-66"></blockquote>
We make it invisible because this block only contains KaTeX definitions, and should not render to anything.</div></div><div><span class="hide-hover"><a href="#p-291">ğŸ”—</a></span><div class="p" id="p-291">Then the second math block uses those definitions TODO pending upstream tag bump: <a href="https://github.com/KaTeX/KaTeX/pull/2091">https://github.com/KaTeX/KaTeX/pull/2091</a>
<pre id="c-118"><code>$$
\foo
$$
</code></pre></div></div><div><span class="hide-hover"><a href="#p-292">ğŸ”—</a></span><div class="p" id="p-292">Analogously with <code>\def</code>, definition:
<pre id="c-119"><code>$$
\gdef\foogdef{bar}
$${show=0}
</code></pre><div class="p" id="p-293">which renders as:</div><blockquote id="q-67"></blockquote>
and the second block using it:
<pre id="c-120"><code>$$
\foogdef
$$
</code></pre><div class="p" id="p-294">which renders as:</div><blockquote id="q-68"><div class="math-container" id="eq-7"><div class="math-equation">
<div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>a</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">\foogdef
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span></div>
<div><a href="#eq-7">(7)</a></div></div>
</div>
</blockquote></div></div><div><span class="hide-hover"><a href="#p-295">ğŸ”—</a></span><div class="p" id="p-295">And just to test that <code>{show=1}</code> actually shows, although it is useless, and that <code>{show=0}</code> skips incrementing the equation count:
<pre id="c-121"><code>$$1 + 1$${show=1}
$$2 + 2$${show=0}
$$3 + 3$${show=1}
</code></pre><div class="p" id="p-296">which renders as:</div><blockquote id="q-69"><div class="p" id="p-297"><div class="math-container" id="eq-8"><div class="math-equation">
<div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">1 + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></div>
<div><a href="#eq-8">(8)</a></div></div>
</div>


<div class="math-container" id="eq-9"><div class="math-equation">
<div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>+</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">3 + 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span></div>
<div><a href="#eq-9">(9)</a></div></div>
</div>
</div></blockquote></div></div><div><span class="hide-hover"><a href="#tables">ğŸ”—</a></span><h2 id="tables"><a href="#tables" title="link to this element">12. Tables <code>\table</code>, <code>\tr</code>, <code>\th</code> and <code>\td</code></a><span>  | <a href="#toc-tables">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#p-298">ğŸ”—</a></span><div class="p" id="p-298">Similar to <a href="#lists">lists</a>.</div></div><div><span class="hide-hover"><a href="#p-299">ğŸ”—</a></span><div class="p" id="p-299"><a href="#auto-parent">Implicit container</a> with optional indentation to improve readability:
<pre id="c-122"><code>\tr[
  \th[Header 1]
  \th[Header 2]
]
\tr[
  \td[1 1]
  \td[1 2]
]
\tr[
  \td[2 1]
  \td[2 2]
]
</code></pre><div class="p" id="p-300">which renders as:</div><blockquote id="q-70"><div class="table-container" id="table-2">
<table>
<tr id="tr-5">
<th id="th-4">Header 1</th><th id="th-5">Header 2</th></tr><tr id="tr-6">
<td id="td-10">1 1</td><td id="td-11">1 2</td></tr><tr id="tr-7">
<td id="td-12">2 1</td><td id="td-13">2 2</td></tr></table>
</div>
</blockquote>
The indentation space is removed automatically due to <a href="#remove-whitespace-children"><code>remove_whitespace_children</code> macro argument property</a> which is set for <code>\table</code>.</div></div><div><span class="hide-hover"><a href="#p-301">ğŸ”—</a></span><div class="p" id="p-301">Explicit container to add further properties: <a href="#table-my-table">Table 2. "My table title"</a>.
<pre id="c-123"><code>\table{title=My table title}
{id=table-my-table}
[
\tr[
  \th[Header 1]
  \th[Header 2]
]
\tr[
  \td[1 1]
  \td[1 2]
]
\tr[
  \td[2 1]
  \td[2 2]
]
]
</code></pre><div class="p" id="p-302">which renders as:</div><blockquote id="q-71"><div class="table-container" id="table-my-table">
<div class="table-caption-container">
<span class="table-caption"><a href="#table-my-table"><span class="caption-prefix">Table 2</span></a>. My table title</span></div>
<table>
<tr id="tr-8">
<th id="th-6">Header 1</th><th id="th-7">Header 2</th></tr><tr id="tr-9">
<td id="td-14">1 1</td><td id="td-15">1 2</td></tr><tr id="tr-10">
<td id="td-16">2 1</td><td id="td-17">2 2</td></tr></table>
</div>
</blockquote>
The rules of when the caption shows up or not are the same as described for <a href="#images">Images (<code>\Image</code> and <code>\image</code>)</a>.</div></div><div><span class="hide-hover"><a href="#p-303">ğŸ”—</a></span><div class="p" id="p-303">And now a table outside of <a href="#cirodown-example"><code>cirodown_example</code></a> to test how it looks directly under <a href="#toplevel">The <code>\toplevel</code> implicit macro</a>:</div></div><div><span class="hide-hover"><a href="#table-my-table-title">ğŸ”—</a></span><div class="table-container" id="table-my-table-title">
<div class="table-caption-container">
<span class="table-caption"><a href="#table-my-table-title"><span class="caption-prefix">Table 3</span></a>. My table title</span></div>
<table>
<tr id="tr-11">
<th id="th-8">Header 1</th><th id="th-9">Header 2</th></tr><tr id="tr-12">
<td id="td-18">1 1</td><td id="td-19">1 2</td></tr><tr id="tr-13">
<td id="td-20">2 1</td><td id="td-21">2 2</td></tr></table>
</div>
</div><div><span class="hide-hover"><a href="#quotations">ğŸ”—</a></span><h2 id="quotations"><a href="#quotations" title="link to this element">13. Quotations <code>\q</code></a><span>  | <a href="#toc-quotations">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#p-304">ğŸ”—</a></span><div class="p" id="p-304">With <code>q</code>:
<pre id="c-124"><code>And so he said:

\q[
Something very smart

And with multiple paragraphs.
]

and it was great.
</code></pre><div class="p" id="p-305">which renders as:</div><blockquote id="q-72"><div class="p" id="p-306">And so he said:</div><blockquote id="q-73"><div class="p" id="p-307">Something very smart</div><div class="p" id="p-308">And with multiple paragraphs.
</div></blockquote><div class="p" id="p-309">and it was great.</div></blockquote></div></div><div><span class="hide-hover"><a href="#comments">ğŸ”—</a></span><h2 id="comments"><a href="#comments" title="link to this element">14. Comments</a><span>  | <a href="#toc-comments">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#p-310">ğŸ”—</a></span><div class="p" id="p-310">The <code>Comment</code> and <code>comment</code> macros are regular macros that does not produce any output. Capitalization is explained at: <a href="#macro-capitalization-for-block-vs-inline">Macro capitalization for block vs inline</a>.</div></div><div><span class="hide-hover"><a href="#p-311">ğŸ”—</a></span><div class="p" id="p-311">You will therefore mostly want to use it with a <a href="#literal-arguments">literal argument</a>, which will, as for any other macro, ignore any macros inside of it.
<pre id="c-125"><code>Before comment.

\Comment[[
Inside comment.
]]

After comment.
</code></pre><div class="p" id="p-312">which renders as:</div><blockquote id="q-74"><div class="p" id="p-313">Before comment.</div><div class="p" id="p-314">After comment.</div></blockquote></div></div><div><span class="hide-hover"><a href="#p-315">ğŸ”—</a></span><div class="p" id="p-315">And an inline one:
<pre id="c-126"><code>My inline \comment[[inside comment]] is awesome.

\comment[[inside comment]] inline at the start.
</code></pre><div class="p" id="p-316">which renders as:</div><blockquote id="q-75"><div class="p" id="p-317">My inline  is awesome.</div><div class="p" id="p-318"> inline at the start.</div></blockquote></div></div><div><span class="hide-hover"><a href="#cirodown-example">ğŸ”—</a></span><h2 id="cirodown-example"><a href="#cirodown-example" title="link to this element">15. <code>cirodown_example</code></a><span>  | <a href="#toc-cirodown-example">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#p-319">ğŸ”—</a></span><div class="p" id="p-319">Shows both the Cirodown code and its rendered output, e.g.:
<pre id="c-127"><code>\cirodown_example[[
Some `ineline` code.
]]
</code></pre><div class="p" id="p-320">which renders as:</div><blockquote id="q-76"><div class="p" id="p-321"><pre id="c-128"><code>Some `ineline` code.
</code></pre><div class="p" id="p-322">which renders as:</div><blockquote id="q-77"><div class="p" id="p-323">Some <code>ineline</code> code.</div></blockquote></div></blockquote></div></div><div><span class="hide-hover"><a href="#p-324">ğŸ”—</a></span><div class="p" id="p-324">Its input should be thought of as a literal code string, and it then injects the rendered output in the document.</div></div><div><span class="hide-hover"><a href="#p-325">ğŸ”—</a></span><div class="p" id="p-325">This macro is used extensively in the Cirodown documentation.</div></div><div><span class="hide-hover"><a href="#cirodown-syntax">ğŸ”—</a></span><h2 id="cirodown-syntax"><a href="#cirodown-syntax" title="link to this element">16. Cirodown syntax</a><span>  | <a href="#toc-cirodown-syntax">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#insane-macro-shortcuts">ğŸ”—</a></span><h3 id="insane-macro-shortcuts"><a href="#insane-macro-shortcuts" title="link to this element">16.1. Insane macro shortcuts</a><span>  | <a href="#toc-insane-macro-shortcuts">â‡‘ toc</a> | <a href="#cirodown-syntax">â†‘ parent "Cirodown syntax"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-326">ğŸ”—</a></span><div class="p" id="p-326">Certain commonly used macros have insane macro shortcuts that do not start with backslash (<code></code>):<div><ul id="ul-41">
<li id="l-114"><a href="#paragraphs">Paragraphs <code>\p</code></a>: <code>\n\n</code> (double newline)</li><li id="l-115"><a href="#links">Links <code>\a</code></a>: <code>a http://exmaple.com b</code> (space followed by <code>http://</code>)</li><li id="l-116"><a href="#math">Mathematics <code>$</code>, <code>$$</code>, <code>\m</code> and <code>\M</code></a>: <code>$</code>, described at: <a href="#insane-code-and-math-shortcuts">Insane code and math shortcuts</a></li><li id="l-117"><a href="#code">Code (<code>`</code>, <code>``</code>, <code>\c</code> and <code>\C</code>)</a>: <code>`</code>, described at: <a href="#insane-code-and-math-shortcuts">Insane code and math shortcuts</a></li><li id="l-118"><a href="#lists">Lists <code>\l</code></a>: <code>* </code> and <code>  </code> indentation, described at: <a href="#lists">Lists <code>\l</code></a></li></ul></div></div></div><div><span class="hide-hover"><a href="#p-327">ğŸ”—</a></span><div class="p" id="p-327">Originally, <a href="#design-goals">Ciro wanted to avoid those</a>, but they just feel too good to avoid.</div></div><div><span class="hide-hover"><a href="#p-328">ğŸ”—</a></span><div class="p" id="p-328">Every insane syntax does however have an equivalent sane syntax.</div></div><div><span class="hide-hover"><a href="#p-329">ğŸ”—</a></span><div class="p" id="p-329">The style recommendation is: use the insane version which is shorter, unless you have a specific reason to use the sane version.</div></div><div><span class="hide-hover"><a href="#insane-code-and-math-shortcuts">ğŸ”—</a></span><h4 id="insane-code-and-math-shortcuts"><a href="#insane-code-and-math-shortcuts" title="link to this element">16.1.1. Insane code and math shortcuts</a><span>  | <a href="#toc-insane-code-and-math-shortcuts">â‡‘ toc</a> | <a href="#insane-macro-shortcuts">â†‘ parent "Insane macro shortcuts"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-330">ğŸ”—</a></span><div class="p" id="p-330">The insane code and math shortcuts work very analogously and are therefore described together in this section.</div></div><div><span class="hide-hover"><a href="#p-331">ğŸ”—</a></span><div class="p" id="p-331">The insane inline code syntax:
<pre id="c-129"><code>a `b c` d
</code></pre><div class="p" id="p-332">which renders as:</div><blockquote id="q-78"><div class="p" id="p-333">a <code>b c</code> d</div></blockquote>
and is equivalent to the sane:
<pre id="c-130"><code>a \c[[b c]] d
</code></pre></div></div><div><span class="hide-hover"><a href="#p-334">ğŸ”—</a></span><div class="p" id="p-334">The insane block code:
<pre id="c-131"><code>a

``
b c
``

d
</code></pre><div class="p" id="p-335">which renders as:</div><blockquote id="q-79"><div class="p" id="p-336">a</div><pre id="c-132"><code>b c
</code></pre><div class="p" id="p-337">d</div></blockquote>
and is equivalent to the sane:
<pre id="c-133"><code>a

\C[[
b c
]]

d
</code></pre></div></div><div><span class="hide-hover"><a href="#insane-macro-shortcut-extra-arguments">ğŸ”—</a></span><h4 id="insane-macro-shortcut-extra-arguments"><a href="#insane-macro-shortcut-extra-arguments" title="link to this element">16.1.2. Insane macro shortcut extra arguments</a><span>  | <a href="#toc-insane-macro-shortcut-extra-arguments">â‡‘ toc</a> | <a href="#insane-macro-shortcuts">â†‘ parent "Insane macro shortcuts"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-338">ğŸ”—</a></span><div class="p" id="p-338">Insane arguments always work by abbreviating:<div><ul id="ul-42">
<li id="l-119">the macro name</li><li id="l-120">one or more of its positional arguments, which are fixed as either <a href="#literal-arguments">literal or non-literal</a> for a given insane construct
</li></ul></div>This means that you can add further arguments as usual.</div></div><div><span class="hide-hover"><a href="#p-339">ğŸ”—</a></span><div class="p" id="p-339">For example, an insane code block with an id can be written as:
<pre id="c-134"><code>a `b c`{id=ef} g
</code></pre>
because that is the same as:
<pre id="c-135"><code>a \c[b c]{id=ef} g
</code></pre><div class="p" id="p-340">which renders as:</div><blockquote id="q-80"><div class="p" id="p-341">a <code id="ef">b c</code> g</div></blockquote>
So we see that the <code>b c</code> argument is the very first argument of <code>\c</code>.</div></div><div><span class="hide-hover"><a href="#p-342">ğŸ”—</a></span><div class="p" id="p-342">Extra arguments must come after the insane opening, e.g. the following does not work:
<pre id="c-136"><code>a {id=ef}`b c` g
</code></pre><div class="p" id="p-343">which renders as:</div><blockquote id="q-81"><div class="p" id="p-344">a [CIRODOWN_ERROR: stray open argument character: '{', maybe you want to escape it with '\'][CIRODOWN_ERROR: unexpected token Symbol(NAMED_ARGUMENT_NAME)]ef</div></blockquote></div></div><div><span class="hide-hover"><a href="#p-345">ğŸ”—</a></span><div class="p" id="p-345">This restriction things easy to parse for humans and machines alike.</div></div><div><span class="hide-hover"><a href="#escapes-in-insane-macro-shortcuts">ğŸ”—</a></span><h4 id="escapes-in-insane-macro-shortcuts"><a href="#escapes-in-insane-macro-shortcuts" title="link to this element">16.1.3. Escapes in insane macro shortcuts</a><span>  | <a href="#toc-escapes-in-insane-macro-shortcuts">â‡‘ toc</a> | <a href="#insane-macro-shortcuts">â†‘ parent "Insane macro shortcuts"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-346">ğŸ”—</a></span><div class="p" id="p-346">Literal backticks and dollar signs can be produced witha backslash escape as in:
<pre id="c-137"><code>a \` \$ b
</code></pre><div class="p" id="p-347">which renders as:</div><blockquote id="q-82"><div class="p" id="p-348">a ` $ b</div></blockquote></div></div><div><span class="hide-hover"><a href="#p-349">ğŸ”—</a></span><div class="p" id="p-349">It is not possible to escape backticks (<code>`</code>) inside an insane inline code, or dollar signs (<code>$</code>) in insane math.</div></div><div><span class="hide-hover"><a href="#p-350">ğŸ”—</a></span><div class="p" id="p-350">The design reason for that is because multiple backticks produce block code.</div></div><div><span class="hide-hover"><a href="#p-351">ğŸ”—</a></span><div class="p" id="p-351">The upside is that then you don't have to escape anything else, e.g. backslashes (<code></code>) are rendered literally.</div></div><div><span class="hide-hover"><a href="#p-352">ğŸ”—</a></span><div class="p" id="p-352">The only way to do it is to use the sane syntax instead:
<pre id="c-138"><code>a \c[[b ` c]] d

a \m[[\sqrt{\$4}]] d
</code></pre><div class="p" id="p-353">which renders as:</div><blockquote id="q-83"><div class="p" id="p-354">a <code>b ` c</code> d</div><div class="p" id="p-355">a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mrow><mi mathvariant="normal">$</mi><mn>4</mn></mrow></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{\$4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.10777999999999999em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.93222em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">$</span><span class="mord">4</span></span></span><span style="top:-2.89222em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.10777999999999999em;"><span></span></span></span></span></span></span></span></span> d</div></blockquote></div></div><div><span class="hide-hover"><a href="#p-356">ğŸ”—</a></span><div class="p" id="p-356">Within block code and math, you can just add more separators:
<pre id="c-139"><code>```
code with two backticks
``
nice
```
</code></pre><div class="p" id="p-357">which renders as:</div><blockquote id="q-84"><pre id="c-140"><code>code with two backticks
``
nice
</code></pre></blockquote></div></div><div><span class="hide-hover"><a href="#macro-argument-syntax">ğŸ”—</a></span><h3 id="macro-argument-syntax"><a href="#macro-argument-syntax" title="link to this element">16.2. Macro argument syntax</a><span>  | <a href="#toc-macro-argument-syntax">â‡‘ toc</a> | <a href="#cirodown-syntax">â†‘ parent "Cirodown syntax"</a></span></h3>
</div><div><span class="hide-hover"><a href="#positional-vs-named-arguments">ğŸ”—</a></span><h4 id="positional-vs-named-arguments"><a href="#positional-vs-named-arguments" title="link to this element">16.2.1. Positional vs named arguments (<code>[...]</code> vs <code>{key=...}</code>)</a><span>  | <a href="#toc-positional-vs-named-arguments">â‡‘ toc</a> | <a href="#macro-argument-syntax">â†‘ parent "Macro argument syntax"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-358">ğŸ”—</a></span><div class="p" id="p-358">Every argument in Cirodown is either positional or named.</div></div><div><span class="hide-hover"><a href="#p-359">ğŸ”—</a></span><div class="p" id="p-359">For example, in a <a href="#headers">header</a> definition with an ID:
<pre id="c-141"><code>= My asdf{id=asdf qwer}{id_scope=myscope}
</code></pre>
we have:<div><ul id="ul-43">
<li id="l-121">two positional argument: <code>[1]</code> and <code>[My asdf]</code>. Those are surrounded by square brackets <code>[]</code> and have no name</li><li id="l-122"><div class="p" id="p-360">two named arguments: <code>{id=asdf qwer}</code> and <code>{id_scope=myscope}</code>.</div><div class="p" id="p-361">The first one has name <code>id</code> and the mandatory separator <code>=</code>, followed by the value <code>asdf qwer</code>.</div></li></ul></div></div></div><div><span class="hide-hover"><a href="#p-362">ğŸ”—</a></span><div class="p" id="p-362">You can determine if a macro is positional or named by using <a href="#help-macros"><code>--help-macros</code></a>. Its output contains something like:
<pre id="c-142"><code>  "h": {
    "name": "h",
    "positional_args": [
      {
        "name": "level"
      },
      {
        "name": "content"
      }
    ],
    "named_args": {
      "id": {
        "name": "id"
      }
      "id_scope": {
        "name": "id_scope"
      }
    },
</code></pre>
and so we see that <code>level</code> and <code>content</code> are positional arguments, and <code>id</code> and <code>id_scope</code> are named arguments.</div></div><div><span class="hide-hover"><a href="#p-363">ğŸ”—</a></span><div class="p" id="p-363">Generally, positional arguments are few (otherwise it would be hard to know which is which is which), and are almost always used for a given element so tha they save us from typing the name too many times.</div></div><div><span class="hide-hover"><a href="#p-364">ğŸ”—</a></span><div class="p" id="p-364">The order of positional arguments must of course be fixed, but named arguments can go anywhere. We can even mix positional and named arguments however we want, although this is not advised for clarity.</div></div><div><span class="hide-hover"><a href="#p-365">ğŸ”—</a></span><div class="p" id="p-365">The following are therefore all equivalent:
<pre id="c-143"><code>\h[1][My asdf]{id=asdf qwer}{id_scope=myscope}
\h[1][My asdf]{id_scope=myscope}{id=asdf qwer}
\h{id=asdf qwer}{id_scope=myscope}[1][My asdf]
\h{id_scope=myscope}[1]{id=asdf qwer}[My asdf]
</code></pre></div></div><div><span class="hide-hover"><a href="#p-366">ğŸ”—</a></span><div class="p" id="p-366">Just like named arguments, positional arguments are never mandatory.</div></div><div><span class="hide-hover"><a href="#positional-argument-default-values">ğŸ”—</a></span><h5 id="positional-argument-default-values"><a href="#positional-argument-default-values" title="link to this element">16.2.1.1. Positional argument default values</a><span>  | <a href="#toc-positional-argument-default-values">â‡‘ toc</a> | <a href="#positional-vs-named-arguments">â†‘ parent "Positional vs named arguments (<code>[...]</code> vs <code>{key=...}</code>)"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-367">ğŸ”—</a></span><div class="p" id="p-367">Most positional arguments will default to an empty string if not given.</div></div><div><span class="hide-hover"><a href="#p-368">ğŸ”—</a></span><div class="p" id="p-368">However, some positional arguments can have special effects if not given.</div></div><div><span class="hide-hover"><a href="#p-369">ğŸ”—</a></span><div class="p" id="p-369">For example, an anchor with the first positional argument present (the URL), but not the second positional argument (the link text) as in:
<pre id="c-144"><code>\a[http://example.com]
</code></pre><div class="p" id="p-370">which renders as:</div><blockquote id="q-85"><div class="p" id="p-371"><a href="http://example.com">http://example.com</a></div></blockquote>
has the special effect of generating automatic links as in:
<pre id="c-145"><code>\a[http://example.com][http://example.com]
</code></pre></div></div><div><span class="hide-hover"><a href="#p-372">ğŸ”—</a></span><div class="p" id="p-372">This can be contrasted with named aguments, for which there is always a default value, notably for <a href="#boolean-named-arguments">Boolean named arguments</a>.</div></div><div><span class="hide-hover"><a href="#p-373">ğŸ”—</a></span><div class="p" id="p-373">See also: <a href="#links">Links <code>\a</code></a>.</div></div><div><span class="hide-hover"><a href="#mandatory-positional-arguments">ğŸ”—</a></span><h6 id="mandatory-positional-arguments"><a href="#mandatory-positional-arguments" title="link to this element">16.2.1.1.1. mandatory positional arguments</a><span>  | <a href="#toc-mandatory-positional-arguments">â‡‘ toc</a> | <a href="#positional-argument-default-values">â†‘ parent "Positional argument default values"</a></span></h6>
</div><div><span class="hide-hover"><a href="#p-374">ğŸ”—</a></span><div class="p" id="p-374">Some positional arguments are required, and if not given cirodown reports an error and does not render the node.</div></div><div><span class="hide-hover"><a href="#p-375">ğŸ”—</a></span><div class="p" id="p-375">This is for example the <code>level</code> of a <a href="#headers">header</a>.</div></div><div><span class="hide-hover"><a href="#p-376">ğŸ”—</a></span><div class="p" id="p-376">These arguments marked with the <code>mandatory: true</code> <a href="#help-macros"><code>--help-macros</code></a> argument property.</div></div><div><span class="hide-hover"><a href="#boolean-named-arguments">ğŸ”—</a></span><h5 id="boolean-named-arguments"><a href="#boolean-named-arguments" title="link to this element">16.2.1.2. Boolean named arguments</a><span>  | <a href="#toc-boolean-named-arguments">â‡‘ toc</a> | <a href="#positional-vs-named-arguments">â†‘ parent "Positional vs named arguments (<code>[...]</code> vs <code>{key=...}</code>)"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-377">ğŸ”—</a></span><div class="p" id="p-377">Name arguments marked in <a href="#help-macros"><code>--help-macros</code></a> as <code>boolean: true</code> must either:<div><ul id="ul-44">
<li id="l-123">take no value and no <code>=</code> sign, in which case the value is implicitly set to <code>1</code></li><li id="l-124">take value exactly <code>0</code> or <code>1</code></li><li id="l-125">not be given, in which case the default value is the <code>default</code> from <a href="#help-macros"><code>--help-macros</code></a>, or <code>0</code> if such default is not given</li></ul></div></div></div><div><span class="hide-hover"><a href="#p-378">ğŸ”—</a></span><div class="p" id="p-378">For example, <a href="#cross-reference-full-argument">the <code>full</code> argument</a> of <a href="#internal-cross-references">Internal cross references <code>\x</code></a> is correctly written as:
<pre id="c-146"><code>\x[boolean-named-arguments]{full}
</code></pre><div class="p" id="p-379">which renders as:</div><blockquote id="q-86"><div class="p" id="p-380"><a href="#boolean-named-arguments">Section 16.2.1.2. "Boolean named arguments"</a></div></blockquote>
without the <code>=</code> sign, or equivalently:
<pre id="c-147"><code>\x[boolean-named-arguments]{full=1}
</code></pre><div class="p" id="p-381">which renders as:</div><blockquote id="q-87"><div class="p" id="p-382"><a href="#boolean-named-arguments">Section 16.2.1.2. "Boolean named arguments"</a></div></blockquote>
The <code>full=0</code> version is useful in the case of reference targets that unlike <a href="#headers">headers</a> expand the title on the cross reference by default, e.g. <a href="#images">images</a>:
<pre id="c-148"><code>\x[boolean-named-arguments]{full=1}
</code></pre><div class="p" id="p-383">which renders as:</div><blockquote id="q-88"><div class="p" id="p-384"><a href="#boolean-named-arguments">Section 16.2.1.2. "Boolean named arguments"</a></div></blockquote></div></div><div><span class="hide-hover"><a href="#p-385">ğŸ”—</a></span><div class="p" id="p-385">The name "boolean argument" is given by analogy to the <a href="https://stackoverflow.com/questions/16109358/what-is-the-correct-readonly-attribute-syntax-for-input-text-elements/24588427#24588427">"boolean attribute" concept in HTML5</a>.</div></div><div><span class="hide-hover"><a href="#javascript-interface-for-arguments">ğŸ”—</a></span><h4 id="javascript-interface-for-arguments"><a href="#javascript-interface-for-arguments" title="link to this element">16.2.2. JavaScript interface for arguments</a><span>  | <a href="#toc-javascript-interface-for-arguments">â‡‘ toc</a> | <a href="#macro-argument-syntax">â†‘ parent "Macro argument syntax"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-386">ğŸ”—</a></span><div class="p" id="p-386">The JavaScript interface sees arguments as follows:
<pre id="c-149"><code>function macro_name(args)
</code></pre>
where args is a dict such that:<div><ul id="ul-45">
<li id="l-126">optional arguments have the key/value pairs explicitly given on the call</li><li id="l-127"><div class="p" id="p-387">mandatory arguments have a key documented by the API, and the value on the call.</div><div class="p" id="p-388">For example, the link API names its arguments <code>href</code> and <code>text</code>.</div></li></ul></div></div></div><div><span class="hide-hover"><a href="#literal-arguments">ğŸ”—</a></span><h4 id="literal-arguments"><a href="#literal-arguments" title="link to this element">16.2.3. Literal arguments (<code>[[...]]</code> and <code>{{key=...}}</code>)</a><span>  | <a href="#toc-literal-arguments">â‡‘ toc</a> | <a href="#macro-argument-syntax">â†‘ parent "Macro argument syntax"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-389">ğŸ”—</a></span><div class="p" id="p-389">Arguments that are opened with more than one square brackets <code>[</code> or curly braces <code>{</code> are literal arguments.</div></div><div><span class="hide-hover"><a href="#p-390">ğŸ”—</a></span><div class="p" id="p-390">In literal arguments, Cirodown is not parsed, and the entire argument is considered as text until a corresponding close with the same number of characters.</div></div><div><span class="hide-hover"><a href="#p-391">ğŸ”—</a></span><div class="p" id="p-391">Therefore, you cannot have nested content, but it makes it extremely convenient to write <a href="#code">Code (<code>`</code>, <code>``</code>, <code>\c</code> and <code>\C</code>)</a> or <a href="#math">Mathematics <code>$</code>, <code>$$</code>, <code>\m</code> and <code>\M</code></a>.</div></div><div><span class="hide-hover"><a href="#p-392">ğŸ”—</a></span><div class="p" id="p-392">For example, a multiline code block with double open and double close square brackets inside can be enclosed in triple square brackets:
<pre id="c-150"><code>A literal argument looks like this in Cirodown:

\C[[
\C[
A multiline

code block.
]
]]

And another paragraph.
</code></pre><div class="p" id="p-393">which renders as:</div><blockquote id="q-89"><div class="p" id="p-394">A literal argument looks like this in Cirodown:</div><pre id="c-151"><code>\C[
A multiline

code block.
]
</code></pre><div class="p" id="p-395">And another paragraph.</div></blockquote></div></div><div><span class="hide-hover"><a href="#p-396">ğŸ”—</a></span><div class="p" id="p-396">The same works for inline code:
<pre id="c-152"><code>The program \c[[puts("]");]] is very complex.
</code></pre><div class="p" id="p-397">which renders as:</div><blockquote id="q-90"><div class="p" id="p-398">The program <code>puts("]");</code> is very complex.</div></blockquote></div></div><div><span class="hide-hover"><a href="#p-399">ğŸ”—</a></span><div class="p" id="p-399">Within literal blocks, only one thing can be escaped with backslashes are:<div><ul id="ul-46">
<li id="l-128">leading open square bracket <code>[</code></li><li id="l-129">trailing close square bracket <code>]</code></li></ul></div></div></div><div><span class="hide-hover"><a href="#p-400">ğŸ”—</a></span><div class="p" id="p-400">The rule is that:<div><ul id="ul-47">
<li id="l-130">if the first character of a literal argument is a sequence of backslashes (<code></code>), and it is followed by another argument open character (e.g. <code>[</code>, remove the first <code></code> and treat the other characters as regular text</li><li id="l-131">if the last character of a literal argument is a <code></code>, ignore it and treat the following closing character (e.g. <code>]</code>) as regular text</li></ul></div></div></div><div><span class="hide-hover"><a href="#p-401">ğŸ”—</a></span><div class="p" id="p-401">See the following open input/output pairs:
<pre id="c-153"><code>\c[[\ b]]
&lt;code&gt;\ b&lt;/code&gt;

\c[[\a b]]
&lt;code&gt;\a b&lt;/code&gt;

\c[[\[ b]]
&lt;code&gt;[ b&lt;/code&gt;

\c[[\\[ b]]
&lt;code&gt;\[ b&lt;/code&gt;

\c[[\\\[ b]]
&lt;code&gt;\\[ b&lt;/code&gt;
</code></pre>
and close examples:
<pre id="c-154"><code>\c[[a \]]
&lt;code&gt;a \&lt;/code&gt;

\c[[a \]]]
&lt;code&gt;a ]&lt;/code&gt;

\c[[a \\]]]
&lt;code&gt;a \]&lt;/code&gt;
</code></pre></div></div><div><span class="hide-hover"><a href="#argument-leading-newline-removal">ğŸ”—</a></span><h4 id="argument-leading-newline-removal"><a href="#argument-leading-newline-removal" title="link to this element">16.2.4. Argument leading newline removal</a><span>  | <a href="#toc-argument-leading-newline-removal">â‡‘ toc</a> | <a href="#macro-argument-syntax">â†‘ parent "Macro argument syntax"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-402">ğŸ”—</a></span><div class="p" id="p-402">If the very first character of an argument is a newline, then that character is ignored.</div></div><div><span class="hide-hover"><a href="#p-403">ğŸ”—</a></span><div class="p" id="p-403">For example:
<pre id="c-155"><code>\C[[
a

b
]]
</code></pre>
generates something like:
<pre id="c-156"><code>&lt;pre&gt;&lt;code&gt;a

b
&lt;/code&gt;&lt;/pre&gt;
</code></pre>
instead of:
<pre id="c-157"><code>&lt;pre&gt;&lt;code&gt;
a

b
&lt;/code&gt;&lt;/pre&gt;
</code></pre></div></div><div><span class="hide-hover"><a href="#p-404">ğŸ”—</a></span><div class="p" id="p-404">This is extremely convenient to improve the readability of code blocks and similar constructs.</div></div><div><span class="hide-hover"><a href="#p-405">ğŸ”—</a></span><div class="p" id="p-405">If you absolutely need an opening newline, just add a second leading or trailing newline to the macro argument, e.g.:
<pre id="c-158"><code>\C[[

a

b

]]
</code></pre></div></div><div><span class="hide-hover"><a href="#argument-newlines-between-arguments-removal">ğŸ”—</a></span><h4 id="argument-newlines-between-arguments-removal"><a href="#argument-newlines-between-arguments-removal" title="link to this element">16.2.5. Argument newlines between arguments removal</a><span>  | <a href="#toc-argument-newlines-between-arguments-removal">â‡‘ toc</a> | <a href="#macro-argument-syntax">â†‘ parent "Macro argument syntax"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-406">ğŸ”—</a></span><div class="p" id="p-406">The macro name and the first argument, and two consecutive arguments, can be optionally separated by exactly one newline character, e.g.:
<pre id="c-159"><code>\h[2]
{id-scope=true}
[Design goals]
</code></pre>
is equivalent to:
<pre id="c-160"><code>\h[2]{id-scope=true}[Design goals]
</code></pre>
and this non-recommended mixed style:
<pre id="c-161"><code>\h[2]{id-scope=true}
[Design goals]
</code></pre>
This allows to greatly improve the readability of long argument lists by having them one per line.</div></div><div><span class="hide-hover"><a href="#p-407">ğŸ”—</a></span><div class="p" id="p-407">There is one exception to this however: inside an <a href="#headers">insane header</a>, any newline is interpreted as the end of the insane header. This is why the following works as expected:
<pre id="c-162"><code>== My header 2 `some code`
{id=asdf}
</code></pre>
and the <code>id</code> gets assigned to the header rather than the trailing code element.</div></div><div><span class="hide-hover"><a href="#escape-characters">ğŸ”—</a></span><h4 id="escape-characters"><a href="#escape-characters" title="link to this element">16.2.6. Escape characters</a><span>  | <a href="#toc-escape-characters">â‡‘ toc</a> | <a href="#macro-argument-syntax">â†‘ parent "Macro argument syntax"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-408">ğŸ”—</a></span><div class="p" id="p-408">For <a href="#literal-arguments">non-literal macro arguments</a>, you have to use a backslash to escape:<div><ul id="ul-48">
<li id="l-132"><code></code>: backslashes start macros</li><li id="l-133"><code></code> and <code></code>: open and close <a href="#positional-vs-named-arguments">positional macro arguments</a></li><li id="l-134"><code></code> and <code></code>: open and close <a href="#positional-vs-named-arguments">optional macro arguments</a></li><li id="l-135"><code>$</code> (dollar sign)</li></ul></div>: <a href="#insane-macro-shortcuts">insane macro shortcut</a> for <a href="#math">Math</a><div><ul id="ul-49">
<li id="l-136"><code>`</code> (backtick)</li></ul></div>: <a href="#insane-macro-shortcuts">insane macro shortcut</a> for <a href="#code">code</a></div></div><div><span class="hide-hover"><a href="#p-409">ğŸ”—</a></span><div class="p" id="p-409">The escape rules for literal arguments are described at: <a href="#literal-arguments">Section 16.2.3. "Literal arguments (<code>[[...]]</code> and <code>{{key=...}}</code>)"</a>.</div></div><div><span class="hide-hover"><a href="#p-410">ğŸ”—</a></span><div class="p" id="p-410">This is good for short arguments of regular text, but for longer blocks of <a href="#code">Code (<code>`</code>, <code>``</code>, <code>\c</code> and <code>\C</code>)</a> or <a href="#math">Mathematics <code>$</code>, <code>$$</code>, <code>\m</code> and <code>\M</code></a>, you may want to use <a href="#literal-arguments">Literal arguments (<code>[[...]]</code> and <code>{{key=...}}</code>)</a></div></div><div><span class="hide-hover"><a href="#auto-parent">ğŸ”—</a></span><h4 id="auto-parent"><a href="#auto-parent" title="link to this element">16.2.7. <code>auto_parent</code> macro property</a><span>  | <a href="#toc-auto-parent">â‡‘ toc</a> | <a href="#macro-argument-syntax">â†‘ parent "Macro argument syntax"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-411">ğŸ”—</a></span><div class="p" id="p-411">Some sequences of macros such as <code>l</code> from <a href="#lists">Lists <code>\l</code></a> and <code>tr</code> from <a href="#tables">Tables <code>\table</code>, <code>\tr</code>, <code>\th</code> and <code>\td</code></a> automatically generate implicit parents, e.g.:
<pre id="c-163"><code>\ul[
\l[aa]
\l[bb]
]
</code></pre>
parses exactly like:
<pre id="c-164"><code>\l[aa]
\l[bb]
</code></pre></div></div><div><span class="hide-hover"><a href="#p-412">ğŸ”—</a></span><div class="p" id="p-412">The children are always added as arguments of the <code>content</code> argument of the implicit parent.</div></div><div><span class="hide-hover"><a href="#p-413">ğŸ”—</a></span><div class="p" id="p-413">If present, the <code>auto_parent</code> macro property determines which auto-parent gets added to those macros.</div></div><div><span class="hide-hover"><a href="#remove-whitespace-children">ğŸ”—</a></span><h4 id="remove-whitespace-children"><a href="#remove-whitespace-children" title="link to this element">16.2.8. <code>remove_whitespace_children</code> macro argument property</a><span>  | <a href="#toc-remove-whitespace-children">â‡‘ toc</a> | <a href="#macro-argument-syntax">â†‘ parent "Macro argument syntax"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-414">ğŸ”—</a></span><div class="p" id="p-414">In HTML, certain elements such as <code>&lt;ul&gt;</code> cannot have any <code>text</code> nodes in them, and any whitespace is ignored, see <a href="https://stackoverflow.com/questions/2161337/can-we-use-any-other-tag-inside-ul-along-with-li/60885802#60885802">https://stackoverflow.com/questions/2161337/can-we-use-any-other-tag-inside-ul-along-with-li/60885802#60885802</a>.</div></div><div><span class="hide-hover"><a href="#p-415">ğŸ”—</a></span><div class="p" id="p-415">A similar concept applies to Cirodown, e.g.:
<pre id="c-165"><code>\ul[
\l[aa]
\l[bb]
]
</code></pre>
does not parse as:
<pre id="c-166"><code>\ul[\l[aa]&lt;NEWLINE&gt;\l[bb]&lt;NEWLINE&gt;]
</code></pre>
but rather as:
<pre id="c-167"><code>\ul[\l[aa]\l[bb]]
</code></pre>
because the <code>content</code> argument of <code>ul</code> is marked with <code>remove_whitespace_children</code> and automatically removes any whitespace children (such as a newline) as a result.</div></div><div><span class="hide-hover"><a href="#p-416">ğŸ”—</a></span><div class="p" id="p-416">This also applies to consecutive sequences of <a href="#auto-parent"><code>auto_parent</code> macro property</a> macros, e.g.:
<pre id="c-168"><code>\l[aa]
\l[bb]
</code></pre>
also does not include the newline between the list items.</div></div><div><span class="hide-hover"><a href="#p-417">ğŸ”—</a></span><div class="p" id="p-417">The definition of whitespace is the same as the ASCII whitespace definition of HTML5: <code> \r\n\f\t</code>.</div></div><div><span class="hide-hover"><a href="#macro-capitalization-for-block-vs-inline">ğŸ”—</a></span><h3 id="macro-capitalization-for-block-vs-inline"><a href="#macro-capitalization-for-block-vs-inline" title="link to this element">16.3. Macro capitalization for block vs inline</a><span>  | <a href="#toc-macro-capitalization-for-block-vs-inline">â‡‘ toc</a> | <a href="#cirodown-syntax">â†‘ parent "Cirodown syntax"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-418">ğŸ”—</a></span><div class="p" id="p-418">This is just a naming convention without any magic attached to it. It is currently used for macros such as:<div><ul id="ul-50">
<li id="l-137"><a href="#math">Mathematics <code>$</code>, <code>$$</code>, <code>\m</code> and <code>\M</code></a></li><li id="l-138"><a href="#code">Code (<code>`</code>, <code>``</code>, <code>\c</code> and <code>\C</code>)</a></li><li id="l-139"><a href="#comments">Comments</a></li></ul></div></div></div><div><span class="hide-hover"><a href="#p-419">ğŸ”—</a></span><div class="p" id="p-419">The naming convention is as follows:<div><ul id="ul-51">
<li id="l-140">if there is both an inline and block version of something, use the capitalization to distinguish between them</li><li id="l-141">otherwise, just name it lowercase, even if it is block</li></ul></div></div></div><div><span class="hide-hover"><a href="#p-420">ğŸ”—</a></span><div class="p" id="p-420">Maybe it would be saner to go "block if and only if uppercase", and automate that in the code. But it means more shift pressing...</div></div><div><span class="hide-hover"><a href="#plaintext-conversion">ğŸ”—</a></span><h3 id="plaintext-conversion"><a href="#plaintext-conversion" title="link to this element">16.4. Plaintext conversion</a><span>  | <a href="#toc-plaintext-conversion">â‡‘ toc</a> | <a href="#cirodown-syntax">â†‘ parent "Cirodown syntax"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-421">ğŸ”—</a></span><div class="p" id="p-421">In some cases, we want to extract plaintext versions of complex nested elements.</div></div><div><span class="hide-hover"><a href="#p-422">ğŸ”—</a></span><div class="p" id="p-422">TODO implement:
<pre id="c-169"><code>For example, when the \x[internal-cross-references][ID of a node is derived from its title], we don't want the default element to have complex HTML tags on it:
\cirodown_example[[
\x[title-with-code]

\Image[image.jpg]
{title=title `with code`}
]]
In this example, see how the contents of the code block \c[`with code`] were rendered as plaintext and used for the ID.
</code></pre></div></div><div><span class="hide-hover"><a href="#security">ğŸ”—</a></span><h3 id="security"><a href="#security" title="link to this element">16.5. Security</a><span>  | <a href="#toc-security">â‡‘ toc</a> | <a href="#cirodown-syntax">â†‘ parent "Cirodown syntax"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-423">ğŸ”—</a></span><div class="p" id="p-423">Cirodown is designed to be XSS safe by default. If we add any non-XSS safe constructs, these should be enabled with a non-default flag.</div></div><div><span class="hide-hover"><a href="#p-424">ğŸ”—</a></span><div class="p" id="p-424">Of course, we are walking on eggs, and this is hard to assert, so the best thing to do later on will be to parse the output e.g. with <a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMParser"><code>DOMParser</code></a> to ensure that it is valid and does not contain any <code>script</code> tags, but it is not as simple as that: <a href="https://stackoverflow.com/questions/37435077/execute-javascript-for-xss-without-script-tags/61588322#61588322">https://stackoverflow.com/questions/37435077/execute-javascript-for-xss-without-script-tags/61588322#61588322</a></div></div><div><span class="hide-hover"><a href="#p-425">ğŸ”—</a></span><div class="p" id="p-425">About server safety, we have to think about it. E.g. stuff like <a href="#prepublish"><code>prepublish</code></a> already allows ACE.</div></div><div><span class="hide-hover"><a href="#tooling">ğŸ”—</a></span><h2 id="tooling"><a href="#tooling" title="link to this element">17. Tooling</a><span>  | <a href="#toc-tooling">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#p-426">ğŸ”—</a></span><div class="p" id="p-426">Unlike all languages which rely on ad-hoc tooling, we will support every single tool that is required and feasible to be in this repository in this repository, in a centralized manner.</div></div><div><span class="hide-hover"><a href="#cirodown-executable">ğŸ”—</a></span><h3 id="cirodown-executable"><a href="#cirodown-executable" title="link to this element">17.1. <code>cirodown</code> executable</a><span>  | <a href="#toc-cirodown-executable">â‡‘ toc</a> | <a href="#tooling">â†‘ parent "Tooling"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-427">ğŸ”—</a></span><div class="p" id="p-427">Convert a <code>.ciro</code> file to HTML and output the HTML to stdout:
<pre id="c-170"><code>cirodown README.ciro
</code></pre></div></div><div><span class="hide-hover"><a href="#p-428">ğŸ”—</a></span><div class="p" id="p-428">Convert all <code>.ciro</code> files in a directory to HTML files next to each corresponding <code>.ciro</code> file, e.g. <code>somefile.ciro</code> to <code>somefile.html</code>:
<pre id="c-171"><code>cirodown .
</code></pre></div></div><div><span class="hide-hover"><a href="#p-429">ğŸ”—</a></span><div class="p" id="p-429">In order to resolve <a href="#internal-cross-file-references">Internal cross file references</a>, this actually does two passes:<div><ul id="ul-52">
<li id="l-142">first an ID extraction pass, which parses all inputs and dumps their IDs to the ID database</li><li id="l-143">then a second render pass, which uses the IDs in the ID database</li></ul></div></div></div><div><span class="hide-hover"><a href="#p-430">ğŸ”—</a></span><div class="p" id="p-430">Convert a <code>.ciro</code> file from stdin to HTML and output the contents of <code>&lt;body&gt;</code> to stdout:
<pre id="c-172"><code>printf 'ab\ncd\n' | cirodown --body-only
</code></pre></div></div><div><span class="hide-hover"><a href="#index-files">ğŸ”—</a></span><h4 id="index-files"><a href="#index-files" title="link to this element">17.1.1. Index files</a><span>  | <a href="#toc-index-files">â‡‘ toc</a> | <a href="#cirodown-executable">â†‘ parent "<code>cirodown</code> executable"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-431">ğŸ”—</a></span><div class="p" id="p-431">The following basenames are considered "index files":<div><ul id="ul-53">
<li id="l-144"><code>README.ciro</code></li><li id="l-145"><code>index.ciro</code></li></ul></div></div></div><div><span class="hide-hover"><a href="#p-432">ğŸ”—</a></span><div class="p" id="p-432">Those basenames have the following magic properties:<div><ul id="ul-54">
<li id="l-146">the default output file name for an index file in HTML output is always <code>index.html</code>, including that of <code>README.ciro</code>. This way it will appear on both the root of the HTML output and on the GitHub home page once GitHub adds Cirodown support.</li><li id="l-147">the default <a href="#the-toplevel-header">toplevel header</a> ID of an index files is derived from the parent directory basename rather than from the source file basename</li></ul></div></div></div><div><span class="hide-hover"><a href="#cirodown-executable-options">ğŸ”—</a></span><h4 id="cirodown-executable-options"><a href="#cirodown-executable-options" title="link to this element">17.1.2. <code>cirodown</code> executable options</a><span>  | <a href="#toc-cirodown-executable-options">â‡‘ toc</a> | <a href="#cirodown-executable">â†‘ parent "<code>cirodown</code> executable"</a></span></h4>
</div><div><span class="hide-hover"><a href="#dry-run">ğŸ”—</a></span><h5 id="dry-run"><a href="#dry-run" title="link to this element">17.1.2.1. <code>--dry-run</code></a><span>  | <a href="#toc-dry-run">â‡‘ toc</a> | <a href="#cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-433">ğŸ”—</a></span><div class="p" id="p-433">The <code>--dry-run</code> option is a good way to debug <a href="#publish"><code>--publish</code> option</a>, as it builds the publish output files without doing any git commands that would be annoying to revert. So after doing:
<pre id="c-173"><code>./cirodown --dry-run --publish .
</code></pre>
you can just go and inspect the generated HTML to see what would get pushed at:
<pre id="c-174"><code>cd out/publish/out/publish/
</code></pre></div></div><div><span class="hide-hover"><a href="#generate">ğŸ”—</a></span><h5 id="generate"><a href="#generate" title="link to this element">17.1.2.2. <code>--generate</code></a><span>  | <a href="#toc-generate">â‡‘ toc</a> | <a href="#cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-434">ğŸ”—</a></span><div class="p" id="p-434">Generate a simple repository template for a new project.</div></div><div><span class="hide-hover"><a href="#p-435">ğŸ”—</a></span><div class="p" id="p-435">This includes common files that almost all projects will want to have, e.g.:<div><ul id="ul-55">
<li id="l-148"><code>package.json</code> specifying the Cirodown version</li><li id="l-149"><code>.gitignore</code> to prevent output from being committed accidentally</li></ul></div></div></div><div><span class="hide-hover"><a href="#p-436">ğŸ”—</a></span><div class="p" id="p-436">The output provides a hello world setup that is immediately ready to be published e.g. <a href="#publish-to-github-pages">to GitHub pages</a>.</div></div><div><span class="hide-hover"><a href="#generate-multifile">ğŸ”—</a></span><h5 id="generate-multifile"><a href="#generate-multifile" title="link to this element">17.1.2.3. <code>--generate-multifile</code></a><span>  | <a href="#toc-generate-multifile">â‡‘ toc</a> | <a href="#cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-437">ğŸ”—</a></span><div class="p" id="p-437">Like <a href="#generate"><code>--generate</code></a>, but generate a more complex template that serves as a good starting point for a multifile website.</div></div><div><span class="hide-hover"><a href="#help-macros">ğŸ”—</a></span><h5 id="help-macros"><a href="#help-macros" title="link to this element">17.1.2.4. <code>--help-macros</code></a><span>  | <a href="#toc-help-macros">â‡‘ toc</a> | <a href="#cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-438">ğŸ”—</a></span><div class="p" id="p-438">You can get an overview of all macros in JSON format with:
<pre id="c-175"><code>cirodown --help-macros
</code></pre></div></div><div><span class="hide-hover"><a href="#html-embed">ğŸ”—</a></span><h5 id="html-embed"><a href="#html-embed" title="link to this element">17.1.2.5. <code>--html-embed</code></a><span>  | <a href="#toc-html-embed">â‡‘ toc</a> | <a href="#cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-439">ğŸ”—</a></span><div class="p" id="p-439">Embed as many external resources as possible into a single HTML file.</div></div><div><span class="hide-hover"><a href="#p-440">ğŸ”—</a></span><div class="p" id="p-440">The use case for this option is to produce a single HTML file for an entire build that is fully self contained, and can therefore be given to consumers and viewed offline, much like a PDF.</div></div><div><span class="hide-hover"><a href="#p-441">ğŸ”—</a></span><div class="p" id="p-441">Examples of embeddings done:<div><ul id="ul-56">
<li id="l-150"><div class="p" id="p-442">CSS and JavaScript are copy pasted in place into the HTML.</div><div class="p" id="p-443">The default built-in CSS and JavaScript files used by Cirodown (e.g. the KaTeX CSS <a href="#math">used for mathematics</a>) are currently all automatically downloaded as NPM package dependencies to cirodown</div><div class="p" id="p-444">Without <code>--html-embed</code>, those CSS and JavaScript use their main cloud CDN URLs, and therefore require Internet connection to view the generated documents.</div><div class="p" id="p-445">The embedded version of the document can be viewed offline however.</div></li><li id="l-151"><div class="p" id="p-446"><a href="#images">images</a> are downloaded if needed and embedded as <code>data:</code> URLs.</div><div class="p" id="p-447">Images that are managed by the project itself and already locally present, such as those inside the project itself or due to <a href="#media-source-type"><code>media_source_type</code></a> usually don't require download.</div><div class="p" id="p-448">For images linked directly from the web, we maintain a local download cache, and skip downloads if the image is already in the cache.</div><div class="p" id="p-449">To re-download due to image updates, use either:</div><div><ul id="ul-57">
<li id="l-152"><code>--asset-cache-update</code>: download all images such that the local disk timestamp is older than the HTTP modification date with <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Modified-Since"><code>If-Modified-Since</code></a></li><li id="l-153"><code>--asset-cache-update-force</code>: forcefully redownload all assets</li></ul></div></li></ul></div></div></div><div><span class="hide-hover"><a href="#p-450">ğŸ”—</a></span><div class="p" id="p-450">Keep in mind that certain things can never be embedded, e.g.:<div><ul id="ul-58">
<li id="l-154">YouTube videos, since YouTube does not offer any download API</li></ul></div></div></div><div><span class="hide-hover"><a href="#html-single-page">ğŸ”—</a></span><h5 id="html-single-page"><a href="#html-single-page" title="link to this element">17.1.2.6. <code>--html-single-page</code></a><span>  | <a href="#toc-html-single-page">â‡‘ toc</a> | <a href="#cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-451">ğŸ”—</a></span><div class="p" id="p-451">If given:<div><ul id="ul-59">
<li id="l-155">the <a href="#includes"><code>include</code></a> macro parses the target file to be included and includes it in-place
</li><li id="l-156"><div class="p" id="p-452"><a href="#internal-cross-file-references">Internal cross file references</a> are disabled, and the cross file ID database does not get updated.</div><div class="p" id="p-453">It should be possible to work around this, but we are starting with the simplest implementation that forbids it.</div><div class="p" id="p-454">The problem those cause is that the IDs of included headers show as duplicate IDs of those in the ID database.</div><div class="p" id="p-455">This should be OK to start with because the more common use case with <code>--html-sinle-page</code> is that of including all headers in a single document.
</div></li></ul></div></div></div><div><span class="hide-hover"><a href="#p-456">ğŸ”—</a></span><div class="p" id="p-456">Otherwise, <code>include</code> only adds the headers of the other file to the table of contents of the current one, but not the body of the other file. The ToC entries then point to the headers of the included external files.</div></div><div><span class="hide-hover"><a href="#p-457">ğŸ”—</a></span><div class="p" id="p-457">You may want to use this option together with <a href="#html-embed"><code>--html-embed</code></a> to produce fully self-contained individual HTML files for your project.</div></div><div><span class="hide-hover"><a href="#html-x-no-extension">ğŸ”—</a></span><h5 id="html-x-no-extension"><a href="#html-x-no-extension" title="link to this element">17.1.2.7. <code>--no-html-x-extension</code></a><span>  | <a href="#toc-html-x-no-extension">â‡‘ toc</a> | <a href="#cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-458">ğŸ”—</a></span><div class="p" id="p-458">If not given, <a href="#internal-cross-references">Internal cross references <code>\x</code></a> render with the <code>.html</code> extension as in:
<pre id="c-176"><code>&lt;a href=not-readme.html#h2-in-not-the-readme&gt;
</code></pre></div></div><div><span class="hide-hover"><a href="#p-459">ğŸ”—</a></span><div class="p" id="p-459">This way, those links will work when rendering locally to <code>.html</code> files which is the default behaviour of:
<pre id="c-177"><code>cirodown .
</code></pre></div></div><div><span class="hide-hover"><a href="#p-460">ğŸ”—</a></span><div class="p" id="p-460">If given however, the links render without the <code>.html</code> as in:
<pre id="c-178"><code>&lt;a href=not-readme#h2-in-not-the-readme&gt;
</code></pre>
which is what is needed for servers such as GitHub Pages, which automatically remove the <code>.html</code> extension from paths.</div></div><div><span class="hide-hover"><a href="#p-461">ğŸ”—</a></span><div class="p" id="p-461">This option is automatically implied when publishing to targets that remove the <code>.html</code> extension such as GitHub pages.</div></div><div><span class="hide-hover"><a href="#outfile">ğŸ”—</a></span><h5 id="outfile"><a href="#outfile" title="link to this element">17.1.2.8. <code>--outfile &lt;outfie&gt;</code></a><span>  | <a href="#toc-outfile">â‡‘ toc</a> | <a href="#cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-462">ğŸ”—</a></span><div class="p" id="p-462">Save the output to a given file instead of outputting to stdout:
<pre id="c-179"><code>./cirodown --outfile not-readme.html not-readme.ciro
</code></pre></div></div><div><span class="hide-hover"><a href="#p-463">ğŸ”—</a></span><div class="p" id="p-463">The generated output is slightly different than that of:
<pre id="c-180"><code>./cirodown not-readme.ciro &gt; not-readme.html
</code></pre>
because with <code>--outfile</code> we know where the output is going, and so we can generate relative includes to default CSS/JavaScript files.</div></div><div><span class="hide-hover"><a href="#publish">ğŸ”—</a></span><h5 id="publish"><a href="#publish" title="link to this element">17.1.2.9. <code>--publish</code></a><span>  | <a href="#toc-publish">â‡‘ toc</a> | <a href="#cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-464">ğŸ”—</a></span><div class="p" id="p-464">Cirodown tooling is so amazing that we also take care of the HTML publishing for you!</div></div><div><span class="hide-hover"><a href="#p-465">ğŸ”—</a></span><div class="p" id="p-465">Once publish target is properly setup, all you have to do is run:
<pre id="c-181"><code>git add README.ciro
git commit -m 'more content!'
cirodown --publish
</code></pre>
and your changes will be published to the  default target specified in <a href="#cirodown-json"><code>cirodown.json</code></a>.</div></div><div><span class="hide-hover"><a href="#p-466">ğŸ”—</a></span><div class="p" id="p-466">If not specified, the default target is <a href="#publish-to-github-pages">Publish to GitHub Pages</a>.</div></div><div><span class="hide-hover"><a href="#p-467">ğŸ”—</a></span><div class="p" id="p-467">Only changes committed to Git are pushed.</div></div><div><span class="hide-hover"><a href="#p-468">ğŸ”—</a></span><div class="p" id="p-468">Files that <code>cirodown</code> knows how to process get processed and only their outputs are added to the published repo, those file types are:<div><ul id="ul-60">
<li id="l-157"><code>.ciro</code> files are converted to <code>.html</code></li><li id="l-158"><code>.scss</code> files are converted to <code>.css</code>
</li></ul></div>Every other Git-tracked file is pushed as is.</div></div><div><span class="hide-hover"><a href="#p-469">ğŸ”—</a></span><div class="p" id="p-469">When <code>--publish</code> is given, stdin input is not accepted, and so the current directory is built by default, i.e. the following two are equivalent:
<pre id="c-182"><code>./cirodown --publish
./cirodown --publish .
</code></pre></div></div><div><span class="hide-hover"><a href="#p-470">ğŸ”—</a></span><div class="p" id="p-470">Publishing only happens if the build has no errors.</div></div><div><span class="hide-hover"><a href="#publish-to-github-pages">ğŸ”—</a></span><h6 id="publish-to-github-pages"><a href="#publish-to-github-pages" title="link to this element">17.1.2.9.1. Publish to GitHub Pages</a><span>  | <a href="#toc-publish-to-github-pages">â‡‘ toc</a> | <a href="#publish">â†‘ parent "<code>--publish</code>"</a></span></h6>
</div><div><span class="hide-hover"><a href="#p-471">ğŸ”—</a></span><div class="p" id="p-471"><a href="https://pages.github.com/">GitHub pages</a> is the default Cirodown publish target.</div></div><div><span class="hide-hover"><a href="#p-472">ğŸ”—</a></span><div class="p" id="p-472">The first step is of course to create the GitHub repository that will contain your GitHub pages as usual.</div></div><div><span class="hide-hover"><a href="#p-473">ğŸ”—</a></span><div class="p" id="p-473">Then, if you want to publish your root user page, which appears at <code>/</code> (e.g. <a href="https://github.com/cirosantilli/cirosantilli.github.io">https://github.com/cirosantilli/cirosantilli.github.io</a> for the user <code>cirosantilli</code>), GitHub annoyingly forces you to use the <code>master</code> branch for the HTML output:<div><ul id="ul-61">
<li id="l-159"><a href="https://github.com/isaacs/github/issues/212">https://github.com/isaacs/github/issues/212</a></li><li id="l-160"><a href="https://stackoverflow.com/questions/31439951/how-can-i-use-a-branch-other-than-master-for-user-github-pages">https://stackoverflow.com/questions/31439951/how-can-i-use-a-branch-other-than-master-for-user-github-pages</a></li></ul></div></div></div><div><span class="hide-hover"><a href="#p-474">ğŸ”—</a></span><div class="p" id="p-474">This means that you must place your <code>.ciro</code> input files in a branch other than <code>master</code> to clear up <code>master</code> for the generated HTML.</div></div><div><span class="hide-hover"><a href="#p-475">ğŸ”—</a></span><div class="p" id="p-475"><code>cirodown</code> automatically detects if your repository ois a root repository or not by parsing <code>git remote</code> output, but you must setup the branches correctly yourself.</div></div><div><span class="hide-hover"><a href="#p-476">ğŸ”—</a></span><div class="p" id="p-476">So on a new repository, you must <a href="https://stackoverflow.com/questions/42871542/how-to-create-a-git-repository-with-the-default-branch-name-other-than-master">first checkout to a different branch</a> as in:
<pre id="c-183"><code>git init
git checkout -b dev
</code></pre>
or to move an existing repository to a non-master branch:
<pre id="c-184"><code>git checkout -b dev
git push origin dev:dev
git branch -D master
git push --delete origin master
</code></pre></div></div><div><span class="hide-hover"><a href="#p-477">ğŸ”—</a></span><div class="p" id="p-477">You then will also want to set your default repository branch to <code>dev</code> in the settings for that repository: <a href="https://help.github.com/en/github/administering-a-repository/setting-the-default-branch">https://help.github.com/en/github/administering-a-repository/setting-the-default-branch</a></div></div><div><span class="hide-hover"><a href="#p-478">ğŸ”—</a></span><div class="p" id="p-478">For non-root GitHub pages, no special setup is needed, <code>cirodown</code> automatically populates the <code>gh-pages</code> branch for you.</div></div><div><span class="hide-hover"><a href="#p-479">ğŸ”—</a></span><div class="p" id="p-479">Once the repository branch is setup, we can just <a href="#generate">generate the repository template with <code>--generate</code></a>, make a commit, and immediately publish!
<pre id="c-185"><code>cirodown --generate
git add .
git commit --message 'initial commit from template'
cirodown --publish .
</code></pre></div></div><div><span class="hide-hover"><a href="#publish-commit">ğŸ”—</a></span><h5 id="publish-commit"><a href="#publish-commit" title="link to this element">17.1.2.10. <code>--publish-commit &lt;commit-message&gt;</code></a><span>  | <a href="#toc-publish-commit">â‡‘ toc</a> | <a href="#cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-480">ğŸ”—</a></span><div class="p" id="p-480">Like <a href="#publish"><code>--publish</code></a>, but also automatically:<div><ul id="ul-62">
<li id="l-161"><code>git add -u</code> to automatically add change to any files that have been previously git tracked</li><li id="l-162"><code>git commit -m &lt;commit-message&gt;</code> to create a new commit with those changes</li></ul></div></div></div><div><span class="hide-hover"><a href="#p-481">ğŸ”—</a></span><div class="p" id="p-481">This allows you to publish your changes live in a single command such as:
<pre id="c-186"><code>cirodown --publish-commit 'my amazing change' .
</code></pre></div></div><div><span class="hide-hover"><a href="#p-482">ğŸ”—</a></span><div class="p" id="p-482">With great power comes great responsibility of course, but who cares!</div></div><div><span class="hide-hover"><a href="#watch">ğŸ”—</a></span><h5 id="watch"><a href="#watch" title="link to this element">17.1.2.11. <code>--watch</code></a><span>  | <a href="#toc-watch">â‡‘ toc</a> | <a href="#cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-483">ğŸ”—</a></span><div class="p" id="p-483">Don't quit <code>cirodown</code> immediately.</div></div><div><span class="hide-hover"><a href="#p-484">ğŸ”—</a></span><div class="p" id="p-484">Instead, watch the selected file or directory for changes, and rebuild individual files when changes are detected.</div></div><div><span class="hide-hover"><a href="#p-485">ğŸ”—</a></span><div class="p" id="p-485">Watch a single file:
<pre id="c-187"><code>cirodown --watch README.ciro
</code></pre></div></div><div><span class="hide-hover"><a href="#p-486">ğŸ”—</a></span><div class="p" id="p-486">Now you can just edit <code>README.ciro</code>, save the file in your editor, and refresh the webpage and your change should be visible, no need to run a <code>cirodown</code> command excplicitly every time.</div></div><div><span class="hide-hover"><a href="#p-487">ğŸ”—</a></span><div class="p" id="p-487">TODO: integrate Live Preview: <a href="https://asciidoctor.org/docs/editing-asciidoc-with-live-preview/">https://asciidoctor.org/docs/editing-asciidoc-with-live-preview/</a> to also dispense the browser refresh.</div></div><div><span class="hide-hover"><a href="#p-488">ğŸ”—</a></span><div class="p" id="p-488">Watch every <code>.ciro</code> file in an entire directory:
<pre id="c-188"><code>cirodown --watch .
</code></pre></div></div><div><span class="hide-hover"><a href="#p-489">ğŸ”—</a></span><div class="p" id="p-489">This automatically first does a first ID extraction pass on all files to support <a href="#internal-cross-file-references">Internal cross file references</a>.</div></div><div><span class="hide-hover"><a href="#p-490">ğŸ”—</a></span><div class="p" id="p-490">The output of conversion to <code>.html</code> files is saved automatically instead of outputting it to stdout as done without <code>--watch</code>.</div></div><div><span class="hide-hover"><a href="#p-491">ğŸ”—</a></span><div class="p" id="p-491">Exit by entering Ctrl + C on the terminal.</div></div><div><span class="hide-hover"><a href="#template">ğŸ”—</a></span><h5 id="template"><a href="#template" title="link to this element">17.1.2.12. <code>--template</code></a><span>  | <a href="#toc-template">â‡‘ toc</a> | <a href="#cirodown-executable-options">â†‘ parent "<code>cirodown</code> executable options"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-492">ğŸ”—</a></span><div class="p" id="p-492">Select a custom <a href="https://github.com/harttle/liquidjs">Liquid template</a> file for the output.</div></div><div><span class="hide-hover"><a href="#p-493">ğŸ”—</a></span><div class="p" id="p-493">The recommended file name for this file is <code>main.liquid.html</code>, which is already ignored by default from the published output.</div></div><div><span class="hide-hover"><a href="#p-494">ğŸ”—</a></span><div class="p" id="p-494">If not given, the default template at one point was:
<pre id="c-189"><code>&lt;!doctype html&gt;
&lt;html lang=en&gt;
&lt;head&gt;
&lt;meta charset=utf-8&gt;
&lt;title&gt;{{ title }}&lt;/title&gt;
&lt;style&gt;{{ style }}&lt;/style&gt;
&lt;body class="cirodown"&gt;
{{ body }}
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
This will get out of sync sooner or later with the code, but this should still serve as a good base example for this documentation.</div></div><div><span class="hide-hover"><a href="#p-495">ğŸ”—</a></span><div class="p" id="p-495">Defined variables:<div><ul id="ul-63">
<li id="l-163"><code>body</code>: the rendered body</li><li id="l-164"><code>git_sha</code>: SHA of the latest git commit of the source code if in a git repository</li><li id="l-165"><code>style</code>: default Cirodown stylesheets</li><li id="l-166"><code>title</code></li></ul></div></div></div><div><span class="hide-hover"><a href="#p-496">ğŸ”—</a></span><div class="p" id="p-496">We pick Liquid because it is server-side safe: if we ever some day offer a compilation service, Liquid is designed to prevent arbitrary code execution and infinite loops in templates.</div></div><div><span class="hide-hover"><a href="#cirodown-json">ğŸ”—</a></span><h4 id="cirodown-json"><a href="#cirodown-json" title="link to this element">17.1.3. <code>cirodown.json</code></a><span>  | <a href="#toc-cirodown-json">â‡‘ toc</a> | <a href="#cirodown-executable">â†‘ parent "<code>cirodown</code> executable"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-497">ğŸ”—</a></span><div class="p" id="p-497">Cirodown configuration file that affects the behaviour of cirodown for all files in the directory.</div></div><div><span class="hide-hover"><a href="#p-498">ğŸ”—</a></span><div class="p" id="p-498"><code>cirodown.json</code> not used for input from stdin, since we are mostly doing quick tests in that case.</div></div><div><span class="hide-hover"><a href="#media-base-url">ğŸ”—</a></span><h5 id="media-base-url"><a href="#media-base-url" title="link to this element">17.1.3.1. <code>media_base_url</code></a><span>  | <a href="#toc-media-base-url">â‡‘ toc</a> | <a href="#cirodown-json">â†‘ parent "<code>cirodown.json</code>"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-499">ğŸ”—</a></span><div class="p" id="p-499">TODO implement set the base URL where media will be served from.</div></div><div><span class="hide-hover"><a href="#p-500">ğŸ”—</a></span><div class="p" id="p-500">Default: for a GitHub repository called <code>my-tutorial</code>, append the <code>-media</code> suffix and use <code>my-tutorial-media</code>.</div></div><div><span class="hide-hover"><a href="#p-501">ğŸ”—</a></span><div class="p" id="p-501">Further rationale at: <a href="#where-to-store-images">Where to store images</a>.</div></div><div><span class="hide-hover"><a href="#media-source-type">ğŸ”—</a></span><h5 id="media-source-type"><a href="#media-source-type" title="link to this element">17.1.3.2. <code>media_source_type</code></a><span>  | <a href="#toc-media-source-type">â‡‘ toc</a> | <a href="#cirodown-json">â†‘ parent "<code>cirodown.json</code>"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-502">ğŸ”—</a></span><div class="p" id="p-502">TODO implement:<div><ul id="ul-64">
<li id="l-167"><code>local</code>: tracked in the current Git repository, no further magic is done
</li><li id="l-168"><div class="p" id="p-503">  <code>media_repo</code>: tracked in a separate media repository, defaults to <code>../&lt;project-name&gt;-media/</code></div><div class="p" id="p-504">  When <a href="#publish">publishing</a>, Cirodown searches for files that were used in the build but not added to the media directory, and automatically does a <code>git add</code>, <code>commit</code> and <code>push</code> for you!
</div></li></ul></div></div></div><div><span class="hide-hover"><a href="#prepublish">ğŸ”—</a></span><h5 id="prepublish"><a href="#prepublish" title="link to this element">17.1.3.3. <code>prepublish</code></a><span>  | <a href="#toc-prepublish">â‡‘ toc</a> | <a href="#cirodown-json">â†‘ parent "<code>cirodown.json</code>"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-505">ğŸ”—</a></span><div class="p" id="p-505">Path of a script that gets executed before running <a href="#publish"><code>cirodown --publish</code></a>.</div></div><div><span class="hide-hover"><a href="#p-506">ğŸ”—</a></span><div class="p" id="p-506">The script arguments are:
<div><ul id="ul-65">
<li id="l-169"><div class="p" id="p-507">the publish output directory.</div><div class="p" id="p-508">That directory is guaranteed to exist when <code>prepublish</code> is called.</div><div class="p" id="p-509">For <code>git</code>-based publish targets, all files are almost ready in there, just waiting for a <code>git add .</code> that follows <code>prepublish</code>.</div><div class="p" id="p-510">This means that you can use this script to place or remove files from the final publish output.</div></li></ul></div></div></div><div><span class="hide-hover"><a href="#p-511">ğŸ”—</a></span><div class="p" id="p-511">If the <code>prepublish</code> script returns with a non-zero exit value, the publish is aborted.</div></div><div><span class="hide-hover"><a href="#redirects">ğŸ”—</a></span><h5 id="redirects"><a href="#redirects" title="link to this element">17.1.3.4. <code>redirects</code></a><span>  | <a href="#toc-redirects">â‡‘ toc</a> | <a href="#cirodown-json">â†‘ parent "<code>cirodown.json</code>"</a></span></h5>
</div><div><span class="hide-hover"><a href="#p-512">ğŸ”—</a></span><div class="p" id="p-512">Create HTML redirects from <a href="#the-toplevel-header">toplevel headers</a> to arbitrary IDs, for example:
<pre id="c-190"><code>"redirects": {
  "a-toplevel-directory": "not-readme",
  "quick-start-redirect-test": "quick-start"
},
</code></pre>
The HTML files are generated whenever a directory compilation is required, e.g. as in <code>cirodown .</code>.</div></div><div><span class="hide-hover"><a href="#p-513">ğŸ”—</a></span><div class="p" id="p-513">The sources must be toplevel headers for now, because it is harder to implement redirections from <code>#someid</code> as that would require JavaScript: <a href="https://github.com/cirosantilli/cirodown/issues/48">https://github.com/cirosantilli/cirodown/issues/48</a>.</div></div><div><span class="hide-hover"><a href="#p-514">ğŸ”—</a></span><div class="p" id="p-514">This feature can be seen live on this document by visiting our tests:<div><ul id="ul-66">
<li id="l-170"><a href="not-readme-redirect-test">not-readme-redirect-test</a>: redirects to <a href="not-readme#not-readme">Not the README</a></li><li id="l-171"><a href="quick-start-redirect-test">quick-start-redirect-test</a>: redirects to <a href="#quick-start">Quick start</a></li></ul></div></div></div><div><span class="hide-hover"><a href="#editor-with-preview">ğŸ”—</a></span><h3 id="editor-with-preview"><a href="#editor-with-preview" title="link to this element">17.2. Editor with preview</a><span>  | <a href="#toc-editor-with-preview">â‡‘ toc</a> | <a href="#tooling">â†‘ parent "Tooling"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-515">ğŸ”—</a></span><div class="p" id="p-515">TODO</div></div><div><span class="hide-hover"><a href="#p-516">ğŸ”—</a></span><div class="p" id="p-516">We must achieve an editor setup with synchronized live side-by-side preview.</div></div><div><span class="hide-hover"><a href="#p-517">ğŸ”—</a></span><div class="p" id="p-517">Likely, we will first do a non WYSIWYG editor with side by side preview with scroll sync.</div></div><div><span class="hide-hover"><a href="#p-518">ğŸ”—</a></span><div class="p" id="p-518">Then, if the project picks up steam, we can start considering a full WYSISYG.</div></div><div><span class="hide-hover"><a href="#p-519">ğŸ”—</a></span><div class="p" id="p-519">It would be amazing to have a WebKit interface that works both on browser for the and locally.</div></div><div><span class="hide-hover"><a href="#p-520">ğŸ”—</a></span><div class="p" id="p-520">Possibilities we could reuse:
<div><ul id="ul-67">
<li id="l-172"><div class="p" id="p-521">Editor.js</div><div class="p" id="p-522">Returns JSON AST!<div><ul id="ul-68">
<li id="l-173">website: <a href="https://editorjs.io/">https://editorjs.io/</a> json output</li><li id="l-174">source: <a href="https://github.com/codex-team/editor.js">https://github.com/codex-team/editor.js</a></li><li id="l-175">WYSIWYG: no</li><li id="l-176">preview scroll sync: yes
</li></ul></div></div></li><li id="l-177"><div class="p" id="p-523">  StackEdit</div><div><ul id="ul-69">
<li id="l-178">* website: <a href="https://stackedit.io">https://stackedit.io</a><div><ul id="ul-70">
<li id="l-179">source: <a href="https://github.com/benweet/stackedit">https://github.com/benweet/stackedit</a></li><li id="l-180">demo: <a href="https://stackedit.io/app">https://stackedit.io/app</a></li><li id="l-181">WYSIWYG: no</li><li id="l-182">preview scroll sync: yes
</li></ul></div></li></ul></div></li><li id="l-183"><div class="p" id="p-524">  Editor.md</div><div><ul id="ul-71">
<li id="l-184">* website: <a href="https://github.com/pandao/editor.md">https://github.com/pandao/editor.md</a><div><ul id="ul-72">
<li id="l-185">source: <a href="https://github.com/pandao/editor.md">https://github.com/pandao/editor.md</a></li><li id="l-186">demo: <a href="https://pandao.github.io/editor.md">https://pandao.github.io/editor.md</a></li><li id="l-187">WYSIWYG: no</li><li id="l-188">preview scroll sync: yes but buggy when tested 2019-12-12 on live website
</li></ul></div></li></ul></div></li><li id="l-189"><div class="p" id="p-525">  Quill.md</div><div><ul id="ul-73">
<li id="l-190">* website: <a href="https://quilljs.com">https://quilljs.com</a><div><ul id="ul-74">
<li id="l-191">source: <a href="https://github.com/pandao/editor.md">https://github.com/pandao/editor.md</a></li><li id="l-192">demo: <a href="https://pandao.github.io/editor.md">https://pandao.github.io/editor.md</a></li><li id="l-193">WYSIWYG: yes</li><li id="l-194">markdown output: no <a href="https://github.com/quilljs/quill/issues/74">https://github.com/quilljs/quill/issues/74</a>
</li></ul></div></li></ul></div></li><li id="l-195"><a href="https://ui.toast.com/tui-editor/">https://ui.toast.com/tui-editor/</a></li><li id="l-196"><a href="https://www.froala.com/wysiwyg-editor">https://www.froala.com/wysiwyg-editor</a></li></ul></div></div></div><div><span class="hide-hover"><a href="#developing-cirodown">ğŸ”—</a></span><h2 id="developing-cirodown"><a href="#developing-cirodown" title="link to this element">18. Developing Cirodown</a><span>  | <a href="#toc-developing-cirodown">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#test-system">ğŸ”—</a></span><h3 id="test-system"><a href="#test-system" title="link to this element">18.1. Test system</a><span>  | <a href="#toc-test-system">â‡‘ toc</a> | <a href="#developing-cirodown">â†‘ parent "Developing Cirodown"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-526">ğŸ”—</a></span><div class="p" id="p-526">Run all tests:
<pre id="c-191"><code>npm test
</code></pre></div></div><div><span class="hide-hover"><a href="#p-527">ğŸ”—</a></span><div class="p" id="p-527">List all tests:
<pre id="c-192"><code>node node_modules/mocha-list-tests/mocha-list-tests.js main.js
</code></pre>
as per: <a href="https://stackoverflow.com/questions/41380137/list-all-mocha-tests-without-executing-them/58573986#58573986">https://stackoverflow.com/questions/41380137/list-all-mocha-tests-without-executing-them/58573986#58573986</a>.</div></div><div><span class="hide-hover"><a href="#p-528">ğŸ”—</a></span><div class="p" id="p-528">Run just one test by name:
<pre id="c-193"><code>npm test -- 'one paragraph'
</code></pre>
as per: <a href="https://stackoverflow.com/questions/10832031/how-to-run-a-single-test-with-mocha">https://stackoverflow.com/questions/10832031/how-to-run-a-single-test-with-mocha</a> TODO: what if the test name is a substring?</div></div><div><span class="hide-hover"><a href="#p-529">ğŸ”—</a></span><div class="p" id="p-529">Step debug during a test run. Add the statement:
<pre id="c-194"><code>debugger;
</code></pre>
to where you want to break in the code, and then:
<pre id="c-195"><code>node inspect ./node_modules/.bin/mocha test --ignore-leaks -g 'p with id before'
</code></pre></div></div><div><span class="hide-hover"><a href="#overview-of-files-in-this-repository">ğŸ”—</a></span><h3 id="overview-of-files-in-this-repository"><a href="#overview-of-files-in-this-repository" title="link to this element">18.2. Overview of files in this repository</a><span>  | <a href="#toc-overview-of-files-in-this-repository">â‡‘ toc</a> | <a href="#developing-cirodown">â†‘ parent "Developing Cirodown"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-530">ğŸ”—</a></span><div class="p" id="p-530">Source files:</div></div><div><span class="hide-hover"><a href="#ul-75">ğŸ”—</a></span><div><ul id="ul-75">
<li id="l-197"><a href="index.js">index.js</a>: main code. Must be able to run in the browser, so no Node.js specifics. Exposes the central <code>convert</code> function</li><li id="l-198"><a href="cirodown">cirodown</a>: CLI executable. Is basically just a CLI interface frontend to <code>convert</code></li><li id="l-199"><a href="test.js">test.js</a>: contains all the Mocha tests, see also: <a href="#test-system">Test system</a></li><li id="l-200"><a href="README.md">README.md</a>: minimal Markdown README until GitHub / NPM support Cirodown :-)</li></ul></div></div><div><span class="hide-hover"><a href="#p-531">ğŸ”—</a></span><div class="p" id="p-531">Generated files:</div></div><div><span class="hide-hover"><a href="#ul-76">ğŸ”—</a></span><div><ul id="ul-76">
<li id="l-201"><code>cirodown.js</code> packaged <a href="http://browserify.org">browserify</a> JavaScript for browser usage, generated with <code>npm run browserify</code></li></ul></div></div><div><span class="hide-hover"><a href="#build-sass">ğŸ”—</a></span><h4 id="build-sass"><a href="#build-sass" title="link to this element">18.2.1. <code>build-sass</code></a><span>  | <a href="#toc-build-sass">â‡‘ toc</a> | <a href="#overview-of-files-in-this-repository">â†‘ parent "Overview of files in this repository"</a></span></h4>
</div><div><span class="hide-hover"><a href="#p-532">ğŸ”—</a></span><div class="p" id="p-532">The <a href="build-sass">build-sass</a> script takes as input the <a href="cirodown.scss">cirodown.scss</a> <a href="https://sass-lang.com">SASS</a> scss file, and generates various <code>.css</code> versions from it required to properly view generated Cirodown HTML:</div></div><div><span class="hide-hover"><a href="#ul-77">ğŸ”—</a></span><div><ul id="ul-77">
<li id="l-202"><code>cirodown.min.css</code>: contains the converted <code>cirodown.scss</code> plus online <code>@import</code> requests for stuff like <a href="#math">KaTeX</a></li><li id="l-203"><code>cirodown.embed.min.css</code>: like <code>cirodown.min.css</code> but embeds all external CSS in-place without any <code>@import</code>. Used to distribute standalone pages: <a href="#html-embed"><code>--html-embed</code></a></li><li id="l-204"><code>cirodown.local.min.css</code>: only includes style generated from <code>cirodown.scss</code>, not external styles. Used when the external styles are present locally, e.g. via <code>node_modules</code>. I think this was done because <a href="https://stackoverflow.com/questions/34139675/css-import-not-working-for-local-file-file-path-is-correct"><code>@import</code></a> was not working with local flies?</li></ul></div></div><div><span class="hide-hover"><a href="#internals-api">ğŸ”—</a></span><h3 id="internals-api"><a href="#internals-api" title="link to this element">18.3. Internals API</a><span>  | <a href="#toc-internals-api">â‡‘ toc</a> | <a href="#developing-cirodown">â†‘ parent "Developing Cirodown"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-533">ğŸ”—</a></span><div class="p" id="p-533">Tokenized token stream and AST can be obtained as JSON from the API.</div></div><div><span class="hide-hover"><a href="#p-534">ğŸ”—</a></span><div class="p" id="p-534">Errors can be obtained as JSON from the API.</div></div><div><span class="hide-hover"><a href="#p-535">ğŸ”—</a></span><div class="p" id="p-535">Everything that you need to write Cirodown tooling, is present in the main API.</div></div><div><span class="hide-hover"><a href="#p-536">ğŸ”—</a></span><div class="p" id="p-536">All tooling will be merged into one single repo.</div></div><div><span class="hide-hover"><a href="#toplevel">ğŸ”—</a></span><h3 id="toplevel"><a href="#toplevel" title="link to this element">18.4. The <code>\toplevel</code> implicit macro</a><span>  | <a href="#toc-toplevel">â‡‘ toc</a> | <a href="#developing-cirodown">â†‘ parent "Developing Cirodown"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-537">ğŸ”—</a></span><div class="p" id="p-537">Every Cirodown document is implicitly put inside a <code>\toplevel</code> document and:<div><ul id="ul-78">
<li id="l-205">any optionally given arguments at the very beginning of the document will be treated as arguments of the <code>\toplevel</code> macro</li><li id="l-206">anything else will be put inside the <code>content</code> argument of the <code>\toplevel</code> macro</li></ul></div></div></div><div><span class="hide-hover"><a href="#p-538">ğŸ”—</a></span><div class="p" id="p-538">E.g., a Cirodown document that contains:
<pre id="c-196"><code>{title=My favorite title}

And now, some content!
</code></pre></div></div><div><span class="hide-hover"><a href="#p-539">ğŸ”—</a></span><div class="p" id="p-539">is morally equivalent to:
<pre id="c-197"><code>\toplevel{title=My favorite title}
[
And now, some content!
]
</code></pre>
In terms of HTML, the <code>\toplevel</code> element corresponds to the <code>&lt;html&gt;</code>, <code>&lt;head&gt;</code>, <code>&lt;header&gt;</code> and <code>&lt;footer&gt;</code> elements of a document.</div></div><div><span class="hide-hover"><a href="#p-540">ğŸ”—</a></span><div class="p" id="p-540">Trying to use the <code>\toplevel</code> macro explicitly in a document leads to an error.</div></div><div><span class="hide-hover"><a href="#html-document-title">ğŸ”—</a></span><h4 id="html-document-title"><a href="#html-document-title" title="link to this element">18.4.1. HTML document title</a><span>  | <a href="#toc-html-document-title">â‡‘ toc</a> | <a href="#toplevel">â†‘ parent "The <code>\toplevel</code> implicit macro"</a></span></h4>
</div><div><span class="hide-hover"><a href="#ul-79">ğŸ”—</a></span><div><ul id="ul-79">
<li id="l-207">if the <code>title</code> argument of <code>toplevel</code> is given, use that</li><li id="l-208">otherwise, if the document has a <code>\h[1]</code>, use the title of the first such header</li><li id="l-209">otherwise use a dummy value</li></ul></div></div><div><span class="hide-hover"><a href="#css">ğŸ”—</a></span><h3 id="css"><a href="#css" title="link to this element">18.5. CSS</a><span>  | <a href="#toc-css">â‡‘ toc</a> | <a href="#developing-cirodown">â†‘ parent "Developing Cirodown"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-541">ğŸ”—</a></span><div class="p" id="p-541">Our CSS is located at <a href="main.scss">main.scss</a> and gets processed through <a href="https://sass-lang.com">Sass</a>.</div></div><div><span class="hide-hover"><a href="#p-542">ğŸ”—</a></span><div class="p" id="p-542">To generate the CSS during development after any changes to that file, you must run:
<pre id="c-198"><code>npm sass
</code></pre></div></div><div><span class="hide-hover"><a href="#formal-grammar">ğŸ”—</a></span><h3 id="formal-grammar"><a href="#formal-grammar" title="link to this element">18.6. Formal grammar</a><span>  | <a href="#toc-formal-grammar">â‡‘ toc</a> | <a href="#developing-cirodown">â†‘ parent "Developing Cirodown"</a></span></h3>
</div><div><span class="hide-hover"><a href="#p-543">ğŸ”—</a></span><div class="p" id="p-543">TODO. Describe Cirodown's formal grammar, and classify it in the grammar hierarchy and parsing complexity.</div></div><div><span class="hide-hover"><a href="#todo">ğŸ”—</a></span><h3 id="todo"><a href="#todo" title="link to this element">18.7. TODO</a><span>  | <a href="#toc-todo">â‡‘ toc</a> | <a href="#developing-cirodown">â†‘ parent "Developing Cirodown"</a></span></h3>
</div><div><span class="hide-hover"><a href="#ul-80">ğŸ”—</a></span><div><ul id="ul-80">
<li id="l-210">list and code caption</li><li id="l-211"><a href="#id-scope">id_scope</a></li><li id="l-212">correct ID generation algorithm to be Unicode robust</li><li id="l-213">local downloads and single HTML page with image / script embeds</li><li id="l-214">image management: upload to separate media directory</li><li id="l-215">create mechanism to link to the GitHub blob view of in-tree source files that are not added to GitHub pages, e.g. <code>\file</code></li><li id="l-216">parse_error: add in document error message, currently only to stderr</li><li id="l-217">on the AST, put contents of headers inside headers</li><li id="l-218">auto-toc after the first paragraph</li><li id="l-219">capitalization property of headers</li></ul></div></div><div><span class="hide-hover"><a href="#related-projects">ğŸ”—</a></span><h2 id="related-projects"><a href="#related-projects" title="link to this element">19. Related projects</a><span>  | <a href="#toc-related-projects">â‡‘ toc</a> | <a href="#cirodown">â†‘ parent "Cirodown"</a></span></h2>
</div><div><span class="hide-hover"><a href="#ul-81">ğŸ”—</a></span><div><ul id="ul-81">
<li id="l-220"><a href="https://github.com/rstudio/bookdown">https://github.com/rstudio/bookdown</a>, <a href="https://bookdown.org/">https://bookdown.org/</a>. Very similar feature set to what we want!!! Transpiles to markdown, and then goes through Pandoc: <a href="https://bookdown.org/yihui/bookdown/pandoc.html">https://bookdown.org/yihui/bookdown/pandoc.html</a>, thus will never run on browser without huge translation layers. But does have an obscene amount of output formats however.</li><li id="l-221"><a href="https://gohugo.io/">Hugo</a>. Pretty good, similar feature set to ours. But Go based, so hard on browser, and adds adhoc features on top of markdown once again</li></ul></div></div><div><span class="hide-hover"><a href="#p-544">ğŸ”—</a></span><div class="p" id="p-544">Less related but of interest:<div><ul id="ul-82">
<li id="l-222"><a href="http://www.uprtcl.io/">http://www.uprtcl.io/</a></li><li id="l-223"><a href="https://libretexts.org">https://libretexts.org</a></li></ul></div></div></div>
</main>
<footer>
<div>License: <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA 4.0</a> unless noted</div>
<div>Website source code: <a href="https://github.com/cirosantilli/cirodown">https://github.com/cirosantilli/cirodown</a></div>
<div>Website Git version: <a href="https://github.com/cirosantilli/cirodown/commit/992d1376f0be93ff189211eee1c1195c1caf10f4">992d1376f0be93ff189211eee1c1195c1caf10f4</a></div>
</footer>
<script>
<!-- Google Analytics, AKA selling my soul to Google for some backlinks. -->
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-47867706-1', 'auto');
ga('send', 'pageview');
</script>
</body>
</html>
